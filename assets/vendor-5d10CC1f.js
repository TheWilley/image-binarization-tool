import{g as getAugmentedNamespace,a as getDefaultExportFromCjs}from"./react-vendor-0CuSiqFf.js";var scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(A){function B($t,Pt){var St=$t.length;$t.push(Pt);t:for(;0<St;){var Lt=St-1>>>1,Bt=$t[Lt];if(0<Y(Bt,Pt))$t[Lt]=Pt,$t[St]=Bt,St=Lt;else break t}}function P($t){return $t.length===0?null:$t[0]}function z($t){if($t.length===0)return null;var Pt=$t[0],St=$t.pop();if(St!==Pt){$t[0]=St;t:for(var Lt=0,Bt=$t.length,se=Bt>>>1;Lt<se;){var _t=2*(Lt+1)-1,re=$t[_t],Ot=_t+1,ct=$t[Ot];if(0>Y(re,St))Ot<Bt&&0>Y(ct,re)?($t[Lt]=ct,$t[Ot]=St,Lt=Ot):($t[Lt]=re,$t[_t]=St,Lt=_t);else if(Ot<Bt&&0>Y(ct,St))$t[Lt]=ct,$t[Ot]=St,Lt=Ot;else break t}}return Pt}function Y($t,Pt){var St=$t.sortIndex-Pt.sortIndex;return St!==0?St:$t.id-Pt.id}if(A.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var Q=performance;A.unstable_now=function(){return Q.now()}}else{var J=Date,K=J.now();A.unstable_now=function(){return J.now()-K}}var nt=[],st=[],lt=1,vt=null,dt=3,kt=!1,Et=!1,Rt=!1,Ct=!1,It=typeof setTimeout=="function"?setTimeout:null,Nt=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function et($t){for(var Pt=P(st);Pt!==null;){if(Pt.callback===null)z(st);else if(Pt.startTime<=$t)z(st),Pt.sortIndex=Pt.expirationTime,B(nt,Pt);else break;Pt=P(st)}}function ft($t){if(Rt=!1,et($t),!Et)if(P(nt)!==null)Et=!0,wt||(wt=!0,pt());else{var Pt=P(st);Pt!==null&&te(ft,Pt.startTime-$t)}}var wt=!1,bt=-1,W=5,ot=-1;function ut(){return Ct?!0:!(A.unstable_now()-ot<W)}function ht(){if(Ct=!1,wt){var $t=A.unstable_now();ot=$t;var Pt=!0;try{t:{Et=!1,Rt&&(Rt=!1,Nt(bt),bt=-1),kt=!0;var St=dt;try{e:{for(et($t),vt=P(nt);vt!==null&&!(vt.expirationTime>$t&&ut());){var Lt=vt.callback;if(typeof Lt=="function"){vt.callback=null,dt=vt.priorityLevel;var Bt=Lt(vt.expirationTime<=$t);if($t=A.unstable_now(),typeof Bt=="function"){vt.callback=Bt,et($t),Pt=!0;break e}vt===P(nt)&&z(nt),et($t)}else z(nt);vt=P(nt)}if(vt!==null)Pt=!0;else{var se=P(st);se!==null&&te(ft,se.startTime-$t),Pt=!1}}break t}finally{vt=null,dt=St,kt=!1}Pt=void 0}}finally{Pt?pt():wt=!1}}}var pt;if(typeof Z=="function")pt=function(){Z(ht)};else if(typeof MessageChannel<"u"){var At=new MessageChannel,Dt=At.port2;At.port1.onmessage=ht,pt=function(){Dt.postMessage(null)}}else pt=function(){It(ht,0)};function te($t,Pt){bt=It(function(){$t(A.unstable_now())},Pt)}A.unstable_IdlePriority=5,A.unstable_ImmediatePriority=1,A.unstable_LowPriority=4,A.unstable_NormalPriority=3,A.unstable_Profiling=null,A.unstable_UserBlockingPriority=2,A.unstable_cancelCallback=function($t){$t.callback=null},A.unstable_forceFrameRate=function($t){0>$t||125<$t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<$t?Math.floor(1e3/$t):5},A.unstable_getCurrentPriorityLevel=function(){return dt},A.unstable_next=function($t){switch(dt){case 1:case 2:case 3:var Pt=3;break;default:Pt=dt}var St=dt;dt=Pt;try{return $t()}finally{dt=St}},A.unstable_requestPaint=function(){Ct=!0},A.unstable_runWithPriority=function($t,Pt){switch($t){case 1:case 2:case 3:case 4:case 5:break;default:$t=3}var St=dt;dt=$t;try{return Pt()}finally{dt=St}},A.unstable_scheduleCallback=function($t,Pt,St){var Lt=A.unstable_now();switch(typeof St=="object"&&St!==null?(St=St.delay,St=typeof St=="number"&&0<St?Lt+St:Lt):St=Lt,$t){case 1:var Bt=-1;break;case 2:Bt=250;break;case 5:Bt=1073741823;break;case 4:Bt=1e4;break;default:Bt=5e3}return Bt=St+Bt,$t={id:lt++,callback:Pt,priorityLevel:$t,startTime:St,expirationTime:Bt,sortIndex:-1},St>Lt?($t.sortIndex=St,B(st,$t),P(nt)===null&&$t===P(st)&&(Rt?(Nt(bt),bt=-1):Rt=!0,te(ft,St-Lt))):($t.sortIndex=Bt,B(nt,$t),Et||kt||(Et=!0,wt||(wt=!0,pt()))),$t},A.unstable_shouldYield=ut,A.unstable_wrapCallback=function($t){var Pt=dt;return function(){var St=dt;dt=Pt;try{return $t.apply(this,arguments)}finally{dt=St}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var matrix$1={};const toString=Object.prototype.toString;function isAnyArray(A){const B=toString.call(A);return B.endsWith("Array]")&&!B.includes("Big")}const libEsm=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(libEsm);function max(A){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(A))throw new TypeError("input must be an array");if(A.length===0)throw new TypeError("input must not be empty");var P=B.fromIndex,z=P===void 0?0:P,Y=B.toIndex,Q=Y===void 0?A.length:Y;if(z<0||z>=A.length||!Number.isInteger(z))throw new Error("fromIndex must be a positive integer smaller than length");if(Q<=z||Q>A.length||!Number.isInteger(Q))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var J=A[z],K=z+1;K<Q;K++)A[K]>J&&(J=A[K]);return J}function min(A){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(A))throw new TypeError("input must be an array");if(A.length===0)throw new TypeError("input must not be empty");var P=B.fromIndex,z=P===void 0?0:P,Y=B.toIndex,Q=Y===void 0?A.length:Y;if(z<0||z>=A.length||!Number.isInteger(z))throw new Error("fromIndex must be a positive integer smaller than length");if(Q<=z||Q>A.length||!Number.isInteger(Q))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var J=A[z],K=z+1;K<Q;K++)A[K]<J&&(J=A[K]);return J}function rescale(A){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(isAnyArray(A)){if(A.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var P;if(B.output!==void 0){if(!isAnyArray(B.output))throw new TypeError("output option must be an array if specified");P=B.output}else P=new Array(A.length);var z=min(A),Y=max(A);if(z===Y)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var Q=B.min,J=Q===void 0?B.autoMinMax?z:0:Q,K=B.max,nt=K===void 0?B.autoMinMax?Y:1:K;if(J>=nt)throw new RangeError("min option must be smaller than max option");for(var st=(nt-J)/(Y-z),lt=0;lt<A.length;lt++)P[lt]=(A[lt]-z)*st+J;return P}const libEs6=Object.freeze(Object.defineProperty({__proto__:null,default:rescale},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(libEs6);var hasRequiredMatrix;function requireMatrix(){if(hasRequiredMatrix)return matrix$1;hasRequiredMatrix=1,Object.defineProperty(matrix$1,"__esModule",{value:!0});var A=require$$0,B=require$$1;const P=" ".repeat(2),z=" ".repeat(4);function Y(){return Q(this)}function Q(U,_={}){const{maxRows:q=15,maxColumns:E=10,maxNumSize:C=8,padMinus:D="auto"}=_;return`${U.constructor.name} {
${P}[
${z}${J(U,q,E,C,D)}
${P}]
${P}rows: ${U.rows}
${P}columns: ${U.columns}
}`}function J(U,_,q,E,C){const{rows:D,columns:O}=U,V=Math.min(D,_),X=Math.min(O,q),G=[];if(C==="auto"){C=!1;t:for(let at=0;at<V;at++)for(let tt=0;tt<X;tt++)if(U.get(at,tt)<0){C=!0;break t}}for(let at=0;at<V;at++){let tt=[];for(let mt=0;mt<X;mt++)tt.push(K(U.get(at,mt),E,C));G.push(`${tt.join(" ")}`)}return X!==O&&(G[G.length-1]+=` ... ${O-q} more columns`),V!==D&&G.push(`... ${D-_} more rows`),G.join(`
${z}`)}function K(U,_,q){return(U>=0&&q?` ${nt(U,_-1)}`:nt(U,_)).padEnd(_)}function nt(U,_){let q=U.toString();if(q.length<=_)return q;let E=U.toFixed(_);if(E.length>_&&(E=U.toFixed(Math.max(0,_-(E.length-_)))),E.length<=_&&!E.startsWith("0.000")&&!E.startsWith("-0.000"))return E;let C=U.toExponential(_);return C.length>_&&(C=U.toExponential(Math.max(0,_-(C.length-_)))),C.slice(0)}function st(U,_){U.prototype.add=function(E){return typeof E=="number"?this.addS(E):this.addM(E)},U.prototype.addS=function(E){for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)+E);return this},U.prototype.addM=function(E){if(E=_.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)+E.get(C,D));return this},U.add=function(E,C){return new _(E).add(C)},U.prototype.sub=function(E){return typeof E=="number"?this.subS(E):this.subM(E)},U.prototype.subS=function(E){for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)-E);return this},U.prototype.subM=function(E){if(E=_.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)-E.get(C,D));return this},U.sub=function(E,C){return new _(E).sub(C)},U.prototype.subtract=U.prototype.sub,U.prototype.subtractS=U.prototype.subS,U.prototype.subtractM=U.prototype.subM,U.subtract=U.sub,U.prototype.mul=function(E){return typeof E=="number"?this.mulS(E):this.mulM(E)},U.prototype.mulS=function(E){for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)*E);return this},U.prototype.mulM=function(E){if(E=_.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)*E.get(C,D));return this},U.mul=function(E,C){return new _(E).mul(C)},U.prototype.multiply=U.prototype.mul,U.prototype.multiplyS=U.prototype.mulS,U.prototype.multiplyM=U.prototype.mulM,U.multiply=U.mul,U.prototype.div=function(E){return typeof E=="number"?this.divS(E):this.divM(E)},U.prototype.divS=function(E){for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)/E);return this},U.prototype.divM=function(E){if(E=_.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)/E.get(C,D));return this},U.div=function(E,C){return new _(E).div(C)},U.prototype.divide=U.prototype.div,U.prototype.divideS=U.prototype.divS,U.prototype.divideM=U.prototype.divM,U.divide=U.div,U.prototype.mod=function(E){return typeof E=="number"?this.modS(E):this.modM(E)},U.prototype.modS=function(E){for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)%E);return this},U.prototype.modM=function(E){if(E=_.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)%E.get(C,D));return this},U.mod=function(E,C){return new _(E).mod(C)},U.prototype.modulus=U.prototype.mod,U.prototype.modulusS=U.prototype.modS,U.prototype.modulusM=U.prototype.modM,U.modulus=U.mod,U.prototype.and=function(E){return typeof E=="number"?this.andS(E):this.andM(E)},U.prototype.andS=function(E){for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)&E);return this},U.prototype.andM=function(E){if(E=_.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)&E.get(C,D));return this},U.and=function(E,C){return new _(E).and(C)},U.prototype.or=function(E){return typeof E=="number"?this.orS(E):this.orM(E)},U.prototype.orS=function(E){for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)|E);return this},U.prototype.orM=function(E){if(E=_.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)|E.get(C,D));return this},U.or=function(E,C){return new _(E).or(C)},U.prototype.xor=function(E){return typeof E=="number"?this.xorS(E):this.xorM(E)},U.prototype.xorS=function(E){for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)^E);return this},U.prototype.xorM=function(E){if(E=_.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)^E.get(C,D));return this},U.xor=function(E,C){return new _(E).xor(C)},U.prototype.leftShift=function(E){return typeof E=="number"?this.leftShiftS(E):this.leftShiftM(E)},U.prototype.leftShiftS=function(E){for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)<<E);return this},U.prototype.leftShiftM=function(E){if(E=_.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)<<E.get(C,D));return this},U.leftShift=function(E,C){return new _(E).leftShift(C)},U.prototype.signPropagatingRightShift=function(E){return typeof E=="number"?this.signPropagatingRightShiftS(E):this.signPropagatingRightShiftM(E)},U.prototype.signPropagatingRightShiftS=function(E){for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)>>E);return this},U.prototype.signPropagatingRightShiftM=function(E){if(E=_.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)>>E.get(C,D));return this},U.signPropagatingRightShift=function(E,C){return new _(E).signPropagatingRightShift(C)},U.prototype.rightShift=function(E){return typeof E=="number"?this.rightShiftS(E):this.rightShiftM(E)},U.prototype.rightShiftS=function(E){for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)>>>E);return this},U.prototype.rightShiftM=function(E){if(E=_.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)>>>E.get(C,D));return this},U.rightShift=function(E,C){return new _(E).rightShift(C)},U.prototype.zeroFillRightShift=U.prototype.rightShift,U.prototype.zeroFillRightShiftS=U.prototype.rightShiftS,U.prototype.zeroFillRightShiftM=U.prototype.rightShiftM,U.zeroFillRightShift=U.rightShift,U.prototype.not=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,~this.get(E,C));return this},U.not=function(E){return new _(E).not()},U.prototype.abs=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.abs(this.get(E,C)));return this},U.abs=function(E){return new _(E).abs()},U.prototype.acos=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.acos(this.get(E,C)));return this},U.acos=function(E){return new _(E).acos()},U.prototype.acosh=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.acosh(this.get(E,C)));return this},U.acosh=function(E){return new _(E).acosh()},U.prototype.asin=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.asin(this.get(E,C)));return this},U.asin=function(E){return new _(E).asin()},U.prototype.asinh=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.asinh(this.get(E,C)));return this},U.asinh=function(E){return new _(E).asinh()},U.prototype.atan=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.atan(this.get(E,C)));return this},U.atan=function(E){return new _(E).atan()},U.prototype.atanh=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.atanh(this.get(E,C)));return this},U.atanh=function(E){return new _(E).atanh()},U.prototype.cbrt=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.cbrt(this.get(E,C)));return this},U.cbrt=function(E){return new _(E).cbrt()},U.prototype.ceil=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.ceil(this.get(E,C)));return this},U.ceil=function(E){return new _(E).ceil()},U.prototype.clz32=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.clz32(this.get(E,C)));return this},U.clz32=function(E){return new _(E).clz32()},U.prototype.cos=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.cos(this.get(E,C)));return this},U.cos=function(E){return new _(E).cos()},U.prototype.cosh=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.cosh(this.get(E,C)));return this},U.cosh=function(E){return new _(E).cosh()},U.prototype.exp=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.exp(this.get(E,C)));return this},U.exp=function(E){return new _(E).exp()},U.prototype.expm1=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.expm1(this.get(E,C)));return this},U.expm1=function(E){return new _(E).expm1()},U.prototype.floor=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.floor(this.get(E,C)));return this},U.floor=function(E){return new _(E).floor()},U.prototype.fround=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.fround(this.get(E,C)));return this},U.fround=function(E){return new _(E).fround()},U.prototype.log=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.log(this.get(E,C)));return this},U.log=function(E){return new _(E).log()},U.prototype.log1p=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.log1p(this.get(E,C)));return this},U.log1p=function(E){return new _(E).log1p()},U.prototype.log10=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.log10(this.get(E,C)));return this},U.log10=function(E){return new _(E).log10()},U.prototype.log2=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.log2(this.get(E,C)));return this},U.log2=function(E){return new _(E).log2()},U.prototype.round=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.round(this.get(E,C)));return this},U.round=function(E){return new _(E).round()},U.prototype.sign=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.sign(this.get(E,C)));return this},U.sign=function(E){return new _(E).sign()},U.prototype.sin=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.sin(this.get(E,C)));return this},U.sin=function(E){return new _(E).sin()},U.prototype.sinh=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.sinh(this.get(E,C)));return this},U.sinh=function(E){return new _(E).sinh()},U.prototype.sqrt=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.sqrt(this.get(E,C)));return this},U.sqrt=function(E){return new _(E).sqrt()},U.prototype.tan=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.tan(this.get(E,C)));return this},U.tan=function(E){return new _(E).tan()},U.prototype.tanh=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.tanh(this.get(E,C)));return this},U.tanh=function(E){return new _(E).tanh()},U.prototype.trunc=function(){for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.set(E,C,Math.trunc(this.get(E,C)));return this},U.trunc=function(E){return new _(E).trunc()},U.pow=function(E,C){return new _(E).pow(C)},U.prototype.pow=function(E){return typeof E=="number"?this.powS(E):this.powM(E)},U.prototype.powS=function(E){for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)**E);return this},U.prototype.powM=function(E){if(E=_.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let D=0;D<this.columns;D++)this.set(C,D,this.get(C,D)**E.get(C,D));return this}}function lt(U,_,q){let E=q?U.rows:U.rows-1;if(_<0||_>E)throw new RangeError("Row index out of range")}function vt(U,_,q){let E=q?U.columns:U.columns-1;if(_<0||_>E)throw new RangeError("Column index out of range")}function dt(U,_){if(_.to1DArray&&(_=_.to1DArray()),_.length!==U.columns)throw new RangeError("vector size must be the same as the number of columns");return _}function kt(U,_){if(_.to1DArray&&(_=_.to1DArray()),_.length!==U.rows)throw new RangeError("vector size must be the same as the number of rows");return _}function Et(U,_){if(!A.isAnyArray(_))throw new TypeError("row indices must be an array");for(let q=0;q<_.length;q++)if(_[q]<0||_[q]>=U.rows)throw new RangeError("row indices are out of range")}function Rt(U,_){if(!A.isAnyArray(_))throw new TypeError("column indices must be an array");for(let q=0;q<_.length;q++)if(_[q]<0||_[q]>=U.columns)throw new RangeError("column indices are out of range")}function Ct(U,_,q,E,C){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Nt("startRow",_),Nt("endRow",q),Nt("startColumn",E),Nt("endColumn",C),_>q||E>C||_<0||_>=U.rows||q<0||q>=U.rows||E<0||E>=U.columns||C<0||C>=U.columns)throw new RangeError("Submatrix indices are out of range")}function It(U,_=0){let q=[];for(let E=0;E<U;E++)q.push(_);return q}function Nt(U,_){if(typeof _!="number")throw new TypeError(`${U} must be a number`)}function Z(U){if(U.isEmpty())throw new Error("Empty matrix has no elements to index")}function et(U){let _=It(U.rows);for(let q=0;q<U.rows;++q)for(let E=0;E<U.columns;++E)_[q]+=U.get(q,E);return _}function ft(U){let _=It(U.columns);for(let q=0;q<U.rows;++q)for(let E=0;E<U.columns;++E)_[E]+=U.get(q,E);return _}function wt(U){let _=0;for(let q=0;q<U.rows;q++)for(let E=0;E<U.columns;E++)_+=U.get(q,E);return _}function bt(U){let _=It(U.rows,1);for(let q=0;q<U.rows;++q)for(let E=0;E<U.columns;++E)_[q]*=U.get(q,E);return _}function W(U){let _=It(U.columns,1);for(let q=0;q<U.rows;++q)for(let E=0;E<U.columns;++E)_[E]*=U.get(q,E);return _}function ot(U){let _=1;for(let q=0;q<U.rows;q++)for(let E=0;E<U.columns;E++)_*=U.get(q,E);return _}function ut(U,_,q){const E=U.rows,C=U.columns,D=[];for(let O=0;O<E;O++){let V=0,X=0,G=0;for(let at=0;at<C;at++)G=U.get(O,at)-q[O],V+=G,X+=G*G;_?D.push((X-V*V/C)/(C-1)):D.push((X-V*V/C)/C)}return D}function ht(U,_,q){const E=U.rows,C=U.columns,D=[];for(let O=0;O<C;O++){let V=0,X=0,G=0;for(let at=0;at<E;at++)G=U.get(at,O)-q[O],V+=G,X+=G*G;_?D.push((X-V*V/E)/(E-1)):D.push((X-V*V/E)/E)}return D}function pt(U,_,q){const E=U.rows,C=U.columns,D=E*C;let O=0,V=0,X=0;for(let G=0;G<E;G++)for(let at=0;at<C;at++)X=U.get(G,at)-q,O+=X,V+=X*X;return _?(V-O*O/D)/(D-1):(V-O*O/D)/D}function At(U,_){for(let q=0;q<U.rows;q++)for(let E=0;E<U.columns;E++)U.set(q,E,U.get(q,E)-_[q])}function Dt(U,_){for(let q=0;q<U.rows;q++)for(let E=0;E<U.columns;E++)U.set(q,E,U.get(q,E)-_[E])}function te(U,_){for(let q=0;q<U.rows;q++)for(let E=0;E<U.columns;E++)U.set(q,E,U.get(q,E)-_)}function $t(U){const _=[];for(let q=0;q<U.rows;q++){let E=0;for(let C=0;C<U.columns;C++)E+=U.get(q,C)**2/(U.columns-1);_.push(Math.sqrt(E))}return _}function Pt(U,_){for(let q=0;q<U.rows;q++)for(let E=0;E<U.columns;E++)U.set(q,E,U.get(q,E)/_[q])}function St(U){const _=[];for(let q=0;q<U.columns;q++){let E=0;for(let C=0;C<U.rows;C++)E+=U.get(C,q)**2/(U.rows-1);_.push(Math.sqrt(E))}return _}function Lt(U,_){for(let q=0;q<U.rows;q++)for(let E=0;E<U.columns;E++)U.set(q,E,U.get(q,E)/_[E])}function Bt(U){const _=U.size-1;let q=0;for(let E=0;E<U.columns;E++)for(let C=0;C<U.rows;C++)q+=U.get(C,E)**2/_;return Math.sqrt(q)}function se(U,_){for(let q=0;q<U.rows;q++)for(let E=0;E<U.columns;E++)U.set(q,E,U.get(q,E)/_)}class _t{static from1DArray(_,q,E){if(_*q!==E.length)throw new RangeError("data length does not match given dimensions");let D=new ct(_,q);for(let O=0;O<_;O++)for(let V=0;V<q;V++)D.set(O,V,E[O*q+V]);return D}static rowVector(_){let q=new ct(1,_.length);for(let E=0;E<_.length;E++)q.set(0,E,_[E]);return q}static columnVector(_){let q=new ct(_.length,1);for(let E=0;E<_.length;E++)q.set(E,0,_[E]);return q}static zeros(_,q){return new ct(_,q)}static ones(_,q){return new ct(_,q).fill(1)}static rand(_,q,E={}){if(typeof E!="object")throw new TypeError("options must be an object");const{random:C=Math.random}=E;let D=new ct(_,q);for(let O=0;O<_;O++)for(let V=0;V<q;V++)D.set(O,V,C());return D}static randInt(_,q,E={}){if(typeof E!="object")throw new TypeError("options must be an object");const{min:C=0,max:D=1e3,random:O=Math.random}=E;if(!Number.isInteger(C))throw new TypeError("min must be an integer");if(!Number.isInteger(D))throw new TypeError("max must be an integer");if(C>=D)throw new RangeError("min must be smaller than max");let V=D-C,X=new ct(_,q);for(let G=0;G<_;G++)for(let at=0;at<q;at++){let tt=C+Math.round(O()*V);X.set(G,at,tt)}return X}static eye(_,q,E){q===void 0&&(q=_),E===void 0&&(E=1);let C=Math.min(_,q),D=this.zeros(_,q);for(let O=0;O<C;O++)D.set(O,O,E);return D}static diag(_,q,E){let C=_.length;q===void 0&&(q=C),E===void 0&&(E=q);let D=Math.min(C,q,E),O=this.zeros(q,E);for(let V=0;V<D;V++)O.set(V,V,_[V]);return O}static min(_,q){_=this.checkMatrix(_),q=this.checkMatrix(q);let E=_.rows,C=_.columns,D=new ct(E,C);for(let O=0;O<E;O++)for(let V=0;V<C;V++)D.set(O,V,Math.min(_.get(O,V),q.get(O,V)));return D}static max(_,q){_=this.checkMatrix(_),q=this.checkMatrix(q);let E=_.rows,C=_.columns,D=new this(E,C);for(let O=0;O<E;O++)for(let V=0;V<C;V++)D.set(O,V,Math.max(_.get(O,V),q.get(O,V)));return D}static checkMatrix(_){return _t.isMatrix(_)?_:new ct(_)}static isMatrix(_){return _!=null&&_.klass==="Matrix"}get size(){return this.rows*this.columns}apply(_){if(typeof _!="function")throw new TypeError("callback must be a function");for(let q=0;q<this.rows;q++)for(let E=0;E<this.columns;E++)_.call(this,q,E);return this}to1DArray(){let _=[];for(let q=0;q<this.rows;q++)for(let E=0;E<this.columns;E++)_.push(this.get(q,E));return _}to2DArray(){let _=[];for(let q=0;q<this.rows;q++){_.push([]);for(let E=0;E<this.columns;E++)_[q].push(this.get(q,E))}return _}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let _=0;_<this.rows;_++)for(let q=0;q<=_;q++)if(this.get(_,q)!==this.get(q,_))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let _=0;_<this.rows;_++)if(this.get(_,_)!==0)return!1;return!0}isEchelonForm(){let _=0,q=0,E=-1,C=!0,D=!1;for(;_<this.rows&&C;){for(q=0,D=!1;q<this.columns&&D===!1;)this.get(_,q)===0?q++:this.get(_,q)===1&&q>E?(D=!0,E=q):(C=!1,D=!0);_++}return C}isReducedEchelonForm(){let _=0,q=0,E=-1,C=!0,D=!1;for(;_<this.rows&&C;){for(q=0,D=!1;q<this.columns&&D===!1;)this.get(_,q)===0?q++:this.get(_,q)===1&&q>E?(D=!0,E=q):(C=!1,D=!0);for(let O=q+1;O<this.rows;O++)this.get(_,O)!==0&&(C=!1);_++}return C}echelonForm(){let _=this.clone(),q=0,E=0;for(;q<_.rows&&E<_.columns;){let C=q;for(let D=q;D<_.rows;D++)_.get(D,E)>_.get(C,E)&&(C=D);if(_.get(C,E)===0)E++;else{_.swapRows(q,C);let D=_.get(q,E);for(let O=E;O<_.columns;O++)_.set(q,O,_.get(q,O)/D);for(let O=q+1;O<_.rows;O++){let V=_.get(O,E)/_.get(q,E);_.set(O,E,0);for(let X=E+1;X<_.columns;X++)_.set(O,X,_.get(O,X)-_.get(q,X)*V)}q++,E++}}return _}reducedEchelonForm(){let _=this.echelonForm(),q=_.columns,E=_.rows,C=E-1;for(;C>=0;)if(_.maxRow(C)===0)C--;else{let D=0,O=!1;for(;D<E&&O===!1;)_.get(C,D)===1?O=!0:D++;for(let V=0;V<C;V++){let X=_.get(V,D);for(let G=D;G<q;G++){let at=_.get(V,G)-X*_.get(C,G);_.set(V,G,at)}}C--}return _}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(_={}){if(typeof _!="object")throw new TypeError("options must be an object");const{rows:q=1,columns:E=1}=_;if(!Number.isInteger(q)||q<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(E)||E<=0)throw new TypeError("columns must be a positive integer");let C=new ct(this.rows*q,this.columns*E);for(let D=0;D<q;D++)for(let O=0;O<E;O++)C.setSubMatrix(this,this.rows*D,this.columns*O);return C}fill(_){for(let q=0;q<this.rows;q++)for(let E=0;E<this.columns;E++)this.set(q,E,_);return this}neg(){return this.mulS(-1)}getRow(_){lt(this,_);let q=[];for(let E=0;E<this.columns;E++)q.push(this.get(_,E));return q}getRowVector(_){return ct.rowVector(this.getRow(_))}setRow(_,q){lt(this,_),q=dt(this,q);for(let E=0;E<this.columns;E++)this.set(_,E,q[E]);return this}swapRows(_,q){lt(this,_),lt(this,q);for(let E=0;E<this.columns;E++){let C=this.get(_,E);this.set(_,E,this.get(q,E)),this.set(q,E,C)}return this}getColumn(_){vt(this,_);let q=[];for(let E=0;E<this.rows;E++)q.push(this.get(E,_));return q}getColumnVector(_){return ct.columnVector(this.getColumn(_))}setColumn(_,q){vt(this,_),q=kt(this,q);for(let E=0;E<this.rows;E++)this.set(E,_,q[E]);return this}swapColumns(_,q){vt(this,_),vt(this,q);for(let E=0;E<this.rows;E++){let C=this.get(E,_);this.set(E,_,this.get(E,q)),this.set(E,q,C)}return this}addRowVector(_){_=dt(this,_);for(let q=0;q<this.rows;q++)for(let E=0;E<this.columns;E++)this.set(q,E,this.get(q,E)+_[E]);return this}subRowVector(_){_=dt(this,_);for(let q=0;q<this.rows;q++)for(let E=0;E<this.columns;E++)this.set(q,E,this.get(q,E)-_[E]);return this}mulRowVector(_){_=dt(this,_);for(let q=0;q<this.rows;q++)for(let E=0;E<this.columns;E++)this.set(q,E,this.get(q,E)*_[E]);return this}divRowVector(_){_=dt(this,_);for(let q=0;q<this.rows;q++)for(let E=0;E<this.columns;E++)this.set(q,E,this.get(q,E)/_[E]);return this}addColumnVector(_){_=kt(this,_);for(let q=0;q<this.rows;q++)for(let E=0;E<this.columns;E++)this.set(q,E,this.get(q,E)+_[q]);return this}subColumnVector(_){_=kt(this,_);for(let q=0;q<this.rows;q++)for(let E=0;E<this.columns;E++)this.set(q,E,this.get(q,E)-_[q]);return this}mulColumnVector(_){_=kt(this,_);for(let q=0;q<this.rows;q++)for(let E=0;E<this.columns;E++)this.set(q,E,this.get(q,E)*_[q]);return this}divColumnVector(_){_=kt(this,_);for(let q=0;q<this.rows;q++)for(let E=0;E<this.columns;E++)this.set(q,E,this.get(q,E)/_[q]);return this}mulRow(_,q){lt(this,_);for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)*q);return this}mulColumn(_,q){vt(this,_);for(let E=0;E<this.rows;E++)this.set(E,_,this.get(E,_)*q);return this}max(_){if(this.isEmpty())return NaN;switch(_){case"row":{const q=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.get(E,C)>q[E]&&(q[E]=this.get(E,C));return q}case"column":{const q=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.get(E,C)>q[C]&&(q[C]=this.get(E,C));return q}case void 0:{let q=this.get(0,0);for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.get(E,C)>q&&(q=this.get(E,C));return q}default:throw new Error(`invalid option: ${_}`)}}maxIndex(){Z(this);let _=this.get(0,0),q=[0,0];for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.get(E,C)>_&&(_=this.get(E,C),q[0]=E,q[1]=C);return q}min(_){if(this.isEmpty())return NaN;switch(_){case"row":{const q=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.get(E,C)<q[E]&&(q[E]=this.get(E,C));return q}case"column":{const q=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.get(E,C)<q[C]&&(q[C]=this.get(E,C));return q}case void 0:{let q=this.get(0,0);for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.get(E,C)<q&&(q=this.get(E,C));return q}default:throw new Error(`invalid option: ${_}`)}}minIndex(){Z(this);let _=this.get(0,0),q=[0,0];for(let E=0;E<this.rows;E++)for(let C=0;C<this.columns;C++)this.get(E,C)<_&&(_=this.get(E,C),q[0]=E,q[1]=C);return q}maxRow(_){if(lt(this,_),this.isEmpty())return NaN;let q=this.get(_,0);for(let E=1;E<this.columns;E++)this.get(_,E)>q&&(q=this.get(_,E));return q}maxRowIndex(_){lt(this,_),Z(this);let q=this.get(_,0),E=[_,0];for(let C=1;C<this.columns;C++)this.get(_,C)>q&&(q=this.get(_,C),E[1]=C);return E}minRow(_){if(lt(this,_),this.isEmpty())return NaN;let q=this.get(_,0);for(let E=1;E<this.columns;E++)this.get(_,E)<q&&(q=this.get(_,E));return q}minRowIndex(_){lt(this,_),Z(this);let q=this.get(_,0),E=[_,0];for(let C=1;C<this.columns;C++)this.get(_,C)<q&&(q=this.get(_,C),E[1]=C);return E}maxColumn(_){if(vt(this,_),this.isEmpty())return NaN;let q=this.get(0,_);for(let E=1;E<this.rows;E++)this.get(E,_)>q&&(q=this.get(E,_));return q}maxColumnIndex(_){vt(this,_),Z(this);let q=this.get(0,_),E=[0,_];for(let C=1;C<this.rows;C++)this.get(C,_)>q&&(q=this.get(C,_),E[0]=C);return E}minColumn(_){if(vt(this,_),this.isEmpty())return NaN;let q=this.get(0,_);for(let E=1;E<this.rows;E++)this.get(E,_)<q&&(q=this.get(E,_));return q}minColumnIndex(_){vt(this,_),Z(this);let q=this.get(0,_),E=[0,_];for(let C=1;C<this.rows;C++)this.get(C,_)<q&&(q=this.get(C,_),E[0]=C);return E}diag(){let _=Math.min(this.rows,this.columns),q=[];for(let E=0;E<_;E++)q.push(this.get(E,E));return q}norm(_="frobenius"){switch(_){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${_}`)}}cumulativeSum(){let _=0;for(let q=0;q<this.rows;q++)for(let E=0;E<this.columns;E++)_+=this.get(q,E),this.set(q,E,_);return this}dot(_){_t.isMatrix(_)&&(_=_.to1DArray());let q=this.to1DArray();if(q.length!==_.length)throw new RangeError("vectors do not have the same size");let E=0;for(let C=0;C<q.length;C++)E+=q[C]*_[C];return E}mmul(_){_=ct.checkMatrix(_);let q=this.rows,E=this.columns,C=_.columns,D=new ct(q,C),O=new Float64Array(E);for(let V=0;V<C;V++){for(let X=0;X<E;X++)O[X]=_.get(X,V);for(let X=0;X<q;X++){let G=0;for(let at=0;at<E;at++)G+=this.get(X,at)*O[at];D.set(X,V,G)}}return D}mpow(_){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(_)||_<0)throw new RangeError("Exponent must be a non-negative integer");let q=ct.eye(this.rows),E=this;for(let C=_;C>=1;C/=2)(C&1)!==0&&(q=q.mmul(E)),E=E.mmul(E);return q}strassen2x2(_){_=ct.checkMatrix(_);let q=new ct(2,2);const E=this.get(0,0),C=_.get(0,0),D=this.get(0,1),O=_.get(0,1),V=this.get(1,0),X=_.get(1,0),G=this.get(1,1),at=_.get(1,1),tt=(E+G)*(C+at),mt=(V+G)*C,qt=E*(O-at),gt=G*(X-C),yt=(E+D)*at,Ut=(V-E)*(C+O),rt=(D-G)*(X+at),Tt=tt+gt-yt+rt,Vt=qt+yt,ie=mt+gt,ae=tt-mt+qt+Ut;return q.set(0,0,Tt),q.set(0,1,Vt),q.set(1,0,ie),q.set(1,1,ae),q}strassen3x3(_){_=ct.checkMatrix(_);let q=new ct(3,3);const E=this.get(0,0),C=this.get(0,1),D=this.get(0,2),O=this.get(1,0),V=this.get(1,1),X=this.get(1,2),G=this.get(2,0),at=this.get(2,1),tt=this.get(2,2),mt=_.get(0,0),qt=_.get(0,1),gt=_.get(0,2),yt=_.get(1,0),Ut=_.get(1,1),rt=_.get(1,2),Tt=_.get(2,0),Vt=_.get(2,1),ie=_.get(2,2),ae=(E+C+D-O-V-at-tt)*Ut,Te=(E-O)*(-qt+Ut),Ht=V*(-mt+qt+yt-Ut-rt-Tt+ie),ee=(-E+O+V)*(mt-qt+Ut),ke=(O+V)*(-mt+qt),it=E*mt,Mt=(-E+G+at)*(mt-gt+rt),zt=(-E+G)*(gt-rt),Ft=(G+at)*(-mt+gt),je=(E+C+D-V-X-G-at)*rt,_e=at*(-mt+gt+yt-Ut-rt-Tt+Vt),Re=(-D+at+tt)*(Ut+Tt-Vt),qe=(D-tt)*(Ut-Vt),Ne=D*Tt,Oe=(at+tt)*(-Tt+Vt),Ie=(-D+V+X)*(rt+Tt-ie),Ve=(D-X)*(rt-ie),Ye=(V+X)*(-Tt+ie),Se=C*yt,Ae=X*Vt,Ue=O*gt,ze=G*qt,Pe=tt*ie,Xe=it+Ne+Se,Ge=ae+ee+ke+it+Re+Ne+Oe,We=it+Mt+Ft+je+Ne+Ie+Ye,Ke=Te+Ht+ee+it+Ne+Ie+Ve,Ze=Te+ee+ke+it+Ae,He=Ne+Ie+Ve+Ye+Ue,tr=it+Mt+zt+_e+Re+qe+Ne,er=Re+qe+Ne+Oe+ze,rr=it+Mt+zt+Ft+Pe;return q.set(0,0,Xe),q.set(0,1,Ge),q.set(0,2,We),q.set(1,0,Ke),q.set(1,1,Ze),q.set(1,2,He),q.set(2,0,tr),q.set(2,1,er),q.set(2,2,rr),q}mmulStrassen(_){_=ct.checkMatrix(_);let q=this.clone(),E=q.rows,C=q.columns,D=_.rows,O=_.columns;C!==D&&console.warn(`Multiplying ${E} x ${C} and ${D} x ${O} matrix: dimensions do not match.`);function V(tt,mt,qt){let gt=tt.rows,yt=tt.columns;if(gt===mt&&yt===qt)return tt;{let Ut=_t.zeros(mt,qt);return Ut=Ut.setSubMatrix(tt,0,0),Ut}}let X=Math.max(E,D),G=Math.max(C,O);q=V(q,X,G),_=V(_,X,G);function at(tt,mt,qt,gt){if(qt<=512||gt<=512)return tt.mmul(mt);qt%2===1&&gt%2===1?(tt=V(tt,qt+1,gt+1),mt=V(mt,qt+1,gt+1)):qt%2===1?(tt=V(tt,qt+1,gt),mt=V(mt,qt+1,gt)):gt%2===1&&(tt=V(tt,qt,gt+1),mt=V(mt,qt,gt+1));let yt=parseInt(tt.rows/2,10),Ut=parseInt(tt.columns/2,10),rt=tt.subMatrix(0,yt-1,0,Ut-1),Tt=mt.subMatrix(0,yt-1,0,Ut-1),Vt=tt.subMatrix(0,yt-1,Ut,tt.columns-1),ie=mt.subMatrix(0,yt-1,Ut,mt.columns-1),ae=tt.subMatrix(yt,tt.rows-1,0,Ut-1),Te=mt.subMatrix(yt,mt.rows-1,0,Ut-1),Ht=tt.subMatrix(yt,tt.rows-1,Ut,tt.columns-1),ee=mt.subMatrix(yt,mt.rows-1,Ut,mt.columns-1),ke=at(_t.add(rt,Ht),_t.add(Tt,ee),yt,Ut),it=at(_t.add(ae,Ht),Tt,yt,Ut),Mt=at(rt,_t.sub(ie,ee),yt,Ut),zt=at(Ht,_t.sub(Te,Tt),yt,Ut),Ft=at(_t.add(rt,Vt),ee,yt,Ut),je=at(_t.sub(ae,rt),_t.add(Tt,ie),yt,Ut),_e=at(_t.sub(Vt,Ht),_t.add(Te,ee),yt,Ut),Re=_t.add(ke,zt);Re.sub(Ft),Re.add(_e);let qe=_t.add(Mt,Ft),Ne=_t.add(it,zt),Oe=_t.sub(ke,it);Oe.add(Mt),Oe.add(je);let Ie=_t.zeros(2*Re.rows,2*Re.columns);return Ie=Ie.setSubMatrix(Re,0,0),Ie=Ie.setSubMatrix(qe,Re.rows,0),Ie=Ie.setSubMatrix(Ne,0,Re.columns),Ie=Ie.setSubMatrix(Oe,Re.rows,Re.columns),Ie.subMatrix(0,qt-1,0,gt-1)}return at(q,_,X,G)}scaleRows(_={}){if(typeof _!="object")throw new TypeError("options must be an object");const{min:q=0,max:E=1}=_;if(!Number.isFinite(q))throw new TypeError("min must be a number");if(!Number.isFinite(E))throw new TypeError("max must be a number");if(q>=E)throw new RangeError("min must be smaller than max");let C=new ct(this.rows,this.columns);for(let D=0;D<this.rows;D++){const O=this.getRow(D);O.length>0&&B(O,{min:q,max:E,output:O}),C.setRow(D,O)}return C}scaleColumns(_={}){if(typeof _!="object")throw new TypeError("options must be an object");const{min:q=0,max:E=1}=_;if(!Number.isFinite(q))throw new TypeError("min must be a number");if(!Number.isFinite(E))throw new TypeError("max must be a number");if(q>=E)throw new RangeError("min must be smaller than max");let C=new ct(this.rows,this.columns);for(let D=0;D<this.columns;D++){const O=this.getColumn(D);O.length&&B(O,{min:q,max:E,output:O}),C.setColumn(D,O)}return C}flipRows(){const _=Math.ceil(this.columns/2);for(let q=0;q<this.rows;q++)for(let E=0;E<_;E++){let C=this.get(q,E),D=this.get(q,this.columns-1-E);this.set(q,E,D),this.set(q,this.columns-1-E,C)}return this}flipColumns(){const _=Math.ceil(this.rows/2);for(let q=0;q<this.columns;q++)for(let E=0;E<_;E++){let C=this.get(E,q),D=this.get(this.rows-1-E,q);this.set(E,q,D),this.set(this.rows-1-E,q,C)}return this}kroneckerProduct(_){_=ct.checkMatrix(_);let q=this.rows,E=this.columns,C=_.rows,D=_.columns,O=new ct(q*C,E*D);for(let V=0;V<q;V++)for(let X=0;X<E;X++)for(let G=0;G<C;G++)for(let at=0;at<D;at++)O.set(C*V+G,D*X+at,this.get(V,X)*_.get(G,at));return O}kroneckerSum(_){if(_=ct.checkMatrix(_),!this.isSquare()||!_.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let q=this.rows,E=_.rows,C=this.kroneckerProduct(ct.eye(E,E)),D=ct.eye(q,q).kroneckerProduct(_);return C.add(D)}transpose(){let _=new ct(this.columns,this.rows);for(let q=0;q<this.rows;q++)for(let E=0;E<this.columns;E++)_.set(E,q,this.get(q,E));return _}sortRows(_=re){for(let q=0;q<this.rows;q++)this.setRow(q,this.getRow(q).sort(_));return this}sortColumns(_=re){for(let q=0;q<this.columns;q++)this.setColumn(q,this.getColumn(q).sort(_));return this}subMatrix(_,q,E,C){Ct(this,_,q,E,C);let D=new ct(q-_+1,C-E+1);for(let O=_;O<=q;O++)for(let V=E;V<=C;V++)D.set(O-_,V-E,this.get(O,V));return D}subMatrixRow(_,q,E){if(q===void 0&&(q=0),E===void 0&&(E=this.columns-1),q>E||q<0||q>=this.columns||E<0||E>=this.columns)throw new RangeError("Argument out of range");let C=new ct(_.length,E-q+1);for(let D=0;D<_.length;D++)for(let O=q;O<=E;O++){if(_[D]<0||_[D]>=this.rows)throw new RangeError(`Row index out of range: ${_[D]}`);C.set(D,O-q,this.get(_[D],O))}return C}subMatrixColumn(_,q,E){if(q===void 0&&(q=0),E===void 0&&(E=this.rows-1),q>E||q<0||q>=this.rows||E<0||E>=this.rows)throw new RangeError("Argument out of range");let C=new ct(E-q+1,_.length);for(let D=0;D<_.length;D++)for(let O=q;O<=E;O++){if(_[D]<0||_[D]>=this.columns)throw new RangeError(`Column index out of range: ${_[D]}`);C.set(O-q,D,this.get(O,_[D]))}return C}setSubMatrix(_,q,E){if(_=ct.checkMatrix(_),_.isEmpty())return this;let C=q+_.rows-1,D=E+_.columns-1;Ct(this,q,C,E,D);for(let O=0;O<_.rows;O++)for(let V=0;V<_.columns;V++)this.set(q+O,E+V,_.get(O,V));return this}selection(_,q){Et(this,_),Rt(this,q);let E=new ct(_.length,q.length);for(let C=0;C<_.length;C++){let D=_[C];for(let O=0;O<q.length;O++){let V=q[O];E.set(C,O,this.get(D,V))}}return E}trace(){let _=Math.min(this.rows,this.columns),q=0;for(let E=0;E<_;E++)q+=this.get(E,E);return q}clone(){return this.constructor.copy(this,new ct(this.rows,this.columns))}static copy(_,q){for(const[E,C,D]of _.entries())q.set(E,C,D);return q}sum(_){switch(_){case"row":return et(this);case"column":return ft(this);case void 0:return wt(this);default:throw new Error(`invalid option: ${_}`)}}product(_){switch(_){case"row":return bt(this);case"column":return W(this);case void 0:return ot(this);default:throw new Error(`invalid option: ${_}`)}}mean(_){const q=this.sum(_);switch(_){case"row":{for(let E=0;E<this.rows;E++)q[E]/=this.columns;return q}case"column":{for(let E=0;E<this.columns;E++)q[E]/=this.rows;return q}case void 0:return q/this.size;default:throw new Error(`invalid option: ${_}`)}}variance(_,q={}){if(typeof _=="object"&&(q=_,_=void 0),typeof q!="object")throw new TypeError("options must be an object");const{unbiased:E=!0,mean:C=this.mean(_)}=q;if(typeof E!="boolean")throw new TypeError("unbiased must be a boolean");switch(_){case"row":{if(!A.isAnyArray(C))throw new TypeError("mean must be an array");return ut(this,E,C)}case"column":{if(!A.isAnyArray(C))throw new TypeError("mean must be an array");return ht(this,E,C)}case void 0:{if(typeof C!="number")throw new TypeError("mean must be a number");return pt(this,E,C)}default:throw new Error(`invalid option: ${_}`)}}standardDeviation(_,q){typeof _=="object"&&(q=_,_=void 0);const E=this.variance(_,q);if(_===void 0)return Math.sqrt(E);for(let C=0;C<E.length;C++)E[C]=Math.sqrt(E[C]);return E}center(_,q={}){if(typeof _=="object"&&(q=_,_=void 0),typeof q!="object")throw new TypeError("options must be an object");const{center:E=this.mean(_)}=q;switch(_){case"row":{if(!A.isAnyArray(E))throw new TypeError("center must be an array");return At(this,E),this}case"column":{if(!A.isAnyArray(E))throw new TypeError("center must be an array");return Dt(this,E),this}case void 0:{if(typeof E!="number")throw new TypeError("center must be a number");return te(this,E),this}default:throw new Error(`invalid option: ${_}`)}}scale(_,q={}){if(typeof _=="object"&&(q=_,_=void 0),typeof q!="object")throw new TypeError("options must be an object");let E=q.scale;switch(_){case"row":{if(E===void 0)E=$t(this);else if(!A.isAnyArray(E))throw new TypeError("scale must be an array");return Pt(this,E),this}case"column":{if(E===void 0)E=St(this);else if(!A.isAnyArray(E))throw new TypeError("scale must be an array");return Lt(this,E),this}case void 0:{if(E===void 0)E=Bt(this);else if(typeof E!="number")throw new TypeError("scale must be a number");return se(this,E),this}default:throw new Error(`invalid option: ${_}`)}}toString(_){return Q(this,_)}[Symbol.iterator](){return this.entries()}*entries(){for(let _=0;_<this.rows;_++)for(let q=0;q<this.columns;q++)yield[_,q,this.get(_,q)]}*values(){for(let _=0;_<this.rows;_++)for(let q=0;q<this.columns;q++)yield this.get(_,q)}}_t.prototype.klass="Matrix",typeof Symbol<"u"&&(_t.prototype[Symbol.for("nodejs.util.inspect.custom")]=Y);function re(U,_){return U-_}function Ot(U){return U.every(_=>typeof _=="number")}_t.random=_t.rand,_t.randomInt=_t.randInt,_t.diagonal=_t.diag,_t.prototype.diagonal=_t.prototype.diag,_t.identity=_t.eye,_t.prototype.negate=_t.prototype.neg,_t.prototype.tensorProduct=_t.prototype.kroneckerProduct;class ct extends _t{data;#t(_,q){if(this.data=[],Number.isInteger(q)&&q>=0)for(let E=0;E<_;E++)this.data.push(new Float64Array(q));else throw new TypeError("nColumns must be a positive integer");this.rows=_,this.columns=q}constructor(_,q){if(super(),ct.isMatrix(_))this.#t(_.rows,_.columns),ct.copy(_,this);else if(Number.isInteger(_)&&_>=0)this.#t(_,q);else if(A.isAnyArray(_)){const E=_;if(_=E.length,q=_?E[0].length:0,typeof q!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let C=0;C<_;C++){if(E[C].length!==q)throw new RangeError("Inconsistent array dimensions");if(!Ot(E[C]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(E[C]))}this.rows=_,this.columns=q}else throw new TypeError("First argument must be a positive number or an array")}set(_,q,E){return this.data[_][q]=E,this}get(_,q){return this.data[_][q]}removeRow(_){return lt(this,_),this.data.splice(_,1),this.rows-=1,this}addRow(_,q){return q===void 0&&(q=_,_=this.rows),lt(this,_,!0),q=Float64Array.from(dt(this,q)),this.data.splice(_,0,q),this.rows+=1,this}removeColumn(_){vt(this,_);for(let q=0;q<this.rows;q++){const E=new Float64Array(this.columns-1);for(let C=0;C<_;C++)E[C]=this.data[q][C];for(let C=_+1;C<this.columns;C++)E[C-1]=this.data[q][C];this.data[q]=E}return this.columns-=1,this}addColumn(_,q){typeof q>"u"&&(q=_,_=this.columns),vt(this,_,!0),q=kt(this,q);for(let E=0;E<this.rows;E++){const C=new Float64Array(this.columns+1);let D=0;for(;D<_;D++)C[D]=this.data[E][D];for(C[D++]=q[E];D<this.columns+1;D++)C[D]=this.data[E][D-1];this.data[E]=C}return this.columns+=1,this}}st(_t,ct);class Wt extends _t{#t;get size(){return this.#t.size}get rows(){return this.#t.rows}get columns(){return this.#t.columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(_){return ct.isMatrix(_)&&_.klassType==="SymmetricMatrix"}static zeros(_){return new this(_)}static ones(_){return new this(_).fill(1)}constructor(_){if(super(),ct.isMatrix(_)){if(!_.isSymmetric())throw new TypeError("not symmetric data");this.#t=ct.copy(_,new ct(_.rows,_.rows))}else if(Number.isInteger(_)&&_>=0)this.#t=new ct(_,_);else if(this.#t=new ct(_),!this.isSymmetric())throw new TypeError("not symmetric data")}clone(){const _=new Wt(this.diagonalSize);for(const[q,E,C]of this.upperRightEntries())_.set(q,E,C);return _}toMatrix(){return new ct(this)}get(_,q){return this.#t.get(_,q)}set(_,q,E){return this.#t.set(_,q,E),this.#t.set(q,_,E),this}removeCross(_){return this.#t.removeRow(_),this.#t.removeColumn(_),this}addCross(_,q){q===void 0&&(q=_,_=this.diagonalSize);const E=q.slice();return E.splice(_,1),this.#t.addRow(_,E),this.#t.addColumn(_,q),this}applyMask(_){if(_.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const q=[];for(const[E,C]of _.entries())C||q.push(E);q.reverse();for(const E of q)this.removeCross(E);return this}toCompact(){const{diagonalSize:_}=this,q=new Array(_*(_+1)/2);for(let E=0,C=0,D=0;D<q.length;D++)q[D]=this.get(C,E),++E>=_&&(E=++C);return q}static fromCompact(_){const q=_.length,E=(Math.sqrt(8*q+1)-1)/2;if(!Number.isInteger(E))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(_)}`);const C=new Wt(E);for(let D=0,O=0,V=0;V<q;V++)C.set(D,O,_[V]),++D>=E&&(D=++O);return C}*upperRightEntries(){for(let _=0,q=0;_<this.diagonalSize;void 0){const E=this.get(_,q);yield[_,q,E],++q>=this.diagonalSize&&(q=++_)}}*upperRightValues(){for(let _=0,q=0;_<this.diagonalSize;void 0)yield this.get(_,q),++q>=this.diagonalSize&&(q=++_)}}Wt.prototype.klassType="SymmetricMatrix";class xe extends Wt{static isDistanceMatrix(_){return Wt.isSymmetricMatrix(_)&&_.klassSubType==="DistanceMatrix"}constructor(_){if(super(_),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(_,q,E){return _===q&&(E=0),super.set(_,q,E)}addCross(_,q){return q===void 0&&(q=_,_=this.diagonalSize),q=q.slice(),q[_]=0,super.addCross(_,q)}toSymmetricMatrix(){return new Wt(this)}clone(){const _=new xe(this.diagonalSize);for(const[q,E,C]of this.upperRightEntries())q!==E&&_.set(q,E,C);return _}toCompact(){const{diagonalSize:_}=this,q=(_-1)*_/2,E=new Array(q);for(let C=1,D=0,O=0;O<E.length;O++)E[O]=this.get(D,C),++C>=_&&(C=++D+1);return E}static fromCompact(_){const q=_.length;if(q===0)return new this(0);const E=(Math.sqrt(8*q+1)+1)/2;if(!Number.isInteger(E))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(_)}`);const C=new this(E);for(let D=1,O=0,V=0;V<q;V++)C.set(D,O,_[V]),++D>=E&&(D=++O+1);return C}}xe.prototype.klassSubType="DistanceMatrix";class fe extends _t{constructor(_,q,E){super(),this.matrix=_,this.rows=q,this.columns=E}}class ge extends fe{constructor(_,q){vt(_,q),super(_,_.rows,1),this.column=q}set(_,q,E){return this.matrix.set(_,this.column,E),this}get(_){return this.matrix.get(_,this.column)}}class ye extends fe{constructor(_,q){Rt(_,q),super(_,_.rows,q.length),this.columnIndices=q}set(_,q,E){return this.matrix.set(_,this.columnIndices[q],E),this}get(_,q){return this.matrix.get(_,this.columnIndices[q])}}class pe extends fe{constructor(_){super(_,_.rows,_.columns)}set(_,q,E){return this.matrix.set(_,this.columns-q-1,E),this}get(_,q){return this.matrix.get(_,this.columns-q-1)}}class Ee extends fe{constructor(_){super(_,_.rows,_.columns)}set(_,q,E){return this.matrix.set(this.rows-_-1,q,E),this}get(_,q){return this.matrix.get(this.rows-_-1,q)}}class we extends fe{constructor(_,q){lt(_,q),super(_,1,_.columns),this.row=q}set(_,q,E){return this.matrix.set(this.row,q,E),this}get(_,q){return this.matrix.get(this.row,q)}}class Yt extends fe{constructor(_,q){Et(_,q),super(_,q.length,_.columns),this.rowIndices=q}set(_,q,E){return this.matrix.set(this.rowIndices[_],q,E),this}get(_,q){return this.matrix.get(this.rowIndices[_],q)}}class jt extends fe{constructor(_,q,E){Et(_,q),Rt(_,E),super(_,q.length,E.length),this.rowIndices=q,this.columnIndices=E}set(_,q,E){return this.matrix.set(this.rowIndices[_],this.columnIndices[q],E),this}get(_,q){return this.matrix.get(this.rowIndices[_],this.columnIndices[q])}}class ve extends fe{constructor(_,q,E,C,D){Ct(_,q,E,C,D),super(_,E-q+1,D-C+1),this.startRow=q,this.startColumn=C}set(_,q,E){return this.matrix.set(this.startRow+_,this.startColumn+q,E),this}get(_,q){return this.matrix.get(this.startRow+_,this.startColumn+q)}}class oe extends fe{constructor(_){super(_,_.columns,_.rows)}set(_,q,E){return this.matrix.set(q,_,E),this}get(_,q){return this.matrix.get(q,_)}}class ue extends _t{constructor(_,q={}){const{rows:E=1}=q;if(_.length%E!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=E,this.columns=_.length/E,this.data=_}set(_,q,E){let C=this._calculateIndex(_,q);return this.data[C]=E,this}get(_,q){let E=this._calculateIndex(_,q);return this.data[E]}_calculateIndex(_,q){return _*this.columns+q}}class xt extends _t{constructor(_){super(),this.data=_,this.rows=_.length,this.columns=_[0].length}set(_,q,E){return this.data[_][q]=E,this}get(_,q){return this.data[_][q]}}function Kt(U,_){if(A.isAnyArray(U))return U[0]&&A.isAnyArray(U[0])?new xt(U):new ue(U,_);throw new Error("the argument is not an array")}class Gt{constructor(_){_=xt.checkMatrix(_);let q=_.clone(),E=q.rows,C=q.columns,D=new Float64Array(E),O=1,V,X,G,at,tt,mt,qt,gt,yt;for(V=0;V<E;V++)D[V]=V;for(gt=new Float64Array(E),X=0;X<C;X++){for(V=0;V<E;V++)gt[V]=q.get(V,X);for(V=0;V<E;V++){for(yt=Math.min(V,X),tt=0,G=0;G<yt;G++)tt+=q.get(V,G)*gt[G];gt[V]-=tt,q.set(V,X,gt[V])}for(at=X,V=X+1;V<E;V++)Math.abs(gt[V])>Math.abs(gt[at])&&(at=V);if(at!==X){for(G=0;G<C;G++)mt=q.get(at,G),q.set(at,G,q.get(X,G)),q.set(X,G,mt);qt=D[at],D[at]=D[X],D[X]=qt,O=-O}if(X<E&&q.get(X,X)!==0)for(V=X+1;V<E;V++)q.set(V,X,q.get(V,X)/q.get(X,X))}this.LU=q,this.pivotVector=D,this.pivotSign=O}isSingular(){let _=this.LU,q=_.columns;for(let E=0;E<q;E++)if(_.get(E,E)===0)return!0;return!1}solve(_){_=ct.checkMatrix(_);let q=this.LU;if(q.rows!==_.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let C=_.columns,D=_.subMatrixRow(this.pivotVector,0,C-1),O=q.columns,V,X,G;for(G=0;G<O;G++)for(V=G+1;V<O;V++)for(X=0;X<C;X++)D.set(V,X,D.get(V,X)-D.get(G,X)*q.get(V,G));for(G=O-1;G>=0;G--){for(X=0;X<C;X++)D.set(G,X,D.get(G,X)/q.get(G,G));for(V=0;V<G;V++)for(X=0;X<C;X++)D.set(V,X,D.get(V,X)-D.get(G,X)*q.get(V,G))}return D}get determinant(){let _=this.LU;if(!_.isSquare())throw new Error("Matrix must be square");let q=this.pivotSign,E=_.columns;for(let C=0;C<E;C++)q*=_.get(C,C);return q}get lowerTriangularMatrix(){let _=this.LU,q=_.rows,E=_.columns,C=new ct(q,E);for(let D=0;D<q;D++)for(let O=0;O<E;O++)D>O?C.set(D,O,_.get(D,O)):D===O?C.set(D,O,1):C.set(D,O,0);return C}get upperTriangularMatrix(){let _=this.LU,q=_.rows,E=_.columns,C=new ct(q,E);for(let D=0;D<q;D++)for(let O=0;O<E;O++)D<=O?C.set(D,O,_.get(D,O)):C.set(D,O,0);return C}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function Zt(U,_){let q=0;return Math.abs(U)>Math.abs(_)?(q=_/U,Math.abs(U)*Math.sqrt(1+q*q)):_!==0?(q=U/_,Math.abs(_)*Math.sqrt(1+q*q)):0}class he{constructor(_){_=xt.checkMatrix(_);let q=_.clone(),E=_.rows,C=_.columns,D=new Float64Array(C),O,V,X,G;for(X=0;X<C;X++){let at=0;for(O=X;O<E;O++)at=Zt(at,q.get(O,X));if(at!==0){for(q.get(X,X)<0&&(at=-at),O=X;O<E;O++)q.set(O,X,q.get(O,X)/at);for(q.set(X,X,q.get(X,X)+1),V=X+1;V<C;V++){for(G=0,O=X;O<E;O++)G+=q.get(O,X)*q.get(O,V);for(G=-G/q.get(X,X),O=X;O<E;O++)q.set(O,V,q.get(O,V)+G*q.get(O,X))}}D[X]=-at}this.QR=q,this.Rdiag=D}solve(_){_=ct.checkMatrix(_);let q=this.QR,E=q.rows;if(_.rows!==E)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let C=_.columns,D=_.clone(),O=q.columns,V,X,G,at;for(G=0;G<O;G++)for(X=0;X<C;X++){for(at=0,V=G;V<E;V++)at+=q.get(V,G)*D.get(V,X);for(at=-at/q.get(G,G),V=G;V<E;V++)D.set(V,X,D.get(V,X)+at*q.get(V,G))}for(G=O-1;G>=0;G--){for(X=0;X<C;X++)D.set(G,X,D.get(G,X)/this.Rdiag[G]);for(V=0;V<G;V++)for(X=0;X<C;X++)D.set(V,X,D.get(V,X)-D.get(G,X)*q.get(V,G))}return D.subMatrix(0,O-1,0,C-1)}isFullRank(){let _=this.QR.columns;for(let q=0;q<_;q++)if(this.Rdiag[q]===0)return!1;return!0}get upperTriangularMatrix(){let _=this.QR,q=_.columns,E=new ct(q,q),C,D;for(C=0;C<q;C++)for(D=0;D<q;D++)C<D?E.set(C,D,_.get(C,D)):C===D?E.set(C,D,this.Rdiag[C]):E.set(C,D,0);return E}get orthogonalMatrix(){let _=this.QR,q=_.rows,E=_.columns,C=new ct(q,E),D,O,V,X;for(V=E-1;V>=0;V--){for(D=0;D<q;D++)C.set(D,V,0);for(C.set(V,V,1),O=V;O<E;O++)if(_.get(V,V)!==0){for(X=0,D=V;D<q;D++)X+=_.get(D,V)*C.get(D,O);for(X=-X/_.get(V,V),D=V;D<q;D++)C.set(D,O,C.get(D,O)+X*_.get(D,V))}}return C}}class me{constructor(_,q={}){if(_=xt.checkMatrix(_),_.isEmpty())throw new Error("Matrix must be non-empty");let E=_.rows,C=_.columns;const{computeLeftSingularVectors:D=!0,computeRightSingularVectors:O=!0,autoTranspose:V=!1}=q;let X=!!D,G=!!O,at=!1,tt;if(E<C)if(!V)tt=_.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{tt=_.transpose(),E=tt.rows,C=tt.columns,at=!0;let it=X;X=G,G=it}else tt=_.clone();let mt=Math.min(E,C),qt=Math.min(E+1,C),gt=new Float64Array(qt),yt=new ct(E,mt),Ut=new ct(C,C),rt=new Float64Array(C),Tt=new Float64Array(E),Vt=new Float64Array(qt);for(let it=0;it<qt;it++)Vt[it]=it;let ie=Math.min(E-1,C),ae=Math.max(0,Math.min(C-2,E)),Te=Math.max(ie,ae);for(let it=0;it<Te;it++){if(it<ie){gt[it]=0;for(let Mt=it;Mt<E;Mt++)gt[it]=Zt(gt[it],tt.get(Mt,it));if(gt[it]!==0){tt.get(it,it)<0&&(gt[it]=-gt[it]);for(let Mt=it;Mt<E;Mt++)tt.set(Mt,it,tt.get(Mt,it)/gt[it]);tt.set(it,it,tt.get(it,it)+1)}gt[it]=-gt[it]}for(let Mt=it+1;Mt<C;Mt++){if(it<ie&&gt[it]!==0){let zt=0;for(let Ft=it;Ft<E;Ft++)zt+=tt.get(Ft,it)*tt.get(Ft,Mt);zt=-zt/tt.get(it,it);for(let Ft=it;Ft<E;Ft++)tt.set(Ft,Mt,tt.get(Ft,Mt)+zt*tt.get(Ft,it))}rt[Mt]=tt.get(it,Mt)}if(X&&it<ie)for(let Mt=it;Mt<E;Mt++)yt.set(Mt,it,tt.get(Mt,it));if(it<ae){rt[it]=0;for(let Mt=it+1;Mt<C;Mt++)rt[it]=Zt(rt[it],rt[Mt]);if(rt[it]!==0){rt[it+1]<0&&(rt[it]=0-rt[it]);for(let Mt=it+1;Mt<C;Mt++)rt[Mt]/=rt[it];rt[it+1]+=1}if(rt[it]=-rt[it],it+1<E&&rt[it]!==0){for(let Mt=it+1;Mt<E;Mt++)Tt[Mt]=0;for(let Mt=it+1;Mt<E;Mt++)for(let zt=it+1;zt<C;zt++)Tt[Mt]+=rt[zt]*tt.get(Mt,zt);for(let Mt=it+1;Mt<C;Mt++){let zt=-rt[Mt]/rt[it+1];for(let Ft=it+1;Ft<E;Ft++)tt.set(Ft,Mt,tt.get(Ft,Mt)+zt*Tt[Ft])}}if(G)for(let Mt=it+1;Mt<C;Mt++)Ut.set(Mt,it,rt[Mt])}}let Ht=Math.min(C,E+1);if(ie<C&&(gt[ie]=tt.get(ie,ie)),E<Ht&&(gt[Ht-1]=0),ae+1<Ht&&(rt[ae]=tt.get(ae,Ht-1)),rt[Ht-1]=0,X){for(let it=ie;it<mt;it++){for(let Mt=0;Mt<E;Mt++)yt.set(Mt,it,0);yt.set(it,it,1)}for(let it=ie-1;it>=0;it--)if(gt[it]!==0){for(let Mt=it+1;Mt<mt;Mt++){let zt=0;for(let Ft=it;Ft<E;Ft++)zt+=yt.get(Ft,it)*yt.get(Ft,Mt);zt=-zt/yt.get(it,it);for(let Ft=it;Ft<E;Ft++)yt.set(Ft,Mt,yt.get(Ft,Mt)+zt*yt.get(Ft,it))}for(let Mt=it;Mt<E;Mt++)yt.set(Mt,it,-yt.get(Mt,it));yt.set(it,it,1+yt.get(it,it));for(let Mt=0;Mt<it-1;Mt++)yt.set(Mt,it,0)}else{for(let Mt=0;Mt<E;Mt++)yt.set(Mt,it,0);yt.set(it,it,1)}}if(G)for(let it=C-1;it>=0;it--){if(it<ae&&rt[it]!==0)for(let Mt=it+1;Mt<C;Mt++){let zt=0;for(let Ft=it+1;Ft<C;Ft++)zt+=Ut.get(Ft,it)*Ut.get(Ft,Mt);zt=-zt/Ut.get(it+1,it);for(let Ft=it+1;Ft<C;Ft++)Ut.set(Ft,Mt,Ut.get(Ft,Mt)+zt*Ut.get(Ft,it))}for(let Mt=0;Mt<C;Mt++)Ut.set(Mt,it,0);Ut.set(it,it,1)}let ee=Ht-1,ke=Number.EPSILON;for(;Ht>0;){let it,Mt;for(it=Ht-2;it>=-1&&it!==-1;it--){const zt=Number.MIN_VALUE+ke*Math.abs(gt[it]+Math.abs(gt[it+1]));if(Math.abs(rt[it])<=zt||Number.isNaN(rt[it])){rt[it]=0;break}}if(it===Ht-2)Mt=4;else{let zt;for(zt=Ht-1;zt>=it&&zt!==it;zt--){let Ft=(zt!==Ht?Math.abs(rt[zt]):0)+(zt!==it+1?Math.abs(rt[zt-1]):0);if(Math.abs(gt[zt])<=ke*Ft){gt[zt]=0;break}}zt===it?Mt=3:zt===Ht-1?Mt=1:(Mt=2,it=zt)}switch(it++,Mt){case 1:{let zt=rt[Ht-2];rt[Ht-2]=0;for(let Ft=Ht-2;Ft>=it;Ft--){let je=Zt(gt[Ft],zt),_e=gt[Ft]/je,Re=zt/je;if(gt[Ft]=je,Ft!==it&&(zt=-Re*rt[Ft-1],rt[Ft-1]=_e*rt[Ft-1]),G)for(let qe=0;qe<C;qe++)je=_e*Ut.get(qe,Ft)+Re*Ut.get(qe,Ht-1),Ut.set(qe,Ht-1,-Re*Ut.get(qe,Ft)+_e*Ut.get(qe,Ht-1)),Ut.set(qe,Ft,je)}break}case 2:{let zt=rt[it-1];rt[it-1]=0;for(let Ft=it;Ft<Ht;Ft++){let je=Zt(gt[Ft],zt),_e=gt[Ft]/je,Re=zt/je;if(gt[Ft]=je,zt=-Re*rt[Ft],rt[Ft]=_e*rt[Ft],X)for(let qe=0;qe<E;qe++)je=_e*yt.get(qe,Ft)+Re*yt.get(qe,it-1),yt.set(qe,it-1,-Re*yt.get(qe,Ft)+_e*yt.get(qe,it-1)),yt.set(qe,Ft,je)}break}case 3:{const zt=Math.max(Math.abs(gt[Ht-1]),Math.abs(gt[Ht-2]),Math.abs(rt[Ht-2]),Math.abs(gt[it]),Math.abs(rt[it])),Ft=gt[Ht-1]/zt,je=gt[Ht-2]/zt,_e=rt[Ht-2]/zt,Re=gt[it]/zt,qe=rt[it]/zt,Ne=((je+Ft)*(je-Ft)+_e*_e)/2,Oe=Ft*_e*(Ft*_e);let Ie=0;(Ne!==0||Oe!==0)&&(Ne<0?Ie=0-Math.sqrt(Ne*Ne+Oe):Ie=Math.sqrt(Ne*Ne+Oe),Ie=Oe/(Ne+Ie));let Ve=(Re+Ft)*(Re-Ft)+Ie,Ye=Re*qe;for(let Se=it;Se<Ht-1;Se++){let Ae=Zt(Ve,Ye);Ae===0&&(Ae=Number.MIN_VALUE);let Ue=Ve/Ae,ze=Ye/Ae;if(Se!==it&&(rt[Se-1]=Ae),Ve=Ue*gt[Se]+ze*rt[Se],rt[Se]=Ue*rt[Se]-ze*gt[Se],Ye=ze*gt[Se+1],gt[Se+1]=Ue*gt[Se+1],G)for(let Pe=0;Pe<C;Pe++)Ae=Ue*Ut.get(Pe,Se)+ze*Ut.get(Pe,Se+1),Ut.set(Pe,Se+1,-ze*Ut.get(Pe,Se)+Ue*Ut.get(Pe,Se+1)),Ut.set(Pe,Se,Ae);if(Ae=Zt(Ve,Ye),Ae===0&&(Ae=Number.MIN_VALUE),Ue=Ve/Ae,ze=Ye/Ae,gt[Se]=Ae,Ve=Ue*rt[Se]+ze*gt[Se+1],gt[Se+1]=-ze*rt[Se]+Ue*gt[Se+1],Ye=ze*rt[Se+1],rt[Se+1]=Ue*rt[Se+1],X&&Se<E-1)for(let Pe=0;Pe<E;Pe++)Ae=Ue*yt.get(Pe,Se)+ze*yt.get(Pe,Se+1),yt.set(Pe,Se+1,-ze*yt.get(Pe,Se)+Ue*yt.get(Pe,Se+1)),yt.set(Pe,Se,Ae)}rt[Ht-2]=Ve;break}case 4:{if(gt[it]<=0&&(gt[it]=gt[it]<0?-gt[it]:0,G))for(let zt=0;zt<=ee;zt++)Ut.set(zt,it,-Ut.get(zt,it));for(;it<ee&&!(gt[it]>=gt[it+1]);){let zt=gt[it];if(gt[it]=gt[it+1],gt[it+1]=zt,G&&it<C-1)for(let Ft=0;Ft<C;Ft++)zt=Ut.get(Ft,it+1),Ut.set(Ft,it+1,Ut.get(Ft,it)),Ut.set(Ft,it,zt);if(X&&it<E-1)for(let Ft=0;Ft<E;Ft++)zt=yt.get(Ft,it+1),yt.set(Ft,it+1,yt.get(Ft,it)),yt.set(Ft,it,zt);it++}Ht--;break}}}if(at){let it=Ut;Ut=yt,yt=it}this.m=E,this.n=C,this.s=gt,this.U=yt,this.V=Ut}solve(_){let q=_,E=this.threshold,C=this.s.length,D=ct.zeros(C,C);for(let mt=0;mt<C;mt++)Math.abs(this.s[mt])<=E?D.set(mt,mt,0):D.set(mt,mt,1/this.s[mt]);let O=this.U,V=this.rightSingularVectors,X=V.mmul(D),G=V.rows,at=O.rows,tt=ct.zeros(G,at);for(let mt=0;mt<G;mt++)for(let qt=0;qt<at;qt++){let gt=0;for(let yt=0;yt<C;yt++)gt+=X.get(mt,yt)*O.get(qt,yt);tt.set(mt,qt,gt)}return tt.mmul(q)}solveForDiagonal(_){return this.solve(ct.diag(_))}inverse(){let _=this.V,q=this.threshold,E=_.rows,C=_.columns,D=new ct(E,this.s.length);for(let at=0;at<E;at++)for(let tt=0;tt<C;tt++)Math.abs(this.s[tt])>q&&D.set(at,tt,_.get(at,tt)/this.s[tt]);let O=this.U,V=O.rows,X=O.columns,G=new ct(E,V);for(let at=0;at<E;at++)for(let tt=0;tt<V;tt++){let mt=0;for(let qt=0;qt<X;qt++)mt+=D.get(at,qt)*O.get(tt,qt);G.set(at,tt,mt)}return G}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let _=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,q=0,E=this.s;for(let C=0,D=E.length;C<D;C++)E[C]>_&&q++;return q}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return ct.diag(this.s)}}function be(U,_=!1){return U=xt.checkMatrix(U),_?new me(U).inverse():Qt(U,ct.eye(U.rows))}function Qt(U,_,q=!1){return U=xt.checkMatrix(U),_=xt.checkMatrix(_),q?new me(U).solve(_):U.isSquare()?new Gt(U).solve(_):new he(U).solve(_)}function Xt(U){if(U=ct.checkMatrix(U),U.isSquare()){if(U.columns===0)return 1;let _,q,E,C;if(U.columns===2)return _=U.get(0,0),q=U.get(0,1),E=U.get(1,0),C=U.get(1,1),_*C-q*E;if(U.columns===3){let D,O,V;return D=new jt(U,[1,2],[1,2]),O=new jt(U,[1,2],[0,2]),V=new jt(U,[1,2],[0,1]),_=U.get(0,0),q=U.get(0,1),E=U.get(0,2),_*Xt(D)-q*Xt(O)+E*Xt(V)}else return new Gt(U).determinant}else throw Error("determinant can only be calculated for a square matrix")}function ne(U,_){let q=[];for(let E=0;E<U;E++)E!==_&&q.push(E);return q}function Jt(U,_,q,E=1e-9,C=1e-9){if(U>C)return new Array(_.rows+1).fill(0);{let D=_.addRow(q,[0]);for(let O=0;O<D.rows;O++)Math.abs(D.get(O,0))<E&&D.set(O,0,0);return D.to1DArray()}}function ce(U,_={}){const{thresholdValue:q=1e-9,thresholdError:E=1e-9}=_;U=ct.checkMatrix(U);let C=U.rows,D=new ct(C,C);for(let O=0;O<C;O++){let V=ct.columnVector(U.getRow(O)),X=U.subMatrixRow(ne(C,O)).transpose(),at=new me(X).solve(V),tt=ct.sub(V,X.mmul(at)).abs().max();D.setRow(O,Jt(tt,at,O,q,E))}return D}function Me(U,_=Number.EPSILON){if(U=ct.checkMatrix(U),U.isEmpty())return U.transpose();let q=new me(U,{autoTranspose:!0}),E=q.leftSingularVectors,C=q.rightSingularVectors,D=q.diagonal;for(let O=0;O<D.length;O++)Math.abs(D[O])>_?D[O]=1/D[O]:D[O]=0;return C.mmul(ct.diag(D).mmul(E.transpose()))}function le(U,_=U,q={}){U=new ct(U);let E=!1;if(typeof _=="object"&&!ct.isMatrix(_)&&!A.isAnyArray(_)?(q=_,_=U,E=!0):_=new ct(_),U.rows!==_.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:C=!0}=q;C&&(U=U.center("column"),E||(_=_.center("column")));const D=U.transpose().mmul(_);for(let O=0;O<D.rows;O++)for(let V=0;V<D.columns;V++)D.set(O,V,D.get(O,V)*(1/(U.rows-1)));return D}function $e(U,_=U,q={}){U=new ct(U);let E=!1;if(typeof _=="object"&&!ct.isMatrix(_)&&!A.isAnyArray(_)?(q=_,_=U,E=!0):_=new ct(_),U.rows!==_.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:C=!0,scale:D=!0}=q;C&&(U.center("column"),E||_.center("column")),D&&(U.scale("column"),E||_.scale("column"));const O=U.standardDeviation("column",{unbiased:!0}),V=E?O:_.standardDeviation("column",{unbiased:!0}),X=U.transpose().mmul(_);for(let G=0;G<X.rows;G++)for(let at=0;at<X.columns;at++)X.set(G,at,X.get(G,at)*(1/(O[G]*V[at]))*(1/(U.rows-1)));return X}class de{constructor(_,q={}){const{assumeSymmetric:E=!1}=q;if(_=xt.checkMatrix(_),!_.isSquare())throw new Error("Matrix is not a square matrix");if(_.isEmpty())throw new Error("Matrix must be non-empty");let C=_.columns,D=new ct(C,C),O=new Float64Array(C),V=new Float64Array(C),X=_,G,at,tt=!1;if(E?tt=!0:tt=_.isSymmetric(),tt){for(G=0;G<C;G++)for(at=0;at<C;at++)D.set(G,at,X.get(G,at));Fe(C,V,O,D),De(C,V,O,D)}else{let mt=new ct(C,C),qt=new Float64Array(C);for(at=0;at<C;at++)for(G=0;G<C;G++)mt.set(G,at,X.get(G,at));Ce(C,mt,qt,D),Be(C,V,O,D,mt)}this.n=C,this.e=V,this.d=O,this.V=D}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let _=this.n,q=this.e,E=this.d,C=new ct(_,_),D,O;for(D=0;D<_;D++){for(O=0;O<_;O++)C.set(D,O,0);C.set(D,D,E[D]),q[D]>0?C.set(D,D+1,q[D]):q[D]<0&&C.set(D,D-1,q[D])}return C}}function Fe(U,_,q,E){let C,D,O,V,X,G,at,tt;for(X=0;X<U;X++)q[X]=E.get(U-1,X);for(V=U-1;V>0;V--){for(tt=0,O=0,G=0;G<V;G++)tt=tt+Math.abs(q[G]);if(tt===0)for(_[V]=q[V-1],X=0;X<V;X++)q[X]=E.get(V-1,X),E.set(V,X,0),E.set(X,V,0);else{for(G=0;G<V;G++)q[G]/=tt,O+=q[G]*q[G];for(C=q[V-1],D=Math.sqrt(O),C>0&&(D=-D),_[V]=tt*D,O=O-C*D,q[V-1]=C-D,X=0;X<V;X++)_[X]=0;for(X=0;X<V;X++){for(C=q[X],E.set(X,V,C),D=_[X]+E.get(X,X)*C,G=X+1;G<=V-1;G++)D+=E.get(G,X)*q[G],_[G]+=E.get(G,X)*C;_[X]=D}for(C=0,X=0;X<V;X++)_[X]/=O,C+=_[X]*q[X];for(at=C/(O+O),X=0;X<V;X++)_[X]-=at*q[X];for(X=0;X<V;X++){for(C=q[X],D=_[X],G=X;G<=V-1;G++)E.set(G,X,E.get(G,X)-(C*_[G]+D*q[G]));q[X]=E.get(V-1,X),E.set(V,X,0)}}q[V]=O}for(V=0;V<U-1;V++){if(E.set(U-1,V,E.get(V,V)),E.set(V,V,1),O=q[V+1],O!==0){for(G=0;G<=V;G++)q[G]=E.get(G,V+1)/O;for(X=0;X<=V;X++){for(D=0,G=0;G<=V;G++)D+=E.get(G,V+1)*E.get(G,X);for(G=0;G<=V;G++)E.set(G,X,E.get(G,X)-D*q[G])}}for(G=0;G<=V;G++)E.set(G,V+1,0)}for(X=0;X<U;X++)q[X]=E.get(U-1,X),E.set(U-1,X,0);E.set(U-1,U-1,1),_[0]=0}function De(U,_,q,E){let C,D,O,V,X,G,at,tt,mt,qt,gt,yt,Ut,rt,Tt,Vt;for(O=1;O<U;O++)_[O-1]=_[O];_[U-1]=0;let ie=0,ae=0,Te=Number.EPSILON;for(G=0;G<U;G++){for(ae=Math.max(ae,Math.abs(q[G])+Math.abs(_[G])),at=G;at<U&&!(Math.abs(_[at])<=Te*ae);)at++;if(at>G)do{for(C=q[G],tt=(q[G+1]-C)/(2*_[G]),mt=Zt(tt,1),tt<0&&(mt=-mt),q[G]=_[G]/(tt+mt),q[G+1]=_[G]*(tt+mt),qt=q[G+1],D=C-q[G],O=G+2;O<U;O++)q[O]-=D;for(ie=ie+D,tt=q[at],gt=1,yt=gt,Ut=gt,rt=_[G+1],Tt=0,Vt=0,O=at-1;O>=G;O--)for(Ut=yt,yt=gt,Vt=Tt,C=gt*_[O],D=gt*tt,mt=Zt(tt,_[O]),_[O+1]=Tt*mt,Tt=_[O]/mt,gt=tt/mt,tt=gt*q[O]-Tt*C,q[O+1]=D+Tt*(gt*C+Tt*q[O]),X=0;X<U;X++)D=E.get(X,O+1),E.set(X,O+1,Tt*E.get(X,O)+gt*D),E.set(X,O,gt*E.get(X,O)-Tt*D);tt=-Tt*Vt*Ut*rt*_[G]/qt,_[G]=Tt*tt,q[G]=gt*tt}while(Math.abs(_[G])>Te*ae);q[G]=q[G]+ie,_[G]=0}for(O=0;O<U-1;O++){for(X=O,tt=q[O],V=O+1;V<U;V++)q[V]<tt&&(X=V,tt=q[V]);if(X!==O)for(q[X]=q[O],q[O]=tt,V=0;V<U;V++)tt=E.get(V,O),E.set(V,O,E.get(V,X)),E.set(V,X,tt)}}function Ce(U,_,q,E){let C=0,D=U-1,O,V,X,G,at,tt,mt;for(tt=C+1;tt<=D-1;tt++){for(mt=0,G=tt;G<=D;G++)mt=mt+Math.abs(_.get(G,tt-1));if(mt!==0){for(X=0,G=D;G>=tt;G--)q[G]=_.get(G,tt-1)/mt,X+=q[G]*q[G];for(V=Math.sqrt(X),q[tt]>0&&(V=-V),X=X-q[tt]*V,q[tt]=q[tt]-V,at=tt;at<U;at++){for(O=0,G=D;G>=tt;G--)O+=q[G]*_.get(G,at);for(O=O/X,G=tt;G<=D;G++)_.set(G,at,_.get(G,at)-O*q[G])}for(G=0;G<=D;G++){for(O=0,at=D;at>=tt;at--)O+=q[at]*_.get(G,at);for(O=O/X,at=tt;at<=D;at++)_.set(G,at,_.get(G,at)-O*q[at])}q[tt]=mt*q[tt],_.set(tt,tt-1,mt*V)}}for(G=0;G<U;G++)for(at=0;at<U;at++)E.set(G,at,G===at?1:0);for(tt=D-1;tt>=C+1;tt--)if(_.get(tt,tt-1)!==0){for(G=tt+1;G<=D;G++)q[G]=_.get(G,tt-1);for(at=tt;at<=D;at++){for(V=0,G=tt;G<=D;G++)V+=q[G]*E.get(G,at);for(V=V/q[tt]/_.get(tt,tt-1),G=tt;G<=D;G++)E.set(G,at,E.get(G,at)+V*q[G])}}}function Be(U,_,q,E,C){let D=U-1,O=0,V=U-1,X=Number.EPSILON,G=0,at=0,tt=0,mt=0,qt=0,gt=0,yt=0,Ut=0,rt,Tt,Vt,ie,ae,Te,Ht,ee,ke,it,Mt,zt,Ft,je,_e;for(rt=0;rt<U;rt++)for((rt<O||rt>V)&&(q[rt]=C.get(rt,rt),_[rt]=0),Tt=Math.max(rt-1,0);Tt<U;Tt++)at=at+Math.abs(C.get(rt,Tt));for(;D>=O;){for(ie=D;ie>O&&(gt=Math.abs(C.get(ie-1,ie-1))+Math.abs(C.get(ie,ie)),gt===0&&(gt=at),!(Math.abs(C.get(ie,ie-1))<X*gt));)ie--;if(ie===D)C.set(D,D,C.get(D,D)+G),q[D]=C.get(D,D),_[D]=0,D--,Ut=0;else if(ie===D-1){if(Ht=C.get(D,D-1)*C.get(D-1,D),tt=(C.get(D-1,D-1)-C.get(D,D))/2,mt=tt*tt+Ht,yt=Math.sqrt(Math.abs(mt)),C.set(D,D,C.get(D,D)+G),C.set(D-1,D-1,C.get(D-1,D-1)+G),ee=C.get(D,D),mt>=0){for(yt=tt>=0?tt+yt:tt-yt,q[D-1]=ee+yt,q[D]=q[D-1],yt!==0&&(q[D]=ee-Ht/yt),_[D-1]=0,_[D]=0,ee=C.get(D,D-1),gt=Math.abs(ee)+Math.abs(yt),tt=ee/gt,mt=yt/gt,qt=Math.sqrt(tt*tt+mt*mt),tt=tt/qt,mt=mt/qt,Tt=D-1;Tt<U;Tt++)yt=C.get(D-1,Tt),C.set(D-1,Tt,mt*yt+tt*C.get(D,Tt)),C.set(D,Tt,mt*C.get(D,Tt)-tt*yt);for(rt=0;rt<=D;rt++)yt=C.get(rt,D-1),C.set(rt,D-1,mt*yt+tt*C.get(rt,D)),C.set(rt,D,mt*C.get(rt,D)-tt*yt);for(rt=O;rt<=V;rt++)yt=E.get(rt,D-1),E.set(rt,D-1,mt*yt+tt*E.get(rt,D)),E.set(rt,D,mt*E.get(rt,D)-tt*yt)}else q[D-1]=ee+tt,q[D]=ee+tt,_[D-1]=yt,_[D]=-yt;D=D-2,Ut=0}else{if(ee=C.get(D,D),ke=0,Ht=0,ie<D&&(ke=C.get(D-1,D-1),Ht=C.get(D,D-1)*C.get(D-1,D)),Ut===10){for(G+=ee,rt=O;rt<=D;rt++)C.set(rt,rt,C.get(rt,rt)-ee);gt=Math.abs(C.get(D,D-1))+Math.abs(C.get(D-1,D-2)),ee=ke=.75*gt,Ht=-.4375*gt*gt}if(Ut===30&&(gt=(ke-ee)/2,gt=gt*gt+Ht,gt>0)){for(gt=Math.sqrt(gt),ke<ee&&(gt=-gt),gt=ee-Ht/((ke-ee)/2+gt),rt=O;rt<=D;rt++)C.set(rt,rt,C.get(rt,rt)-gt);G+=gt,ee=ke=Ht=.964}for(Ut=Ut+1,ae=D-2;ae>=ie&&(yt=C.get(ae,ae),qt=ee-yt,gt=ke-yt,tt=(qt*gt-Ht)/C.get(ae+1,ae)+C.get(ae,ae+1),mt=C.get(ae+1,ae+1)-yt-qt-gt,qt=C.get(ae+2,ae+1),gt=Math.abs(tt)+Math.abs(mt)+Math.abs(qt),tt=tt/gt,mt=mt/gt,qt=qt/gt,!(ae===ie||Math.abs(C.get(ae,ae-1))*(Math.abs(mt)+Math.abs(qt))<X*(Math.abs(tt)*(Math.abs(C.get(ae-1,ae-1))+Math.abs(yt)+Math.abs(C.get(ae+1,ae+1))))));)ae--;for(rt=ae+2;rt<=D;rt++)C.set(rt,rt-2,0),rt>ae+2&&C.set(rt,rt-3,0);for(Vt=ae;Vt<=D-1&&(je=Vt!==D-1,Vt!==ae&&(tt=C.get(Vt,Vt-1),mt=C.get(Vt+1,Vt-1),qt=je?C.get(Vt+2,Vt-1):0,ee=Math.abs(tt)+Math.abs(mt)+Math.abs(qt),ee!==0&&(tt=tt/ee,mt=mt/ee,qt=qt/ee)),ee!==0);Vt++)if(gt=Math.sqrt(tt*tt+mt*mt+qt*qt),tt<0&&(gt=-gt),gt!==0){for(Vt!==ae?C.set(Vt,Vt-1,-gt*ee):ie!==ae&&C.set(Vt,Vt-1,-C.get(Vt,Vt-1)),tt=tt+gt,ee=tt/gt,ke=mt/gt,yt=qt/gt,mt=mt/tt,qt=qt/tt,Tt=Vt;Tt<U;Tt++)tt=C.get(Vt,Tt)+mt*C.get(Vt+1,Tt),je&&(tt=tt+qt*C.get(Vt+2,Tt),C.set(Vt+2,Tt,C.get(Vt+2,Tt)-tt*yt)),C.set(Vt,Tt,C.get(Vt,Tt)-tt*ee),C.set(Vt+1,Tt,C.get(Vt+1,Tt)-tt*ke);for(rt=0;rt<=Math.min(D,Vt+3);rt++)tt=ee*C.get(rt,Vt)+ke*C.get(rt,Vt+1),je&&(tt=tt+yt*C.get(rt,Vt+2),C.set(rt,Vt+2,C.get(rt,Vt+2)-tt*qt)),C.set(rt,Vt,C.get(rt,Vt)-tt),C.set(rt,Vt+1,C.get(rt,Vt+1)-tt*mt);for(rt=O;rt<=V;rt++)tt=ee*E.get(rt,Vt)+ke*E.get(rt,Vt+1),je&&(tt=tt+yt*E.get(rt,Vt+2),E.set(rt,Vt+2,E.get(rt,Vt+2)-tt*qt)),E.set(rt,Vt,E.get(rt,Vt)-tt),E.set(rt,Vt+1,E.get(rt,Vt+1)-tt*mt)}}}if(at!==0){for(D=U-1;D>=0;D--)if(tt=q[D],mt=_[D],mt===0)for(ie=D,C.set(D,D,1),rt=D-1;rt>=0;rt--){for(Ht=C.get(rt,rt)-tt,qt=0,Tt=ie;Tt<=D;Tt++)qt=qt+C.get(rt,Tt)*C.get(Tt,D);if(_[rt]<0)yt=Ht,gt=qt;else if(ie=rt,_[rt]===0?C.set(rt,D,Ht!==0?-qt/Ht:-qt/(X*at)):(ee=C.get(rt,rt+1),ke=C.get(rt+1,rt),mt=(q[rt]-tt)*(q[rt]-tt)+_[rt]*_[rt],Te=(ee*gt-yt*qt)/mt,C.set(rt,D,Te),C.set(rt+1,D,Math.abs(ee)>Math.abs(yt)?(-qt-Ht*Te)/ee:(-gt-ke*Te)/yt)),Te=Math.abs(C.get(rt,D)),X*Te*Te>1)for(Tt=rt;Tt<=D;Tt++)C.set(Tt,D,C.get(Tt,D)/Te)}else if(mt<0)for(ie=D-1,Math.abs(C.get(D,D-1))>Math.abs(C.get(D-1,D))?(C.set(D-1,D-1,mt/C.get(D,D-1)),C.set(D-1,D,-(C.get(D,D)-tt)/C.get(D,D-1))):(_e=Qe(0,-C.get(D-1,D),C.get(D-1,D-1)-tt,mt),C.set(D-1,D-1,_e[0]),C.set(D-1,D,_e[1])),C.set(D,D-1,0),C.set(D,D,1),rt=D-2;rt>=0;rt--){for(it=0,Mt=0,Tt=ie;Tt<=D;Tt++)it=it+C.get(rt,Tt)*C.get(Tt,D-1),Mt=Mt+C.get(rt,Tt)*C.get(Tt,D);if(Ht=C.get(rt,rt)-tt,_[rt]<0)yt=Ht,qt=it,gt=Mt;else if(ie=rt,_[rt]===0?(_e=Qe(-it,-Mt,Ht,mt),C.set(rt,D-1,_e[0]),C.set(rt,D,_e[1])):(ee=C.get(rt,rt+1),ke=C.get(rt+1,rt),zt=(q[rt]-tt)*(q[rt]-tt)+_[rt]*_[rt]-mt*mt,Ft=(q[rt]-tt)*2*mt,zt===0&&Ft===0&&(zt=X*at*(Math.abs(Ht)+Math.abs(mt)+Math.abs(ee)+Math.abs(ke)+Math.abs(yt))),_e=Qe(ee*qt-yt*it+mt*Mt,ee*gt-yt*Mt-mt*it,zt,Ft),C.set(rt,D-1,_e[0]),C.set(rt,D,_e[1]),Math.abs(ee)>Math.abs(yt)+Math.abs(mt)?(C.set(rt+1,D-1,(-it-Ht*C.get(rt,D-1)+mt*C.get(rt,D))/ee),C.set(rt+1,D,(-Mt-Ht*C.get(rt,D)-mt*C.get(rt,D-1))/ee)):(_e=Qe(-qt-ke*C.get(rt,D-1),-gt-ke*C.get(rt,D),yt,mt),C.set(rt+1,D-1,_e[0]),C.set(rt+1,D,_e[1]))),Te=Math.max(Math.abs(C.get(rt,D-1)),Math.abs(C.get(rt,D))),X*Te*Te>1)for(Tt=rt;Tt<=D;Tt++)C.set(Tt,D-1,C.get(Tt,D-1)/Te),C.set(Tt,D,C.get(Tt,D)/Te)}for(rt=0;rt<U;rt++)if(rt<O||rt>V)for(Tt=rt;Tt<U;Tt++)E.set(rt,Tt,C.get(rt,Tt));for(Tt=U-1;Tt>=O;Tt--)for(rt=O;rt<=V;rt++){for(yt=0,Vt=O;Vt<=Math.min(Tt,V);Vt++)yt=yt+E.get(rt,Vt)*C.get(Vt,Tt);E.set(rt,Tt,yt)}}}function Qe(U,_,q,E){let C,D;return Math.abs(q)>Math.abs(E)?(C=E/q,D=q+C*E,[(U+C*_)/D,(_-C*U)/D]):(C=q/E,D=E+C*q,[(C*U+_)/D,(C*_-U)/D])}class Je{constructor(_){if(_=xt.checkMatrix(_),!_.isSymmetric())throw new Error("Matrix is not symmetric");let q=_,E=q.rows,C=new ct(E,E),D=!0,O,V,X;for(V=0;V<E;V++){let G=0;for(X=0;X<V;X++){let at=0;for(O=0;O<X;O++)at+=C.get(X,O)*C.get(V,O);at=(q.get(V,X)-at)/C.get(X,X),C.set(V,X,at),G=G+at*at}for(G=q.get(V,V)-G,D&&=G>0,C.set(V,V,Math.sqrt(Math.max(G,0))),X=V+1;X<E;X++)C.set(V,X,0)}this.L=C,this.positiveDefinite=D}isPositiveDefinite(){return this.positiveDefinite}solve(_){_=xt.checkMatrix(_);let q=this.L,E=q.rows;if(_.rows!==E)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let C=_.columns,D=_.clone(),O,V,X;for(X=0;X<E;X++)for(V=0;V<C;V++){for(O=0;O<X;O++)D.set(X,V,D.get(X,V)-D.get(O,V)*q.get(X,O));D.set(X,V,D.get(X,V)/q.get(X,X))}for(X=E-1;X>=0;X--)for(V=0;V<C;V++){for(O=X+1;O<E;O++)D.set(X,V,D.get(X,V)-D.get(O,V)*q.get(O,X));D.set(X,V,D.get(X,V)/q.get(X,X))}return D}get lowerTriangularMatrix(){return this.L}}class Le{constructor(_,q={}){_=xt.checkMatrix(_);let{Y:E}=q;const{scaleScores:C=!1,maxIterations:D=1e3,terminationCriteria:O=1e-10}=q;let V;if(E){if(A.isAnyArray(E)&&typeof E[0]=="number"?E=ct.columnVector(E):E=xt.checkMatrix(E),E.rows!==_.rows)throw new Error("Y should have the same number of rows as X");V=E.getColumnVector(0)}else V=_.getColumnVector(0);let X=1,G,at,tt,mt;for(let qt=0;qt<D&&X>O;qt++)tt=_.transpose().mmul(V).div(V.transpose().mmul(V).get(0,0)),tt=tt.div(tt.norm()),G=_.mmul(tt).div(tt.transpose().mmul(tt).get(0,0)),qt>0&&(X=G.clone().sub(mt).pow(2).sum()),mt=G.clone(),E?(at=E.transpose().mmul(G).div(G.transpose().mmul(G).get(0,0)),at=at.div(at.norm()),V=E.mmul(at).div(at.transpose().mmul(at).get(0,0))):V=G;if(E){let qt=_.transpose().mmul(G).div(G.transpose().mmul(G).get(0,0));qt=qt.div(qt.norm());let gt=_.clone().sub(G.clone().mmul(qt.transpose())),yt=V.transpose().mmul(G).div(G.transpose().mmul(G).get(0,0)),Ut=E.clone().sub(G.clone().mulS(yt.get(0,0)).mmul(at.transpose()));this.t=G,this.p=qt.transpose(),this.w=tt.transpose(),this.q=at,this.u=V,this.s=G.transpose().mmul(G),this.xResidual=gt,this.yResidual=Ut,this.betas=yt}else this.w=tt.transpose(),this.s=G.transpose().mmul(G).sqrt(),C?this.t=G.clone().div(this.s.get(0,0)):this.t=G,this.xResidual=_.sub(G.mmul(tt.transpose()))}}return matrix$1.AbstractMatrix=_t,matrix$1.CHO=Je,matrix$1.CholeskyDecomposition=Je,matrix$1.DistanceMatrix=xe,matrix$1.EVD=de,matrix$1.EigenvalueDecomposition=de,matrix$1.LU=Gt,matrix$1.LuDecomposition=Gt,matrix$1.Matrix=ct,matrix$1.MatrixColumnSelectionView=ye,matrix$1.MatrixColumnView=ge,matrix$1.MatrixFlipColumnView=pe,matrix$1.MatrixFlipRowView=Ee,matrix$1.MatrixRowSelectionView=Yt,matrix$1.MatrixRowView=we,matrix$1.MatrixSelectionView=jt,matrix$1.MatrixSubView=ve,matrix$1.MatrixTransposeView=oe,matrix$1.NIPALS=Le,matrix$1.Nipals=Le,matrix$1.QR=he,matrix$1.QrDecomposition=he,matrix$1.SVD=me,matrix$1.SingularValueDecomposition=me,matrix$1.SymmetricMatrix=Wt,matrix$1.WrapperMatrix1D=ue,matrix$1.WrapperMatrix2D=xt,matrix$1.correlation=$e,matrix$1.covariance=le,matrix$1.default=ct,matrix$1.determinant=Xt,matrix$1.inverse=be,matrix$1.linearDependencies=ce,matrix$1.pseudoInverse=Me,matrix$1.solve=Qt,matrix$1.wrap=Kt,matrix$1}var matrixExports=requireMatrix();const matrix=getDefaultExportFromCjs(matrixExports),Matrix=matrixExports.Matrix,SVD=matrixExports.SVD;matrix.Matrix?matrix.Matrix:matrixExports.Matrix;const inverse=matrixExports.inverse,pseudoInverse=matrixExports.pseudoInverse;var medianQuickselect_min={exports:{}},hasRequiredMedianQuickselect_min;function requireMedianQuickselect_min(){return hasRequiredMedianQuickselect_min||(hasRequiredMedianQuickselect_min=1,(function(A){(function(){function B(Y){for(var Q=0,J=Y.length-1,K=void 0,nt=void 0,st=void 0,lt=z(Q,J);;){if(J<=Q)return Y[lt];if(J==Q+1)return Y[Q]>Y[J]&&P(Y,Q,J),Y[lt];for(K=z(Q,J),Y[K]>Y[J]&&P(Y,K,J),Y[Q]>Y[J]&&P(Y,Q,J),Y[K]>Y[Q]&&P(Y,K,Q),P(Y,K,Q+1),nt=Q+1,st=J;;){do nt++;while(Y[Q]>Y[nt]);do st--;while(Y[st]>Y[Q]);if(st<nt)break;P(Y,nt,st)}P(Y,Q,st),st<=lt&&(Q=nt),st>=lt&&(J=st-1)}}var P=function(Q,J,K){var nt;return nt=[Q[K],Q[J]],Q[J]=nt[0],Q[K]=nt[1],nt},z=function(Q,J){return~~((Q+J)/2)};A.exports?A.exports=B:window.median=B})()})(medianQuickselect_min)),medianQuickselect_min.exports}var medianQuickselect_minExports=requireMedianQuickselect_min();const quickMedian=getDefaultExportFromCjs(medianQuickselect_minExports),t$2=Symbol.for("@ts-pattern/matcher"),e$2=Symbol.for("@ts-pattern/isVariadic"),n$2="@ts-pattern/anonymous-select-key",r$2=A=>!!(A&&typeof A=="object"),i$2=A=>A&&!!A[t$2],o$2=(A,B,P)=>{if(i$2(A)){const z=A[t$2](),{matched:Y,selections:Q}=z.match(B);return Y&&Q&&Object.keys(Q).forEach(J=>P(J,Q[J])),Y}if(r$2(A)){if(!r$2(B))return!1;if(Array.isArray(A)){if(!Array.isArray(B))return!1;let z=[],Y=[],Q=[];for(const J of A.keys()){const K=A[J];i$2(K)&&K[e$2]?Q.push(K):Q.length?Y.push(K):z.push(K)}if(Q.length){if(Q.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(B.length<z.length+Y.length)return!1;const J=B.slice(0,z.length),K=Y.length===0?[]:B.slice(-Y.length),nt=B.slice(z.length,Y.length===0?1/0:-Y.length);return z.every((st,lt)=>o$2(st,J[lt],P))&&Y.every((st,lt)=>o$2(st,K[lt],P))&&(Q.length===0||o$2(Q[0],nt,P))}return A.length===B.length&&A.every((J,K)=>o$2(J,B[K],P))}return Reflect.ownKeys(A).every(z=>{const Y=A[z];return(z in B||i$2(Q=Y)&&Q[t$2]().matcherType==="optional")&&o$2(Y,B[z],P);var Q})}return Object.is(B,A)},s$1=A=>{var B,P,z;return r$2(A)?i$2(A)?(B=(P=(z=A[t$2]()).getSelectionKeys)==null?void 0:P.call(z))!=null?B:[]:Array.isArray(A)?c$1(A,s$1):c$1(Object.values(A),s$1):[]},c$1=(A,B)=>A.reduce((P,z)=>P.concat(B(z)),[]);function a$2(A){return Object.assign(A,{optional:()=>h$2(A),and:B=>d$1(A,B),or:B=>y$1(A,B),select:B=>B===void 0?v$1(A):v$1(B,A)})}function h$2(A){return a$2({[t$2]:()=>({match:B=>{let P={};const z=(Y,Q)=>{P[Y]=Q};return B===void 0?(s$1(A).forEach(Y=>z(Y,void 0)),{matched:!0,selections:P}):{matched:o$2(A,B,z),selections:P}},getSelectionKeys:()=>s$1(A),matcherType:"optional"})})}function d$1(...A){return a$2({[t$2]:()=>({match:B=>{let P={};const z=(Y,Q)=>{P[Y]=Q};return{matched:A.every(Y=>o$2(Y,B,z)),selections:P}},getSelectionKeys:()=>c$1(A,s$1),matcherType:"and"})})}function y$1(...A){return a$2({[t$2]:()=>({match:B=>{let P={};const z=(Y,Q)=>{P[Y]=Q};return c$1(A,s$1).forEach(Y=>z(Y,void 0)),{matched:A.some(Y=>o$2(Y,B,z)),selections:P}},getSelectionKeys:()=>c$1(A,s$1),matcherType:"or"})})}function p$2(A){return{[t$2]:()=>({match:B=>({matched:!!A(B)})})}}function v$1(...A){const B=typeof A[0]=="string"?A[0]:void 0,P=A.length===2?A[1]:typeof A[0]=="string"?void 0:A[0];return a$2({[t$2]:()=>({match:z=>{let Y={[B??n$2]:z};return{matched:P===void 0||o$2(P,z,(Q,J)=>{Y[Q]=J}),selections:Y}},getSelectionKeys:()=>[B??n$2].concat(P===void 0?[]:s$1(P))})})}function b$2(A){return!0}function w$2(A){return typeof A=="number"}function S$1(A){return typeof A=="string"}function j$1(A){return typeof A=="bigint"}a$2(p$2(b$2));a$2(p$2(b$2));const x$2=A=>Object.assign(a$2(A),{startsWith:B=>{return x$2(d$1(A,(P=B,p$2(z=>S$1(z)&&z.startsWith(P)))));var P},endsWith:B=>{return x$2(d$1(A,(P=B,p$2(z=>S$1(z)&&z.endsWith(P)))));var P},minLength:B=>x$2(d$1(A,(P=>p$2(z=>S$1(z)&&z.length>=P))(B))),length:B=>x$2(d$1(A,(P=>p$2(z=>S$1(z)&&z.length===P))(B))),maxLength:B=>x$2(d$1(A,(P=>p$2(z=>S$1(z)&&z.length<=P))(B))),includes:B=>{return x$2(d$1(A,(P=B,p$2(z=>S$1(z)&&z.includes(P)))));var P},regex:B=>{return x$2(d$1(A,(P=B,p$2(z=>S$1(z)&&!!z.match(P)))));var P}});x$2(p$2(S$1));const N$1=A=>Object.assign(a$2(A),{between:(B,P)=>N$1(d$1(A,((z,Y)=>p$2(Q=>w$2(Q)&&z<=Q&&Y>=Q))(B,P))),lt:B=>N$1(d$1(A,(P=>p$2(z=>w$2(z)&&z<P))(B))),gt:B=>N$1(d$1(A,(P=>p$2(z=>w$2(z)&&z>P))(B))),lte:B=>N$1(d$1(A,(P=>p$2(z=>w$2(z)&&z<=P))(B))),gte:B=>N$1(d$1(A,(P=>p$2(z=>w$2(z)&&z>=P))(B))),int:()=>N$1(d$1(A,p$2(B=>w$2(B)&&Number.isInteger(B)))),finite:()=>N$1(d$1(A,p$2(B=>w$2(B)&&Number.isFinite(B)))),positive:()=>N$1(d$1(A,p$2(B=>w$2(B)&&B>0))),negative:()=>N$1(d$1(A,p$2(B=>w$2(B)&&B<0)))});N$1(p$2(w$2));const k$1=A=>Object.assign(a$2(A),{between:(B,P)=>k$1(d$1(A,((z,Y)=>p$2(Q=>j$1(Q)&&z<=Q&&Y>=Q))(B,P))),lt:B=>k$1(d$1(A,(P=>p$2(z=>j$1(z)&&z<P))(B))),gt:B=>k$1(d$1(A,(P=>p$2(z=>j$1(z)&&z>P))(B))),lte:B=>k$1(d$1(A,(P=>p$2(z=>j$1(z)&&z<=P))(B))),gte:B=>k$1(d$1(A,(P=>p$2(z=>j$1(z)&&z>=P))(B))),positive:()=>k$1(d$1(A,p$2(B=>j$1(B)&&B>0))),negative:()=>k$1(d$1(A,p$2(B=>j$1(B)&&B<0)))});k$1(p$2(j$1));a$2(p$2(function(A){return typeof A=="boolean"}));a$2(p$2(function(A){return typeof A=="symbol"}));a$2(p$2(function(A){return A==null}));a$2(p$2(function(A){return A!=null}));class I extends Error{constructor(B){let P;try{P=JSON.stringify(B)}catch{P=B}super(`Pattern matching error: no pattern matches value ${P}`),this.input=void 0,this.input=B}}const L={matched:!1,value:void 0};function M$2(A){return new R(A,L)}class R{constructor(B,P){this.input=void 0,this.state=void 0,this.input=B,this.state=P}with(...B){if(this.state.matched)return this;const P=B[B.length-1],z=[B[0]];let Y;B.length===3&&typeof B[1]=="function"?Y=B[1]:B.length>2&&z.push(...B.slice(1,B.length-1));let Q=!1,J={};const K=(st,lt)=>{Q=!0,J[st]=lt},nt=!z.some(st=>o$2(st,this.input,K))||Y&&!Y(this.input)?L:{matched:!0,value:P(Q?n$2 in J?J[n$2]:J:this.input,this.input)};return new R(this.input,nt)}when(B,P){if(this.state.matched)return this;const z=!!B(this.input);return new R(this.input,z?{matched:!0,value:P(this.input,this.input)}:L)}otherwise(B){return this.state.matched?this.state.value:B(this.input)}exhaustive(B=F){return this.state.matched?this.state.value:B(this.input)}run(){return this.exhaustive()}returnType(){return this}narrow(){return this}}function F(A){throw new I(A)}function T(A,B,P,z,Y){const Q=Math.abs(P-A),J=A<P?1:-1,K=-Math.abs(z-B),nt=B<z?1:-1;let st=Q+K,lt;for(;;){if(Y(A,B),lt=2*st,lt>=K){if(A===P)break;st+=K,A+=J}if(lt<=Q){if(B===z)break;st+=Q,B+=nt}}}function x$1(A,B,P,z){var Y=-P,Q=0,J=2-2*P;do z(A-Y,B+Q),z(A-Q,B-Y),z(A+Y,B-Q),z(A+Q,B+Y),P=J,P<=Q&&(J+=++Q*2+1),(P>Y||J>Q)&&(J+=++Y*2+1);while(Y<0)}function xMedian(A,B={}){if(!isAnyArray(A))throw new TypeError("input must be an array");if(A.length===0)throw new TypeError("input must not be empty");const{exact:P=!1}=B||{},z=A.slice(),Y=calcMiddle(0,z.length-1),Q=quickSelect(z,Y);if(z.length%2===1||!P)return Q;const J=quickSelect(z,Y+1);return(Q+J)/2}function quickSelect(A,B){let P=0,z=A.length-1,Y=0,Q=0,J=0;for(;;){if(z<=P)return A[B];if(z===P+1)return A[P]>A[z]&&swap(A,P,z),A[B];for(Y=calcMiddle(P,z),A[Y]>A[z]&&swap(A,Y,z),A[P]>A[z]&&swap(A,P,z),A[Y]>A[P]&&swap(A,Y,P),swap(A,Y,P+1),Q=P+1,J=z;;){do Q++;while(A[P]>A[Q]);do J--;while(A[J]>A[P]);if(J<Q)break;swap(A,Q,J)}swap(A,P,J),J<=B&&(P=Q),J>=B&&(z=J-1)}}function swap(A,B,P){const z=A[P];A[P]=A[B],A[B]=z}function calcMiddle(A,B){return Math.floor((A+B)/2)}var fft,hasRequiredFft;function requireFft(){if(hasRequiredFft)return fft;hasRequiredFft=1;function A(B){if(this.size=B|0,this.size<=1||(this.size&this.size-1)!==0)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=B<<1;for(var P=new Array(this.size*2),z=0;z<P.length;z+=2){const st=Math.PI*z/this.size;P[z]=Math.cos(st),P[z+1]=-Math.sin(st)}this.table=P;for(var Y=0,Q=1;this.size>Q;Q<<=1)Y++;this._width=Y%2===0?Y-1:Y,this._bitrev=new Array(1<<this._width);for(var J=0;J<this._bitrev.length;J++){this._bitrev[J]=0;for(var K=0;K<this._width;K+=2){var nt=this._width-K-2;this._bitrev[J]|=(J>>>K&3)<<nt}}this._out=null,this._data=null,this._inv=0}return fft=A,A.prototype.fromComplexArray=function(P,z){for(var Y=z||new Array(P.length>>>1),Q=0;Q<P.length;Q+=2)Y[Q>>>1]=P[Q];return Y},A.prototype.createComplexArray=function(){const P=new Array(this._csize);for(var z=0;z<P.length;z++)P[z]=0;return P},A.prototype.toComplexArray=function(P,z){for(var Y=z||this.createComplexArray(),Q=0;Q<Y.length;Q+=2)Y[Q]=P[Q>>>1],Y[Q+1]=0;return Y},A.prototype.completeSpectrum=function(P){for(var z=this._csize,Y=z>>>1,Q=2;Q<Y;Q+=2)P[z-Q]=P[Q],P[z-Q+1]=-P[Q+1]},A.prototype.transform=function(P,z){if(P===z)throw new Error("Input and output buffers must be different");this._out=P,this._data=z,this._inv=0,this._transform4(),this._out=null,this._data=null},A.prototype.realTransform=function(P,z){if(P===z)throw new Error("Input and output buffers must be different");this._out=P,this._data=z,this._inv=0,this._realTransform4(),this._out=null,this._data=null},A.prototype.inverseTransform=function(P,z){if(P===z)throw new Error("Input and output buffers must be different");this._out=P,this._data=z,this._inv=1,this._transform4();for(var Y=0;Y<P.length;Y++)P[Y]/=this.size;this._out=null,this._data=null},A.prototype._transform4=function(){var P=this._out,z=this._csize,Y=this._width,Q=1<<Y,J=z/Q<<1,K,nt,st=this._bitrev;if(J===4)for(K=0,nt=0;K<z;K+=J,nt++){const Ct=st[nt];this._singleTransform2(K,Ct,Q)}else for(K=0,nt=0;K<z;K+=J,nt++){const Ct=st[nt];this._singleTransform4(K,Ct,Q)}var lt=this._inv?-1:1,vt=this.table;for(Q>>=2;Q>=2;Q>>=2){J=z/Q<<1;var dt=J>>>2;for(K=0;K<z;K+=J)for(var kt=K+dt,Et=K,Rt=0;Et<kt;Et+=2,Rt+=Q){const Ct=Et,It=Ct+dt,Nt=It+dt,Z=Nt+dt,et=P[Ct],ft=P[Ct+1],wt=P[It],bt=P[It+1],W=P[Nt],ot=P[Nt+1],ut=P[Z],ht=P[Z+1],pt=et,At=ft,Dt=vt[Rt],te=lt*vt[Rt+1],$t=wt*Dt-bt*te,Pt=wt*te+bt*Dt,St=vt[2*Rt],Lt=lt*vt[2*Rt+1],Bt=W*St-ot*Lt,se=W*Lt+ot*St,_t=vt[3*Rt],re=lt*vt[3*Rt+1],Ot=ut*_t-ht*re,ct=ut*re+ht*_t,Wt=pt+Bt,xe=At+se,fe=pt-Bt,ge=At-se,ye=$t+Ot,pe=Pt+ct,Ee=lt*($t-Ot),we=lt*(Pt-ct),Yt=Wt+ye,jt=xe+pe,ve=Wt-ye,oe=xe-pe,ue=fe+we,xt=ge-Ee,Kt=fe-we,Gt=ge+Ee;P[Ct]=Yt,P[Ct+1]=jt,P[It]=ue,P[It+1]=xt,P[Nt]=ve,P[Nt+1]=oe,P[Z]=Kt,P[Z+1]=Gt}}},A.prototype._singleTransform2=function(P,z,Y){const Q=this._out,J=this._data,K=J[z],nt=J[z+1],st=J[z+Y],lt=J[z+Y+1],vt=K+st,dt=nt+lt,kt=K-st,Et=nt-lt;Q[P]=vt,Q[P+1]=dt,Q[P+2]=kt,Q[P+3]=Et},A.prototype._singleTransform4=function(P,z,Y){const Q=this._out,J=this._data,K=this._inv?-1:1,nt=Y*2,st=Y*3,lt=J[z],vt=J[z+1],dt=J[z+Y],kt=J[z+Y+1],Et=J[z+nt],Rt=J[z+nt+1],Ct=J[z+st],It=J[z+st+1],Nt=lt+Et,Z=vt+Rt,et=lt-Et,ft=vt-Rt,wt=dt+Ct,bt=kt+It,W=K*(dt-Ct),ot=K*(kt-It),ut=Nt+wt,ht=Z+bt,pt=et+ot,At=ft-W,Dt=Nt-wt,te=Z-bt,$t=et-ot,Pt=ft+W;Q[P]=ut,Q[P+1]=ht,Q[P+2]=pt,Q[P+3]=At,Q[P+4]=Dt,Q[P+5]=te,Q[P+6]=$t,Q[P+7]=Pt},A.prototype._realTransform4=function(){var P=this._out,z=this._csize,Y=this._width,Q=1<<Y,J=z/Q<<1,K,nt,st=this._bitrev;if(J===4)for(K=0,nt=0;K<z;K+=J,nt++){const Fe=st[nt];this._singleRealTransform2(K,Fe>>>1,Q>>>1)}else for(K=0,nt=0;K<z;K+=J,nt++){const Fe=st[nt];this._singleRealTransform4(K,Fe>>>1,Q>>>1)}var lt=this._inv?-1:1,vt=this.table;for(Q>>=2;Q>=2;Q>>=2){J=z/Q<<1;var dt=J>>>1,kt=dt>>>1,Et=kt>>>1;for(K=0;K<z;K+=J)for(var Rt=0,Ct=0;Rt<=Et;Rt+=2,Ct+=Q){var It=K+Rt,Nt=It+kt,Z=Nt+kt,et=Z+kt,ft=P[It],wt=P[It+1],bt=P[Nt],W=P[Nt+1],ot=P[Z],ut=P[Z+1],ht=P[et],pt=P[et+1],At=ft,Dt=wt,te=vt[Ct],$t=lt*vt[Ct+1],Pt=bt*te-W*$t,St=bt*$t+W*te,Lt=vt[2*Ct],Bt=lt*vt[2*Ct+1],se=ot*Lt-ut*Bt,_t=ot*Bt+ut*Lt,re=vt[3*Ct],Ot=lt*vt[3*Ct+1],ct=ht*re-pt*Ot,Wt=ht*Ot+pt*re,xe=At+se,fe=Dt+_t,ge=At-se,ye=Dt-_t,pe=Pt+ct,Ee=St+Wt,we=lt*(Pt-ct),Yt=lt*(St-Wt),jt=xe+pe,ve=fe+Ee,oe=ge+Yt,ue=ye-we;if(P[It]=jt,P[It+1]=ve,P[Nt]=oe,P[Nt+1]=ue,Rt===0){var xt=xe-pe,Kt=fe-Ee;P[Z]=xt,P[Z+1]=Kt;continue}if(Rt!==Et){var Gt=ge,Zt=-ye,he=xe,me=-fe,be=-lt*Yt,Qt=-lt*we,Xt=-lt*Ee,ne=-lt*pe,Jt=Gt+be,ce=Zt+Qt,Me=he+ne,le=me-Xt,$e=K+kt-Rt,de=K+dt-Rt;P[$e]=Jt,P[$e+1]=ce,P[de]=Me,P[de+1]=le}}}},A.prototype._singleRealTransform2=function(P,z,Y){const Q=this._out,J=this._data,K=J[z],nt=J[z+Y],st=K+nt,lt=K-nt;Q[P]=st,Q[P+1]=0,Q[P+2]=lt,Q[P+3]=0},A.prototype._singleRealTransform4=function(P,z,Y){const Q=this._out,J=this._data,K=this._inv?-1:1,nt=Y*2,st=Y*3,lt=J[z],vt=J[z+Y],dt=J[z+nt],kt=J[z+st],Et=lt+dt,Rt=lt-dt,Ct=vt+kt,It=K*(vt-kt),Nt=Et+Ct,Z=Rt,et=-It,ft=Et-Ct,wt=Rt,bt=It;Q[P]=Nt,Q[P+1]=0,Q[P+2]=Z,Q[P+3]=et,Q[P+4]=ft,Q[P+5]=0,Q[P+6]=wt,Q[P+7]=bt},fft}requireFft();var orientation={exports:{}},twoProduct_1,hasRequiredTwoProduct;function requireTwoProduct(){if(hasRequiredTwoProduct)return twoProduct_1;hasRequiredTwoProduct=1,twoProduct_1=B;var A=+(Math.pow(2,27)+1);function B(P,z,Y){var Q=P*z,J=A*P,K=J-P,nt=J-K,st=P-nt,lt=A*z,vt=lt-z,dt=lt-vt,kt=z-dt,Et=Q-nt*dt,Rt=Et-st*dt,Ct=Rt-nt*kt,It=st*kt-Ct;return Y?(Y[0]=It,Y[1]=Q,Y):[It,Q]}return twoProduct_1}var robustSum,hasRequiredRobustSum;function requireRobustSum(){if(hasRequiredRobustSum)return robustSum;hasRequiredRobustSum=1,robustSum=B;function A(P,z){var Y=P+z,Q=Y-P,J=Y-Q,K=z-Q,nt=P-J,st=nt+K;return st?[st,Y]:[Y]}function B(P,z){var Y=P.length|0,Q=z.length|0;if(Y===1&&Q===1)return A(P[0],z[0]);var J=Y+Q,K=new Array(J),nt=0,st=0,lt=0,vt=Math.abs,dt=P[st],kt=vt(dt),Et=z[lt],Rt=vt(Et),Ct,It;kt<Rt?(It=dt,st+=1,st<Y&&(dt=P[st],kt=vt(dt))):(It=Et,lt+=1,lt<Q&&(Et=z[lt],Rt=vt(Et))),st<Y&&kt<Rt||lt>=Q?(Ct=dt,st+=1,st<Y&&(dt=P[st],kt=vt(dt))):(Ct=Et,lt+=1,lt<Q&&(Et=z[lt],Rt=vt(Et)));for(var Nt=Ct+It,Z=Nt-Ct,et=It-Z,ft=et,wt=Nt,bt,W,ot,ut,ht;st<Y&&lt<Q;)kt<Rt?(Ct=dt,st+=1,st<Y&&(dt=P[st],kt=vt(dt))):(Ct=Et,lt+=1,lt<Q&&(Et=z[lt],Rt=vt(Et))),It=ft,Nt=Ct+It,Z=Nt-Ct,et=It-Z,et&&(K[nt++]=et),bt=wt+Nt,W=bt-wt,ot=bt-W,ut=Nt-W,ht=wt-ot,ft=ht+ut,wt=bt;for(;st<Y;)Ct=dt,It=ft,Nt=Ct+It,Z=Nt-Ct,et=It-Z,et&&(K[nt++]=et),bt=wt+Nt,W=bt-wt,ot=bt-W,ut=Nt-W,ht=wt-ot,ft=ht+ut,wt=bt,st+=1,st<Y&&(dt=P[st]);for(;lt<Q;)Ct=Et,It=ft,Nt=Ct+It,Z=Nt-Ct,et=It-Z,et&&(K[nt++]=et),bt=wt+Nt,W=bt-wt,ot=bt-W,ut=Nt-W,ht=wt-ot,ft=ht+ut,wt=bt,lt+=1,lt<Q&&(Et=z[lt]);return ft&&(K[nt++]=ft),wt&&(K[nt++]=wt),nt||(K[nt++]=0),K.length=nt,K}return robustSum}var twoSum,hasRequiredTwoSum;function requireTwoSum(){if(hasRequiredTwoSum)return twoSum;hasRequiredTwoSum=1,twoSum=A;function A(B,P,z){var Y=B+P,Q=Y-B,J=Y-Q,K=P-Q,nt=B-J;return z?(z[0]=nt+K,z[1]=Y,z):[nt+K,Y]}return twoSum}var robustScale,hasRequiredRobustScale;function requireRobustScale(){if(hasRequiredRobustScale)return robustScale;hasRequiredRobustScale=1;var A=requireTwoProduct(),B=requireTwoSum();robustScale=P;function P(z,Y){var Q=z.length;if(Q===1){var J=A(z[0],Y);return J[0]?J:[J[1]]}var K=new Array(2*Q),nt=[.1,.1],st=[.1,.1],lt=0;A(z[0],Y,nt),nt[0]&&(K[lt++]=nt[0]);for(var vt=1;vt<Q;++vt){A(z[vt],Y,st);var dt=nt[1];B(dt,st[0],nt),nt[0]&&(K[lt++]=nt[0]);var kt=st[1],Et=nt[1],Rt=kt+Et,Ct=Rt-kt,It=Et-Ct;nt[1]=Rt,It&&(K[lt++]=It)}return nt[1]&&(K[lt++]=nt[1]),lt===0&&(K[lt++]=0),K.length=lt,K}return robustScale}var robustDiff,hasRequiredRobustDiff;function requireRobustDiff(){if(hasRequiredRobustDiff)return robustDiff;hasRequiredRobustDiff=1,robustDiff=B;function A(P,z){var Y=P+z,Q=Y-P,J=Y-Q,K=z-Q,nt=P-J,st=nt+K;return st?[st,Y]:[Y]}function B(P,z){var Y=P.length|0,Q=z.length|0;if(Y===1&&Q===1)return A(P[0],-z[0]);var J=Y+Q,K=new Array(J),nt=0,st=0,lt=0,vt=Math.abs,dt=P[st],kt=vt(dt),Et=-z[lt],Rt=vt(Et),Ct,It;kt<Rt?(It=dt,st+=1,st<Y&&(dt=P[st],kt=vt(dt))):(It=Et,lt+=1,lt<Q&&(Et=-z[lt],Rt=vt(Et))),st<Y&&kt<Rt||lt>=Q?(Ct=dt,st+=1,st<Y&&(dt=P[st],kt=vt(dt))):(Ct=Et,lt+=1,lt<Q&&(Et=-z[lt],Rt=vt(Et)));for(var Nt=Ct+It,Z=Nt-Ct,et=It-Z,ft=et,wt=Nt,bt,W,ot,ut,ht;st<Y&&lt<Q;)kt<Rt?(Ct=dt,st+=1,st<Y&&(dt=P[st],kt=vt(dt))):(Ct=Et,lt+=1,lt<Q&&(Et=-z[lt],Rt=vt(Et))),It=ft,Nt=Ct+It,Z=Nt-Ct,et=It-Z,et&&(K[nt++]=et),bt=wt+Nt,W=bt-wt,ot=bt-W,ut=Nt-W,ht=wt-ot,ft=ht+ut,wt=bt;for(;st<Y;)Ct=dt,It=ft,Nt=Ct+It,Z=Nt-Ct,et=It-Z,et&&(K[nt++]=et),bt=wt+Nt,W=bt-wt,ot=bt-W,ut=Nt-W,ht=wt-ot,ft=ht+ut,wt=bt,st+=1,st<Y&&(dt=P[st]);for(;lt<Q;)Ct=Et,It=ft,Nt=Ct+It,Z=Nt-Ct,et=It-Z,et&&(K[nt++]=et),bt=wt+Nt,W=bt-wt,ot=bt-W,ut=Nt-W,ht=wt-ot,ft=ht+ut,wt=bt,lt+=1,lt<Q&&(Et=-z[lt]);return ft&&(K[nt++]=ft),wt&&(K[nt++]=wt),nt||(K[nt++]=0),K.length=nt,K}return robustDiff}var hasRequiredOrientation;function requireOrientation(){return hasRequiredOrientation||(hasRequiredOrientation=1,(function(A){var B=requireTwoProduct(),P=requireRobustSum(),z=requireRobustScale(),Y=requireRobustDiff(),Q=5,J=11102230246251565e-32,K=(3+16*J)*J,nt=(7+56*J)*J;function st(Z,et,ft,wt){return function(W,ot,ut){var ht=Z(Z(et(ot[1],ut[0]),et(-ut[1],ot[0])),Z(et(W[1],ot[0]),et(-ot[1],W[0]))),pt=Z(et(W[1],ut[0]),et(-ut[1],W[0])),At=wt(ht,pt);return At[At.length-1]}}function lt(Z,et,ft,wt){return function(W,ot,ut,ht){var pt=Z(Z(ft(Z(et(ut[1],ht[0]),et(-ht[1],ut[0])),ot[2]),Z(ft(Z(et(ot[1],ht[0]),et(-ht[1],ot[0])),-ut[2]),ft(Z(et(ot[1],ut[0]),et(-ut[1],ot[0])),ht[2]))),Z(ft(Z(et(ot[1],ht[0]),et(-ht[1],ot[0])),W[2]),Z(ft(Z(et(W[1],ht[0]),et(-ht[1],W[0])),-ot[2]),ft(Z(et(W[1],ot[0]),et(-ot[1],W[0])),ht[2])))),At=Z(Z(ft(Z(et(ut[1],ht[0]),et(-ht[1],ut[0])),W[2]),Z(ft(Z(et(W[1],ht[0]),et(-ht[1],W[0])),-ut[2]),ft(Z(et(W[1],ut[0]),et(-ut[1],W[0])),ht[2]))),Z(ft(Z(et(ot[1],ut[0]),et(-ut[1],ot[0])),W[2]),Z(ft(Z(et(W[1],ut[0]),et(-ut[1],W[0])),-ot[2]),ft(Z(et(W[1],ot[0]),et(-ot[1],W[0])),ut[2])))),Dt=wt(pt,At);return Dt[Dt.length-1]}}function vt(Z,et,ft,wt){return function(W,ot,ut,ht,pt){var At=Z(Z(Z(ft(Z(ft(Z(et(ht[1],pt[0]),et(-pt[1],ht[0])),ut[2]),Z(ft(Z(et(ut[1],pt[0]),et(-pt[1],ut[0])),-ht[2]),ft(Z(et(ut[1],ht[0]),et(-ht[1],ut[0])),pt[2]))),ot[3]),Z(ft(Z(ft(Z(et(ht[1],pt[0]),et(-pt[1],ht[0])),ot[2]),Z(ft(Z(et(ot[1],pt[0]),et(-pt[1],ot[0])),-ht[2]),ft(Z(et(ot[1],ht[0]),et(-ht[1],ot[0])),pt[2]))),-ut[3]),ft(Z(ft(Z(et(ut[1],pt[0]),et(-pt[1],ut[0])),ot[2]),Z(ft(Z(et(ot[1],pt[0]),et(-pt[1],ot[0])),-ut[2]),ft(Z(et(ot[1],ut[0]),et(-ut[1],ot[0])),pt[2]))),ht[3]))),Z(ft(Z(ft(Z(et(ut[1],ht[0]),et(-ht[1],ut[0])),ot[2]),Z(ft(Z(et(ot[1],ht[0]),et(-ht[1],ot[0])),-ut[2]),ft(Z(et(ot[1],ut[0]),et(-ut[1],ot[0])),ht[2]))),-pt[3]),Z(ft(Z(ft(Z(et(ht[1],pt[0]),et(-pt[1],ht[0])),ot[2]),Z(ft(Z(et(ot[1],pt[0]),et(-pt[1],ot[0])),-ht[2]),ft(Z(et(ot[1],ht[0]),et(-ht[1],ot[0])),pt[2]))),W[3]),ft(Z(ft(Z(et(ht[1],pt[0]),et(-pt[1],ht[0])),W[2]),Z(ft(Z(et(W[1],pt[0]),et(-pt[1],W[0])),-ht[2]),ft(Z(et(W[1],ht[0]),et(-ht[1],W[0])),pt[2]))),-ot[3])))),Z(Z(ft(Z(ft(Z(et(ot[1],pt[0]),et(-pt[1],ot[0])),W[2]),Z(ft(Z(et(W[1],pt[0]),et(-pt[1],W[0])),-ot[2]),ft(Z(et(W[1],ot[0]),et(-ot[1],W[0])),pt[2]))),ht[3]),Z(ft(Z(ft(Z(et(ot[1],ht[0]),et(-ht[1],ot[0])),W[2]),Z(ft(Z(et(W[1],ht[0]),et(-ht[1],W[0])),-ot[2]),ft(Z(et(W[1],ot[0]),et(-ot[1],W[0])),ht[2]))),-pt[3]),ft(Z(ft(Z(et(ut[1],ht[0]),et(-ht[1],ut[0])),ot[2]),Z(ft(Z(et(ot[1],ht[0]),et(-ht[1],ot[0])),-ut[2]),ft(Z(et(ot[1],ut[0]),et(-ut[1],ot[0])),ht[2]))),W[3]))),Z(ft(Z(ft(Z(et(ut[1],ht[0]),et(-ht[1],ut[0])),W[2]),Z(ft(Z(et(W[1],ht[0]),et(-ht[1],W[0])),-ut[2]),ft(Z(et(W[1],ut[0]),et(-ut[1],W[0])),ht[2]))),-ot[3]),Z(ft(Z(ft(Z(et(ot[1],ht[0]),et(-ht[1],ot[0])),W[2]),Z(ft(Z(et(W[1],ht[0]),et(-ht[1],W[0])),-ot[2]),ft(Z(et(W[1],ot[0]),et(-ot[1],W[0])),ht[2]))),ut[3]),ft(Z(ft(Z(et(ot[1],ut[0]),et(-ut[1],ot[0])),W[2]),Z(ft(Z(et(W[1],ut[0]),et(-ut[1],W[0])),-ot[2]),ft(Z(et(W[1],ot[0]),et(-ot[1],W[0])),ut[2]))),-ht[3]))))),Dt=Z(Z(Z(ft(Z(ft(Z(et(ht[1],pt[0]),et(-pt[1],ht[0])),ut[2]),Z(ft(Z(et(ut[1],pt[0]),et(-pt[1],ut[0])),-ht[2]),ft(Z(et(ut[1],ht[0]),et(-ht[1],ut[0])),pt[2]))),W[3]),ft(Z(ft(Z(et(ht[1],pt[0]),et(-pt[1],ht[0])),W[2]),Z(ft(Z(et(W[1],pt[0]),et(-pt[1],W[0])),-ht[2]),ft(Z(et(W[1],ht[0]),et(-ht[1],W[0])),pt[2]))),-ut[3])),Z(ft(Z(ft(Z(et(ut[1],pt[0]),et(-pt[1],ut[0])),W[2]),Z(ft(Z(et(W[1],pt[0]),et(-pt[1],W[0])),-ut[2]),ft(Z(et(W[1],ut[0]),et(-ut[1],W[0])),pt[2]))),ht[3]),ft(Z(ft(Z(et(ut[1],ht[0]),et(-ht[1],ut[0])),W[2]),Z(ft(Z(et(W[1],ht[0]),et(-ht[1],W[0])),-ut[2]),ft(Z(et(W[1],ut[0]),et(-ut[1],W[0])),ht[2]))),-pt[3]))),Z(Z(ft(Z(ft(Z(et(ut[1],pt[0]),et(-pt[1],ut[0])),ot[2]),Z(ft(Z(et(ot[1],pt[0]),et(-pt[1],ot[0])),-ut[2]),ft(Z(et(ot[1],ut[0]),et(-ut[1],ot[0])),pt[2]))),W[3]),ft(Z(ft(Z(et(ut[1],pt[0]),et(-pt[1],ut[0])),W[2]),Z(ft(Z(et(W[1],pt[0]),et(-pt[1],W[0])),-ut[2]),ft(Z(et(W[1],ut[0]),et(-ut[1],W[0])),pt[2]))),-ot[3])),Z(ft(Z(ft(Z(et(ot[1],pt[0]),et(-pt[1],ot[0])),W[2]),Z(ft(Z(et(W[1],pt[0]),et(-pt[1],W[0])),-ot[2]),ft(Z(et(W[1],ot[0]),et(-ot[1],W[0])),pt[2]))),ut[3]),ft(Z(ft(Z(et(ot[1],ut[0]),et(-ut[1],ot[0])),W[2]),Z(ft(Z(et(W[1],ut[0]),et(-ut[1],W[0])),-ot[2]),ft(Z(et(W[1],ot[0]),et(-ot[1],W[0])),ut[2]))),-pt[3])))),te=wt(At,Dt);return te[te.length-1]}}function dt(Z){var et=Z===3?st:Z===4?lt:vt;return et(P,B,z,Y)}var kt=dt(3),Et=dt(4),Rt=[function(){return 0},function(){return 0},function(et,ft){return ft[0]-et[0]},function(et,ft,wt){var bt=(et[1]-wt[1])*(ft[0]-wt[0]),W=(et[0]-wt[0])*(ft[1]-wt[1]),ot=bt-W,ut;if(bt>0){if(W<=0)return ot;ut=bt+W}else if(bt<0){if(W>=0)return ot;ut=-(bt+W)}else return ot;var ht=K*ut;return ot>=ht||ot<=-ht?ot:kt(et,ft,wt)},function(et,ft,wt,bt){var W=et[0]-bt[0],ot=ft[0]-bt[0],ut=wt[0]-bt[0],ht=et[1]-bt[1],pt=ft[1]-bt[1],At=wt[1]-bt[1],Dt=et[2]-bt[2],te=ft[2]-bt[2],$t=wt[2]-bt[2],Pt=ot*At,St=ut*pt,Lt=ut*ht,Bt=W*At,se=W*pt,_t=ot*ht,re=Dt*(Pt-St)+te*(Lt-Bt)+$t*(se-_t),Ot=(Math.abs(Pt)+Math.abs(St))*Math.abs(Dt)+(Math.abs(Lt)+Math.abs(Bt))*Math.abs(te)+(Math.abs(se)+Math.abs(_t))*Math.abs($t),ct=nt*Ot;return re>ct||-re>ct?re:Et(et,ft,wt,bt)}];function Ct(Z){var et=Rt[Z.length];return et||(et=Rt[Z.length]=dt(Z.length)),et.apply(void 0,Z)}function It(Z,et,ft,wt,bt,W,ot){return function(ht,pt,At,Dt,te){switch(arguments.length){case 0:case 1:return 0;case 2:return wt(ht,pt);case 3:return bt(ht,pt,At);case 4:return W(ht,pt,At,Dt);case 5:return ot(ht,pt,At,Dt,te)}for(var $t=new Array(arguments.length),Pt=0;Pt<arguments.length;++Pt)$t[Pt]=arguments[Pt];return Z($t)}}function Nt(){for(;Rt.length<=Q;)Rt.push(dt(Rt.length));A.exports=It.apply(void 0,[Ct].concat(Rt));for(var Z=0;Z<=Q;++Z)A.exports[Z]=Rt[Z]}Nt()})(orientation)),orientation.exports}var robustPnp,hasRequiredRobustPnp;function requireRobustPnp(){if(hasRequiredRobustPnp)return robustPnp;hasRequiredRobustPnp=1,robustPnp=B;var A=requireOrientation();function B(P,z){for(var Y=z[0],Q=z[1],J=P.length,K=1,nt=J,st=0,lt=J-1;st<nt;lt=st++){var vt=P[st],dt=P[lt],kt=vt[1],Et=dt[1];if(Et<kt){if(Et<Q&&Q<kt){var Rt=A(vt,dt,z);if(Rt===0)return 0;K^=0<Rt|0}else if(Q===kt){var Ct=P[(st+1)%J],It=Ct[1];if(kt<It){var Rt=A(vt,dt,z);if(Rt===0)return 0;K^=0<Rt|0}}}else if(kt<Et){if(kt<Q&&Q<Et){var Rt=A(vt,dt,z);if(Rt===0)return 0;K^=Rt<0|0}else if(Q===kt){var Ct=P[(st+1)%J],It=Ct[1];if(It<kt){var Rt=A(vt,dt,z);if(Rt===0)return 0;K^=Rt<0|0}}}else if(Q===kt){var Nt=Math.min(vt[0],dt[0]),Z=Math.max(vt[0],dt[0]);if(st===0){for(;lt>0;){var et=(lt+J-1)%J,ft=P[et];if(ft[1]!==Q)break;var wt=ft[0];Nt=Math.min(Nt,wt),Z=Math.max(Z,wt),lt=et}if(lt===0)return Nt<=Y&&Y<=Z?0:1;nt=lt+1}for(var bt=P[(lt+J-1)%J][1];st+1<nt;){var ft=P[st+1];if(ft[1]!==Q)break;var wt=ft[0];Nt=Math.min(Nt,wt),Z=Math.max(Z,wt),st+=1}if(Nt<=Y&&Y<=Z)return 0;var W=P[(st+1)%J][1];Y<Nt&&bt<Q!=W<Q&&(K^=1)}}return 2*K-1}return robustPnp}var robustPnpExports=requireRobustPnp();const robustPointInPolygon=getDefaultExportFromCjs(robustPnpExports);function checkSize(A){if(!Number.isInteger(A)||A<1)throw new TypeError(`size must be a positive integer. Got ${A}`)}function checkKernel(A){if(A.length===0||A.length%2!==1)throw new RangeError(`kernel must have an odd positive length. Got ${A.length}`)}function checkBorderType(A){if(A!=="CONSTANT"&&A!=="CUT")throw new RangeError(`unexpected border type: ${A}`)}function checkInputLength(A,B){if(A!==B)throw new RangeError(`input length (${A}) does not match setup size (${B})`)}function createArray(A){const B=[];for(var P=0;P<A;P++)B.push(0);return B}class DirectConvolution{constructor(B,P,z="CONSTANT"){checkSize(B),checkKernel(P),checkBorderType(z),this.size=B,this.kernelOffset=(P.length-1)/2,this.outputSize=z==="CONSTANT"?B:B-2*this.kernelOffset,this.output=createArray(this.outputSize),this.kernel=P,this.kernelSize=P.length,this.borderType=z}convolve(B){return checkInputLength(B.length,this.size),this.output.fill(0),this.borderType==="CONSTANT"?this._convolutionBorder0(B):this._convolutionBorderCut(B),this.output}_convolutionBorder0(B){for(let P=0;P<this.size;P++)for(let z=0;z<this.kernelSize;z++)this.output[P]+=interpolateInput(B,P-this.kernelOffset+z)*this.kernel[z]}_convolutionBorderCut(B){for(let P=this.kernelOffset;P<this.size-this.kernelOffset;P++){const z=P-this.kernelOffset;for(let Y=0;Y<this.kernelSize;Y++)this.output[z]+=B[z+Y]*this.kernel[Y]}}}function interpolateInput(A,B){return B<0||B>=A.length?0:A[B]}const BorderType={CUT:"CUT"};class MultivariateLinearRegression{constructor(B,P,z={}){const{intercept:Y=!0,statistics:Q=!0}=z;if(this.statistics=Q,B===!0)this.weights=P.weights,this.inputs=P.inputs,this.outputs=P.outputs,this.intercept=P.intercept;else{B=new Matrix(B),P=new Matrix(P),Y&&B.addColumn(new Array(B.rows).fill(1));let J=B.transpose();const K=J.mmul(B),nt=J.mmul(P),st=new SVD(K).inverse(),lt=nt.transpose().mmul(st).transpose();if(this.weights=lt.to2DArray(),this.inputs=B.columns,this.outputs=P.columns,Y&&this.inputs--,this.intercept=Y,Q){const vt=B.mmul(lt),kt=P.clone().addM(vt.neg()).to2DArray().map(Et=>Math.pow(Et[0],2)).reduce((Et,Rt)=>Et+Rt)/(P.rows-B.columns);this.stdError=Math.sqrt(kt),this.stdErrorMatrix=pseudoInverse(K).mul(kt),this.stdErrors=this.stdErrorMatrix.diagonal().map(Et=>Math.sqrt(Et)),this.tStats=this.weights.map((Et,Rt)=>this.stdErrors[Rt]===0?0:Et[0]/this.stdErrors[Rt])}}}predict(B){if(Array.isArray(B)){if(typeof B[0]=="number")return this._predict(B);if(Array.isArray(B[0])){const P=new Array(B.length);for(let z=0;z<B.length;z++)P[z]=this._predict(B[z]);return P}}else if(Matrix.isMatrix(B)){const P=new Matrix(B.rows,this.outputs);for(let z=0;z<B.rows;z++)P.setRow(z,this._predict(B.getRow(z)));return P}throw new TypeError("x must be a matrix or array of numbers")}_predict(B){const P=new Array(this.outputs);if(this.intercept)for(let z=0;z<this.outputs;z++)P[z]=this.weights[this.inputs][z];else P.fill(0);for(let z=0;z<this.inputs;z++)for(let Y=0;Y<this.outputs;Y++)P[Y]+=this.weights[z][Y]*B[z];return P}score(){throw new Error("score method is not implemented yet")}toJSON(){return{name:"multivariateLinearRegression",weights:this.weights,inputs:this.inputs,outputs:this.outputs,intercept:this.intercept,summary:this.statistics?{regressionStatistics:{standardError:this.stdError,observations:this.outputs},variables:this.weights.map((B,P)=>({label:P===this.weights.length-1?"Intercept":`X Variable ${P+1}`,coefficients:B,standardError:this.stdErrors[P],tStat:this.tStats[P]}))}:void 0}}static load(B){if(B.name!=="multivariateLinearRegression")throw new Error("not a MLR model");return new MultivariateLinearRegression(!0,B)}}var r$1={grad:.9,turn:360,rad:360/(2*Math.PI)},t$1=function(A){return typeof A=="string"?A.length>0:typeof A=="number"},n$1=function(A,B,P){return B===void 0&&(B=0),P===void 0&&(P=Math.pow(10,B)),Math.round(P*A)/P+0},e$1=function(A,B,P){return B===void 0&&(B=0),P===void 0&&(P=1),A>P?P:A>B?A:B},u$1=function(A){return(A=isFinite(A)?A%360:0)>0?A:A+360},a$1=function(A){return{r:e$1(A.r,0,255),g:e$1(A.g,0,255),b:e$1(A.b,0,255),a:e$1(A.a)}},o$1=function(A){return{r:n$1(A.r),g:n$1(A.g),b:n$1(A.b),a:n$1(A.a,3)}},i$1=/^#([0-9a-f]{3,8})$/i,s=function(A){var B=A.toString(16);return B.length<2?"0"+B:B},h$1=function(A){var B=A.r,P=A.g,z=A.b,Y=A.a,Q=Math.max(B,P,z),J=Q-Math.min(B,P,z),K=J?Q===B?(P-z)/J:Q===P?2+(z-B)/J:4+(B-P)/J:0;return{h:60*(K<0?K+6:K),s:Q?J/Q*100:0,v:Q/255*100,a:Y}},b$1=function(A){var B=A.h,P=A.s,z=A.v,Y=A.a;B=B/360*6,P/=100,z/=100;var Q=Math.floor(B),J=z*(1-P),K=z*(1-(B-Q)*P),nt=z*(1-(1-B+Q)*P),st=Q%6;return{r:255*[z,K,J,J,nt,z][st],g:255*[nt,z,z,K,J,J][st],b:255*[J,J,nt,z,z,K][st],a:Y}},g=function(A){return{h:u$1(A.h),s:e$1(A.s,0,100),l:e$1(A.l,0,100),a:e$1(A.a)}},d=function(A){return{h:n$1(A.h),s:n$1(A.s),l:n$1(A.l),a:n$1(A.a,3)}},f=function(A){return b$1((P=(B=A).s,{h:B.h,s:(P*=((z=B.l)<50?z:100-z)/100)>0?2*P/(z+P)*100:0,v:z+P,a:B.a}));var B,P,z},c=function(A){return{h:(B=h$1(A)).h,s:(Y=(200-(P=B.s))*(z=B.v)/100)>0&&Y<200?P*z/100/(Y<=100?Y:200-Y)*100:0,l:Y/2,a:B.a};var B,P,z,Y},l$1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p$1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y={string:[[function(A){var B=i$1.exec(A);return B?(A=B[1]).length<=4?{r:parseInt(A[0]+A[0],16),g:parseInt(A[1]+A[1],16),b:parseInt(A[2]+A[2],16),a:A.length===4?n$1(parseInt(A[3]+A[3],16)/255,2):1}:A.length===6||A.length===8?{r:parseInt(A.substr(0,2),16),g:parseInt(A.substr(2,2),16),b:parseInt(A.substr(4,2),16),a:A.length===8?n$1(parseInt(A.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(A){var B=v.exec(A)||m.exec(A);return B?B[2]!==B[4]||B[4]!==B[6]?null:a$1({r:Number(B[1])/(B[2]?100/255:1),g:Number(B[3])/(B[4]?100/255:1),b:Number(B[5])/(B[6]?100/255:1),a:B[7]===void 0?1:Number(B[7])/(B[8]?100:1)}):null},"rgb"],[function(A){var B=l$1.exec(A)||p$1.exec(A);if(!B)return null;var P,z,Y=g({h:(P=B[1],z=B[2],z===void 0&&(z="deg"),Number(P)*(r$1[z]||1)),s:Number(B[3]),l:Number(B[4]),a:B[5]===void 0?1:Number(B[5])/(B[6]?100:1)});return f(Y)},"hsl"]],object:[[function(A){var B=A.r,P=A.g,z=A.b,Y=A.a,Q=Y===void 0?1:Y;return t$1(B)&&t$1(P)&&t$1(z)?a$1({r:Number(B),g:Number(P),b:Number(z),a:Number(Q)}):null},"rgb"],[function(A){var B=A.h,P=A.s,z=A.l,Y=A.a,Q=Y===void 0?1:Y;if(!t$1(B)||!t$1(P)||!t$1(z))return null;var J=g({h:Number(B),s:Number(P),l:Number(z),a:Number(Q)});return f(J)},"hsl"],[function(A){var B=A.h,P=A.s,z=A.v,Y=A.a,Q=Y===void 0?1:Y;if(!t$1(B)||!t$1(P)||!t$1(z))return null;var J=(function(K){return{h:u$1(K.h),s:e$1(K.s,0,100),v:e$1(K.v,0,100),a:e$1(K.a)}})({h:Number(B),s:Number(P),v:Number(z),a:Number(Q)});return b$1(J)},"hsv"]]},N=function(A,B){for(var P=0;P<B.length;P++){var z=B[P][0](A);if(z)return[z,B[P][1]]}return[null,void 0]},x=function(A){return typeof A=="string"?N(A.trim(),y.string):typeof A=="object"&&A!==null?N(A,y.object):[null,void 0]},M$1=function(A,B){var P=c(A);return{h:P.h,s:e$1(P.s+100*B,0,100),l:P.l,a:P.a}},H=function(A){return(299*A.r+587*A.g+114*A.b)/1e3/255},$=function(A,B){var P=c(A);return{h:P.h,s:P.s,l:e$1(P.l+100*B,0,100),a:P.a}},j=(function(){function A(B){this.parsed=x(B)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return A.prototype.isValid=function(){return this.parsed!==null},A.prototype.brightness=function(){return n$1(H(this.rgba),2)},A.prototype.isDark=function(){return H(this.rgba)<.5},A.prototype.isLight=function(){return H(this.rgba)>=.5},A.prototype.toHex=function(){return B=o$1(this.rgba),P=B.r,z=B.g,Y=B.b,J=(Q=B.a)<1?s(n$1(255*Q)):"","#"+s(P)+s(z)+s(Y)+J;var B,P,z,Y,Q,J},A.prototype.toRgb=function(){return o$1(this.rgba)},A.prototype.toRgbString=function(){return B=o$1(this.rgba),P=B.r,z=B.g,Y=B.b,(Q=B.a)<1?"rgba("+P+", "+z+", "+Y+", "+Q+")":"rgb("+P+", "+z+", "+Y+")";var B,P,z,Y,Q},A.prototype.toHsl=function(){return d(c(this.rgba))},A.prototype.toHslString=function(){return B=d(c(this.rgba)),P=B.h,z=B.s,Y=B.l,(Q=B.a)<1?"hsla("+P+", "+z+"%, "+Y+"%, "+Q+")":"hsl("+P+", "+z+"%, "+Y+"%)";var B,P,z,Y,Q},A.prototype.toHsv=function(){return B=h$1(this.rgba),{h:n$1(B.h),s:n$1(B.s),v:n$1(B.v),a:n$1(B.a,3)};var B},A.prototype.invert=function(){return w$1({r:255-(B=this.rgba).r,g:255-B.g,b:255-B.b,a:B.a});var B},A.prototype.saturate=function(B){return B===void 0&&(B=.1),w$1(M$1(this.rgba,B))},A.prototype.desaturate=function(B){return B===void 0&&(B=.1),w$1(M$1(this.rgba,-B))},A.prototype.grayscale=function(){return w$1(M$1(this.rgba,-1))},A.prototype.lighten=function(B){return B===void 0&&(B=.1),w$1($(this.rgba,B))},A.prototype.darken=function(B){return B===void 0&&(B=.1),w$1($(this.rgba,-B))},A.prototype.rotate=function(B){return B===void 0&&(B=15),this.hue(this.hue()+B)},A.prototype.alpha=function(B){return typeof B=="number"?w$1({r:(P=this.rgba).r,g:P.g,b:P.b,a:B}):n$1(this.rgba.a,3);var P},A.prototype.hue=function(B){var P=c(this.rgba);return typeof B=="number"?w$1({h:B,s:P.s,l:P.l,a:P.a}):n$1(P.h)},A.prototype.isEqual=function(B){return this.toHex()===w$1(B).toHex()},A})(),w$1=function(A){return A instanceof j?A:new j(A)},S=[],k=function(A){A.forEach(function(B){S.indexOf(B)<0&&(B(j,y),S.push(B))})},a=function(A){return typeof A=="string"?A.length>0:typeof A=="number"},t=function(A,B,P){return B===void 0&&(B=0),P===void 0&&(P=Math.pow(10,B)),Math.round(P*A)/P+0},o=function(A,B,P){return B===void 0&&(B=0),P===void 0&&(P=1),A>P?P:A>B?A:B},r=function(A){var B=A/255;return B<.04045?B/12.92:Math.pow((B+.055)/1.055,2.4)},h=function(A){return 255*(A>.0031308?1.055*Math.pow(A,1/2.4)-.055:12.92*A)},n=96.422,p=100,M=82.521,u=function(A){var B,P,z={x:.9555766*(B=A).x+-.0230393*B.y+.0631636*B.z,y:-.0282895*B.x+1.0099416*B.y+.0210077*B.z,z:.0122982*B.x+-.020483*B.y+1.3299098*B.z};return P={r:h(.032404542*z.x-.015371385*z.y-.004985314*z.z),g:h(-.00969266*z.x+.018760108*z.y+41556e-8*z.z),b:h(556434e-9*z.x-.002040259*z.y+.010572252*z.z),a:A.a},{r:o(P.r,0,255),g:o(P.g,0,255),b:o(P.b,0,255),a:o(P.a)}},e=function(A){var B=r(A.r),P=r(A.g),z=r(A.b);return(function(Y){return{x:o(Y.x,0,n),y:o(Y.y,0,p),z:o(Y.z,0,M),a:o(Y.a)}})((function(Y){return{x:1.0478112*Y.x+.0228866*Y.y+-.050127*Y.z,y:.0295424*Y.x+.9904844*Y.y+-.0170491*Y.z,z:-.0092345*Y.x+.0150436*Y.y+.7521316*Y.z,a:Y.a}})({x:100*(.4124564*B+.3575761*P+.1804375*z),y:100*(.2126729*B+.7151522*P+.072175*z),z:100*(.0193339*B+.119192*P+.9503041*z),a:A.a}))},w=216/24389,b=24389/27,i=function(A){var B=A.l,P=A.a,z=A.b,Y=A.alpha,Q=Y===void 0?1:Y;if(!a(B)||!a(P)||!a(z))return null;var J=(function(K){return{l:o(K.l,0,400),a:K.a,b:K.b,alpha:o(K.alpha)}})({l:Number(B),a:Number(P),b:Number(z),alpha:Number(Q)});return l(J)},l=function(A){var B=(A.l+16)/116,P=A.a/500+B,z=B-A.b/200;return u({x:(Math.pow(P,3)>w?Math.pow(P,3):(116*P-16)/b)*n,y:(A.l>8?Math.pow((A.l+16)/116,3):A.l/b)*p,z:(Math.pow(z,3)>w?Math.pow(z,3):(116*z-16)/b)*M,a:A.alpha})};function labPlugin(A,B){A.prototype.toLab=function(){return z=e(this.rgba),Q=z.y/p,J=z.z/M,Y=(Y=z.x/n)>w?Math.cbrt(Y):(b*Y+16)/116,P={l:116*(Q=Q>w?Math.cbrt(Q):(b*Q+16)/116)-16,a:500*(Y-Q),b:200*(Q-(J=J>w?Math.cbrt(J):(b*J+16)/116)),alpha:z.a},{l:t(P.l,2),a:t(P.a,2),b:t(P.b,2),alpha:t(P.alpha,3)};var P,z,Y,Q,J},A.prototype.delta=function(P){P===void 0&&(P="#FFF");var z=P instanceof A?P:new A(P),Y=(function(Q,J){var K=Q.l,nt=Q.a,st=Q.b,lt=J.l,vt=J.a,dt=J.b,kt=180/Math.PI,Et=Math.PI/180,Rt=Math.pow(Math.pow(nt,2)+Math.pow(st,2),.5),Ct=Math.pow(Math.pow(vt,2)+Math.pow(dt,2),.5),It=(K+lt)/2,Nt=Math.pow((Rt+Ct)/2,7),Z=.5*(1-Math.pow(Nt/(Nt+Math.pow(25,7)),.5)),et=nt*(1+Z),ft=vt*(1+Z),wt=Math.pow(Math.pow(et,2)+Math.pow(st,2),.5),bt=Math.pow(Math.pow(ft,2)+Math.pow(dt,2),.5),W=(wt+bt)/2,ot=et===0&&st===0?0:Math.atan2(st,et)*kt,ut=ft===0&&dt===0?0:Math.atan2(dt,ft)*kt;ot<0&&(ot+=360),ut<0&&(ut+=360);var ht=ut-ot,pt=Math.abs(ut-ot);pt>180&&ut<=ot?ht+=360:pt>180&&ut>ot&&(ht-=360);var At=ot+ut;pt<=180?At/=2:At=(ot+ut<360?At+360:At-360)/2;var Dt=1-.17*Math.cos(Et*(At-30))+.24*Math.cos(2*Et*At)+.32*Math.cos(Et*(3*At+6))-.2*Math.cos(Et*(4*At-63)),te=lt-K,$t=bt-wt,Pt=2*Math.sin(Et*ht/2)*Math.pow(wt*bt,.5),St=1+.015*Math.pow(It-50,2)/Math.pow(20+Math.pow(It-50,2),.5),Lt=1+.045*W,Bt=1+.015*W*Dt,se=30*Math.exp(-1*Math.pow((At-275)/25,2)),_t=-2*Math.pow(Nt/(Nt+Math.pow(25,7)),.5)*Math.sin(2*Et*se);return Math.pow(Math.pow(te/1/St,2)+Math.pow($t/1/Lt,2)+Math.pow(Pt/1/Bt,2)+_t*$t*Pt/(1*Lt*1*Bt),.5)})(this.toLab(),z.toLab())/100;return o(t(Y,3))},B.object.push([i,"lab"])}new TextEncoder;(()=>{const A=new Uint8Array(4),B=new Uint32Array(A.buffer);return!((B[0]=1)&A[0])})();var encoder={exports:{}},hasRequiredEncoder;function requireEncoder(){return hasRequiredEncoder||(hasRequiredEncoder=1,(function(A){function B(z){var Y=Math.floor,Q=new Array(64),J=new Array(64),K=new Array(64),nt=new Array(64),st,lt,vt,dt,kt=new Array(65535),Et=new Array(65535),Rt=new Array(64),Ct=new Array(64),It=[],Nt=0,Z=7,et=new Array(64),ft=new Array(64),wt=new Array(64),bt=new Array(256),W=new Array(2048),ot,ut=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ht=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],pt=[0,1,2,3,4,5,6,7,8,9,10,11],At=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Dt=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],te=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$t=[0,1,2,3,4,5,6,7,8,9,10,11],Pt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],St=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Lt(xt){for(var Kt=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Gt=0;Gt<64;Gt++){var Zt=Y((Kt[Gt]*xt+50)/100);Zt<1?Zt=1:Zt>255&&(Zt=255),Q[ut[Gt]]=Zt}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var be=Y((he[me]*xt+50)/100);be<1?be=1:be>255&&(be=255),J[ut[me]]=be}for(var Qt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Xt=0,ne=0;ne<8;ne++)for(var Jt=0;Jt<8;Jt++)K[Xt]=1/(Q[ut[Xt]]*Qt[ne]*Qt[Jt]*8),nt[Xt]=1/(J[ut[Xt]]*Qt[ne]*Qt[Jt]*8),Xt++}function Bt(xt,Kt){for(var Gt=0,Zt=0,he=new Array,me=1;me<=16;me++){for(var be=1;be<=xt[me];be++)he[Kt[Zt]]=[],he[Kt[Zt]][0]=Gt,he[Kt[Zt]][1]=me,Zt++,Gt++;Gt*=2}return he}function se(){st=Bt(ht,pt),lt=Bt(te,$t),vt=Bt(At,Dt),dt=Bt(Pt,St)}function _t(){for(var xt=1,Kt=2,Gt=1;Gt<=15;Gt++){for(var Zt=xt;Zt<Kt;Zt++)Et[32767+Zt]=Gt,kt[32767+Zt]=[],kt[32767+Zt][1]=Gt,kt[32767+Zt][0]=Zt;for(var he=-(Kt-1);he<=-xt;he++)Et[32767+he]=Gt,kt[32767+he]=[],kt[32767+he][1]=Gt,kt[32767+he][0]=Kt-1+he;xt<<=1,Kt<<=1}}function re(){for(var xt=0;xt<256;xt++)W[xt]=19595*xt,W[xt+256>>0]=38470*xt,W[xt+512>>0]=7471*xt+32768,W[xt+768>>0]=-11059*xt,W[xt+1024>>0]=-21709*xt,W[xt+1280>>0]=32768*xt+8421375,W[xt+1536>>0]=-27439*xt,W[xt+1792>>0]=-5329*xt}function Ot(xt){for(var Kt=xt[0],Gt=xt[1]-1;Gt>=0;)Kt&1<<Gt&&(Nt|=1<<Z),Gt--,Z--,Z<0&&(Nt==255?(ct(255),ct(0)):ct(Nt),Z=7,Nt=0)}function ct(xt){It.push(xt)}function Wt(xt){ct(xt>>8&255),ct(xt&255)}function xe(xt,Kt){var Gt,Zt,he,me,be,Qt,Xt,ne,Jt=0,ce,Me=8,le=64;for(ce=0;ce<Me;++ce){Gt=xt[Jt],Zt=xt[Jt+1],he=xt[Jt+2],me=xt[Jt+3],be=xt[Jt+4],Qt=xt[Jt+5],Xt=xt[Jt+6],ne=xt[Jt+7];var $e=Gt+ne,de=Gt-ne,Fe=Zt+Xt,De=Zt-Xt,Ce=he+Qt,Be=he-Qt,Qe=me+be,Je=me-be,Le=$e+Qe,U=$e-Qe,_=Fe+Ce,q=Fe-Ce;xt[Jt]=Le+_,xt[Jt+4]=Le-_;var E=(q+U)*.707106781;xt[Jt+2]=U+E,xt[Jt+6]=U-E,Le=Je+Be,_=Be+De,q=De+de;var C=(Le-q)*.382683433,D=.5411961*Le+C,O=1.306562965*q+C,V=_*.707106781,X=de+V,G=de-V;xt[Jt+5]=G+D,xt[Jt+3]=G-D,xt[Jt+1]=X+O,xt[Jt+7]=X-O,Jt+=8}for(Jt=0,ce=0;ce<Me;++ce){Gt=xt[Jt],Zt=xt[Jt+8],he=xt[Jt+16],me=xt[Jt+24],be=xt[Jt+32],Qt=xt[Jt+40],Xt=xt[Jt+48],ne=xt[Jt+56];var at=Gt+ne,tt=Gt-ne,mt=Zt+Xt,qt=Zt-Xt,gt=he+Qt,yt=he-Qt,Ut=me+be,rt=me-be,Tt=at+Ut,Vt=at-Ut,ie=mt+gt,ae=mt-gt;xt[Jt]=Tt+ie,xt[Jt+32]=Tt-ie;var Te=(ae+Vt)*.707106781;xt[Jt+16]=Vt+Te,xt[Jt+48]=Vt-Te,Tt=rt+yt,ie=yt+qt,ae=qt+tt;var Ht=(Tt-ae)*.382683433,ee=.5411961*Tt+Ht,ke=1.306562965*ae+Ht,it=ie*.707106781,Mt=tt+it,zt=tt-it;xt[Jt+40]=zt+ee,xt[Jt+24]=zt-ee,xt[Jt+8]=Mt+ke,xt[Jt+56]=Mt-ke,Jt++}var Ft;for(ce=0;ce<le;++ce)Ft=xt[ce]*Kt[ce],Rt[ce]=Ft>0?Ft+.5|0:Ft-.5|0;return Rt}function fe(){Wt(65504),Wt(16),ct(74),ct(70),ct(73),ct(70),ct(0),ct(1),ct(1),ct(0),Wt(1),Wt(1),ct(0),ct(0)}function ge(xt){if(xt){Wt(65505),xt[0]===69&&xt[1]===120&&xt[2]===105&&xt[3]===102?Wt(xt.length+2):(Wt(xt.length+5+2),ct(69),ct(120),ct(105),ct(102),ct(0));for(var Kt=0;Kt<xt.length;Kt++)ct(xt[Kt])}}function ye(xt,Kt){Wt(65472),Wt(17),ct(8),Wt(Kt),Wt(xt),ct(3),ct(1),ct(17),ct(0),ct(2),ct(17),ct(1),ct(3),ct(17),ct(1)}function pe(){Wt(65499),Wt(132),ct(0);for(var xt=0;xt<64;xt++)ct(Q[xt]);ct(1);for(var Kt=0;Kt<64;Kt++)ct(J[Kt])}function Ee(){Wt(65476),Wt(418),ct(0);for(var xt=0;xt<16;xt++)ct(ht[xt+1]);for(var Kt=0;Kt<=11;Kt++)ct(pt[Kt]);ct(16);for(var Gt=0;Gt<16;Gt++)ct(At[Gt+1]);for(var Zt=0;Zt<=161;Zt++)ct(Dt[Zt]);ct(1);for(var he=0;he<16;he++)ct(te[he+1]);for(var me=0;me<=11;me++)ct($t[me]);ct(17);for(var be=0;be<16;be++)ct(Pt[be+1]);for(var Qt=0;Qt<=161;Qt++)ct(St[Qt])}function we(xt){typeof xt>"u"||xt.constructor!==Array||xt.forEach(Kt=>{if(typeof Kt=="string"){Wt(65534);var Gt=Kt.length;Wt(Gt+2);var Zt;for(Zt=0;Zt<Gt;Zt++)ct(Kt.charCodeAt(Zt))}})}function Yt(){Wt(65498),Wt(12),ct(3),ct(1),ct(0),ct(2),ct(17),ct(3),ct(17),ct(0),ct(63),ct(0)}function jt(xt,Kt,Gt,Zt,he){for(var me=he[0],be=he[240],Qt,Xt=16,ne=63,Jt=64,ce=xe(xt,Kt),Me=0;Me<Jt;++Me)Ct[ut[Me]]=ce[Me];var le=Ct[0]-Gt;Gt=Ct[0],le==0?Ot(Zt[0]):(Qt=32767+le,Ot(Zt[Et[Qt]]),Ot(kt[Qt]));for(var $e=63;$e>0&&Ct[$e]==0;$e--);if($e==0)return Ot(me),Gt;for(var de=1,Fe;de<=$e;){for(var De=de;Ct[de]==0&&de<=$e;++de);var Ce=de-De;if(Ce>=Xt){Fe=Ce>>4;for(var Be=1;Be<=Fe;++Be)Ot(be);Ce=Ce&15}Qt=32767+Ct[de],Ot(he[(Ce<<4)+Et[Qt]]),Ot(kt[Qt]),de++}return $e!=ne&&Ot(me),Gt}function ve(){for(var xt=String.fromCharCode,Kt=0;Kt<256;Kt++)bt[Kt]=xt(Kt)}this.encode=function(xt,Kt){new Date().getTime(),Kt&&oe(Kt),It=new Array,Nt=0,Z=7,Wt(65496),fe(),we(xt.comments),ge(xt.exifBuffer),pe(),ye(xt.width,xt.height),Ee(),Yt();var Gt=0,Zt=0,he=0;Nt=0,Z=7,this.encode.displayName="_encode_";for(var me=xt.data,be=xt.width,Qt=xt.height,Xt=be*4,ne,Jt=0,ce,Me,le,$e,de,Fe,De,Ce;Jt<Qt;){for(ne=0;ne<Xt;){for($e=Xt*Jt+ne,de=$e,Fe=-1,De=0,Ce=0;Ce<64;Ce++)De=Ce>>3,Fe=(Ce&7)*4,de=$e+De*Xt+Fe,Jt+De>=Qt&&(de-=Xt*(Jt+1+De-Qt)),ne+Fe>=Xt&&(de-=ne+Fe-Xt+4),ce=me[de++],Me=me[de++],le=me[de++],et[Ce]=(W[ce]+W[Me+256>>0]+W[le+512>>0]>>16)-128,ft[Ce]=(W[ce+768>>0]+W[Me+1024>>0]+W[le+1280>>0]>>16)-128,wt[Ce]=(W[ce+1280>>0]+W[Me+1536>>0]+W[le+1792>>0]>>16)-128;Gt=jt(et,K,Gt,st,vt),Zt=jt(ft,nt,Zt,lt,dt),he=jt(wt,nt,he,lt,dt),ne+=32}Jt+=8}if(Z>=0){var Be=[];Be[1]=Z+1,Be[0]=(1<<Z+1)-1,Ot(Be)}return Wt(65497),Buffer.from(It)};function oe(xt){if(xt<=0&&(xt=1),xt>100&&(xt=100),ot!=xt){var Kt=0;xt<50?Kt=Math.floor(5e3/xt):Kt=Math.floor(200-xt*2),Lt(Kt),ot=xt}}function ue(){var xt=new Date().getTime();z||(z=50),ve(),se(),_t(),re(),oe(z),new Date().getTime()-xt}ue()}A.exports=P;function P(z,Y){typeof Y>"u"&&(Y=50);var Q=new B(Y),J=Q.encode(z,Y);return{data:J,width:z.width,height:z.height}}})(encoder)),encoder.exports}var decoder={exports:{}},hasRequiredDecoder;function requireDecoder(){return hasRequiredDecoder||(hasRequiredDecoder=1,(function(A){var B=(function(){var Y=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),Q=4017,J=799,K=3406,nt=2276,st=1567,lt=3784,vt=5793,dt=2896;function kt(){}function Et(ft,wt){for(var bt=0,W=[],ot,ut,ht=16;ht>0&&!ft[ht-1];)ht--;W.push({children:[],index:0});var pt=W[0],At;for(ot=0;ot<ht;ot++){for(ut=0;ut<ft[ot];ut++){for(pt=W.pop(),pt.children[pt.index]=wt[bt];pt.index>0;){if(W.length===0)throw new Error("Could not recreate Huffman Table");pt=W.pop()}for(pt.index++,W.push(pt);W.length<=ot;)W.push(At={children:[],index:0}),pt.children[pt.index]=At.children,pt=At;bt++}ot+1<ht&&(W.push(At={children:[],index:0}),pt.children[pt.index]=At.children,pt=At)}return W[0].children}function Rt(ft,wt,bt,W,ot,ut,ht,pt,At,Dt){bt.precision,bt.samplesPerLine,bt.scanLines;var te=bt.mcusPerLine,$t=bt.progressive;bt.maxH,bt.maxV;var Pt=wt,St=0,Lt=0;function Bt(){if(Lt>0)return Lt--,St>>Lt&1;if(St=ft[wt++],St==255){var Qt=ft[wt++];if(Qt)throw new Error("unexpected marker: "+(St<<8|Qt).toString(16))}return Lt=7,St>>>7}function se(Qt){for(var Xt=Qt,ne;(ne=Bt())!==null;){if(Xt=Xt[ne],typeof Xt=="number")return Xt;if(typeof Xt!="object")throw new Error("invalid huffman sequence")}return null}function _t(Qt){for(var Xt=0;Qt>0;){var ne=Bt();if(ne===null)return;Xt=Xt<<1|ne,Qt--}return Xt}function re(Qt){var Xt=_t(Qt);return Xt>=1<<Qt-1?Xt:Xt+(-1<<Qt)+1}function Ot(Qt,Xt){var ne=se(Qt.huffmanTableDC),Jt=ne===0?0:re(ne);Xt[0]=Qt.pred+=Jt;for(var ce=1;ce<64;){var Me=se(Qt.huffmanTableAC),le=Me&15,$e=Me>>4;if(le===0){if($e<15)break;ce+=16;continue}ce+=$e;var de=Y[ce];Xt[de]=re(le),ce++}}function ct(Qt,Xt){var ne=se(Qt.huffmanTableDC),Jt=ne===0?0:re(ne)<<At;Xt[0]=Qt.pred+=Jt}function Wt(Qt,Xt){Xt[0]|=Bt()<<At}var xe=0;function fe(Qt,Xt){if(xe>0){xe--;return}for(var ne=ut,Jt=ht;ne<=Jt;){var ce=se(Qt.huffmanTableAC),Me=ce&15,le=ce>>4;if(Me===0){if(le<15){xe=_t(le)+(1<<le)-1;break}ne+=16;continue}ne+=le;var $e=Y[ne];Xt[$e]=re(Me)*(1<<At),ne++}}var ge=0,ye;function pe(Qt,Xt){for(var ne=ut,Jt=ht,ce=0;ne<=Jt;){var Me=Y[ne],le=Xt[Me]<0?-1:1;switch(ge){case 0:var $e=se(Qt.huffmanTableAC),de=$e&15,ce=$e>>4;if(de===0)ce<15?(xe=_t(ce)+(1<<ce),ge=4):(ce=16,ge=1);else{if(de!==1)throw new Error("invalid ACn encoding");ye=re(de),ge=ce?2:3}continue;case 1:case 2:Xt[Me]?Xt[Me]+=(Bt()<<At)*le:(ce--,ce===0&&(ge=ge==2?3:0));break;case 3:Xt[Me]?Xt[Me]+=(Bt()<<At)*le:(Xt[Me]=ye<<At,ge=0);break;case 4:Xt[Me]&&(Xt[Me]+=(Bt()<<At)*le);break}ne++}ge===4&&(xe--,xe===0&&(ge=0))}function Ee(Qt,Xt,ne,Jt,ce){var Me=ne/te|0,le=ne%te,$e=Me*Qt.v+Jt,de=le*Qt.h+ce;Qt.blocks[$e]===void 0&&Dt.tolerantDecoding||Xt(Qt,Qt.blocks[$e][de])}function we(Qt,Xt,ne){var Jt=ne/Qt.blocksPerLine|0,ce=ne%Qt.blocksPerLine;Qt.blocks[Jt]===void 0&&Dt.tolerantDecoding||Xt(Qt,Qt.blocks[Jt][ce])}var Yt=W.length,jt,ve,oe,ue,xt,Kt;$t?ut===0?Kt=pt===0?ct:Wt:Kt=pt===0?fe:pe:Kt=Ot;var Gt=0,Zt,he;Yt==1?he=W[0].blocksPerLine*W[0].blocksPerColumn:he=te*bt.mcusPerColumn,ot||(ot=he);for(var me,be;Gt<he;){for(ve=0;ve<Yt;ve++)W[ve].pred=0;if(xe=0,Yt==1)for(jt=W[0],xt=0;xt<ot;xt++)we(jt,Kt,Gt),Gt++;else for(xt=0;xt<ot;xt++){for(ve=0;ve<Yt;ve++)for(jt=W[ve],me=jt.h,be=jt.v,oe=0;oe<be;oe++)for(ue=0;ue<me;ue++)Ee(jt,Kt,Gt,oe,ue);if(Gt++,Gt===he)break}if(Gt===he)do{if(ft[wt]===255&&ft[wt+1]!==0)break;wt+=1}while(wt<ft.length-2);if(Lt=0,Zt=ft[wt]<<8|ft[wt+1],Zt<65280)throw new Error("marker was not found");if(Zt>=65488&&Zt<=65495)wt+=2;else break}return wt-Pt}function Ct(ft,wt){var bt=[],W=wt.blocksPerLine,ot=wt.blocksPerColumn,ut=W<<3,ht=new Int32Array(64),pt=new Uint8Array(64);function At(_t,re,Ot){var ct=wt.quantizationTable,Wt,xe,fe,ge,ye,pe,Ee,we,Yt,jt=Ot,ve;for(ve=0;ve<64;ve++)jt[ve]=_t[ve]*ct[ve];for(ve=0;ve<8;++ve){var oe=8*ve;if(jt[1+oe]==0&&jt[2+oe]==0&&jt[3+oe]==0&&jt[4+oe]==0&&jt[5+oe]==0&&jt[6+oe]==0&&jt[7+oe]==0){Yt=vt*jt[0+oe]+512>>10,jt[0+oe]=Yt,jt[1+oe]=Yt,jt[2+oe]=Yt,jt[3+oe]=Yt,jt[4+oe]=Yt,jt[5+oe]=Yt,jt[6+oe]=Yt,jt[7+oe]=Yt;continue}Wt=vt*jt[0+oe]+128>>8,xe=vt*jt[4+oe]+128>>8,fe=jt[2+oe],ge=jt[6+oe],ye=dt*(jt[1+oe]-jt[7+oe])+128>>8,we=dt*(jt[1+oe]+jt[7+oe])+128>>8,pe=jt[3+oe]<<4,Ee=jt[5+oe]<<4,Yt=Wt-xe+1>>1,Wt=Wt+xe+1>>1,xe=Yt,Yt=fe*lt+ge*st+128>>8,fe=fe*st-ge*lt+128>>8,ge=Yt,Yt=ye-Ee+1>>1,ye=ye+Ee+1>>1,Ee=Yt,Yt=we+pe+1>>1,pe=we-pe+1>>1,we=Yt,Yt=Wt-ge+1>>1,Wt=Wt+ge+1>>1,ge=Yt,Yt=xe-fe+1>>1,xe=xe+fe+1>>1,fe=Yt,Yt=ye*nt+we*K+2048>>12,ye=ye*K-we*nt+2048>>12,we=Yt,Yt=pe*J+Ee*Q+2048>>12,pe=pe*Q-Ee*J+2048>>12,Ee=Yt,jt[0+oe]=Wt+we,jt[7+oe]=Wt-we,jt[1+oe]=xe+Ee,jt[6+oe]=xe-Ee,jt[2+oe]=fe+pe,jt[5+oe]=fe-pe,jt[3+oe]=ge+ye,jt[4+oe]=ge-ye}for(ve=0;ve<8;++ve){var ue=ve;if(jt[8+ue]==0&&jt[16+ue]==0&&jt[24+ue]==0&&jt[32+ue]==0&&jt[40+ue]==0&&jt[48+ue]==0&&jt[56+ue]==0){Yt=vt*Ot[ve+0]+8192>>14,jt[0+ue]=Yt,jt[8+ue]=Yt,jt[16+ue]=Yt,jt[24+ue]=Yt,jt[32+ue]=Yt,jt[40+ue]=Yt,jt[48+ue]=Yt,jt[56+ue]=Yt;continue}Wt=vt*jt[0+ue]+2048>>12,xe=vt*jt[32+ue]+2048>>12,fe=jt[16+ue],ge=jt[48+ue],ye=dt*(jt[8+ue]-jt[56+ue])+2048>>12,we=dt*(jt[8+ue]+jt[56+ue])+2048>>12,pe=jt[24+ue],Ee=jt[40+ue],Yt=Wt-xe+1>>1,Wt=Wt+xe+1>>1,xe=Yt,Yt=fe*lt+ge*st+2048>>12,fe=fe*st-ge*lt+2048>>12,ge=Yt,Yt=ye-Ee+1>>1,ye=ye+Ee+1>>1,Ee=Yt,Yt=we+pe+1>>1,pe=we-pe+1>>1,we=Yt,Yt=Wt-ge+1>>1,Wt=Wt+ge+1>>1,ge=Yt,Yt=xe-fe+1>>1,xe=xe+fe+1>>1,fe=Yt,Yt=ye*nt+we*K+2048>>12,ye=ye*K-we*nt+2048>>12,we=Yt,Yt=pe*J+Ee*Q+2048>>12,pe=pe*Q-Ee*J+2048>>12,Ee=Yt,jt[0+ue]=Wt+we,jt[56+ue]=Wt-we,jt[8+ue]=xe+Ee,jt[48+ue]=xe-Ee,jt[16+ue]=fe+pe,jt[40+ue]=fe-pe,jt[24+ue]=ge+ye,jt[32+ue]=ge-ye}for(ve=0;ve<64;++ve){var xt=128+(jt[ve]+8>>4);re[ve]=xt<0?0:xt>255?255:xt}}et(ut*ot*8);for(var Dt,te,$t=0;$t<ot;$t++){var Pt=$t<<3;for(Dt=0;Dt<8;Dt++)bt.push(new Uint8Array(ut));for(var St=0;St<W;St++){At(wt.blocks[$t][St],pt,ht);var Lt=0,Bt=St<<3;for(te=0;te<8;te++){var se=bt[Pt+te];for(Dt=0;Dt<8;Dt++)se[Bt+Dt]=pt[Lt++]}}}return bt}function It(ft){return ft<0?0:ft>255?255:ft}kt.prototype={load:function(wt){var bt=new XMLHttpRequest;bt.open("GET",wt,!0),bt.responseType="arraybuffer",bt.onload=(function(){var W=new Uint8Array(bt.response||bt.mozResponseArrayBuffer);this.parse(W),this.onload&&this.onload()}).bind(this),bt.send(null)},parse:function(wt){var bt=this.opts.maxResolutionInMP*1e3*1e3,W=0;wt.length;function ot(){var le=wt[W]<<8|wt[W+1];return W+=2,le}function ut(){var le=ot(),$e=wt.subarray(W,W+le-2);return W+=$e.length,$e}function ht(le){var $e=1,de=1,Fe,De;for(De in le.components)le.components.hasOwnProperty(De)&&(Fe=le.components[De],$e<Fe.h&&($e=Fe.h),de<Fe.v&&(de=Fe.v));var Ce=Math.ceil(le.samplesPerLine/8/$e),Be=Math.ceil(le.scanLines/8/de);for(De in le.components)if(le.components.hasOwnProperty(De)){Fe=le.components[De];var Qe=Math.ceil(Math.ceil(le.samplesPerLine/8)*Fe.h/$e),Je=Math.ceil(Math.ceil(le.scanLines/8)*Fe.v/de),Le=Ce*Fe.h,U=Be*Fe.v,_=U*Le,q=[];et(_*256);for(var E=0;E<U;E++){for(var C=[],D=0;D<Le;D++)C.push(new Int32Array(64));q.push(C)}Fe.blocksPerLine=Qe,Fe.blocksPerColumn=Je,Fe.blocks=q}le.maxH=$e,le.maxV=de,le.mcusPerLine=Ce,le.mcusPerColumn=Be}var pt=null,At=null,Dt,te,$t=[],Pt=[],St=[],Lt=[],Bt=ot(),se=-1;if(this.comments=[],Bt!=65496)throw new Error("SOI not found");for(Bt=ot();Bt!=65497;){var _t,re;switch(Bt){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var Ot=ut();if(Bt===65534){var ct=String.fromCharCode.apply(null,Ot);this.comments.push(ct)}Bt===65504&&Ot[0]===74&&Ot[1]===70&&Ot[2]===73&&Ot[3]===70&&Ot[4]===0&&(pt={version:{major:Ot[5],minor:Ot[6]},densityUnits:Ot[7],xDensity:Ot[8]<<8|Ot[9],yDensity:Ot[10]<<8|Ot[11],thumbWidth:Ot[12],thumbHeight:Ot[13],thumbData:Ot.subarray(14,14+3*Ot[12]*Ot[13])}),Bt===65505&&Ot[0]===69&&Ot[1]===120&&Ot[2]===105&&Ot[3]===102&&Ot[4]===0&&(this.exifBuffer=Ot.subarray(5,Ot.length)),Bt===65518&&Ot[0]===65&&Ot[1]===100&&Ot[2]===111&&Ot[3]===98&&Ot[4]===101&&Ot[5]===0&&(At={version:Ot[6],flags0:Ot[7]<<8|Ot[8],flags1:Ot[9]<<8|Ot[10],transformCode:Ot[11]});break;case 65499:for(var Wt=ot(),xe=Wt+W-2;W<xe;){var fe=wt[W++];et(256);var ge=new Int32Array(64);if(fe>>4===0)for(re=0;re<64;re++){var ye=Y[re];ge[ye]=wt[W++]}else if(fe>>4===1)for(re=0;re<64;re++){var ye=Y[re];ge[ye]=ot()}else throw new Error("DQT: invalid table spec");$t[fe&15]=ge}break;case 65472:case 65473:case 65474:ot(),Dt={},Dt.extended=Bt===65473,Dt.progressive=Bt===65474,Dt.precision=wt[W++],Dt.scanLines=ot(),Dt.samplesPerLine=ot(),Dt.components={},Dt.componentsOrder=[];var pe=Dt.scanLines*Dt.samplesPerLine;if(pe>bt){var Ee=Math.ceil((pe-bt)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${Ee}MP`)}var we=wt[W++],Yt;for(_t=0;_t<we;_t++){Yt=wt[W];var jt=wt[W+1]>>4,ve=wt[W+1]&15,oe=wt[W+2];if(jt<=0||ve<=0)throw new Error("Invalid sampling factor, expected values above 0");Dt.componentsOrder.push(Yt),Dt.components[Yt]={h:jt,v:ve,quantizationIdx:oe},W+=3}ht(Dt),Pt.push(Dt);break;case 65476:var ue=ot();for(_t=2;_t<ue;){var xt=wt[W++],Kt=new Uint8Array(16),Gt=0;for(re=0;re<16;re++,W++)Gt+=Kt[re]=wt[W];et(16+Gt);var Zt=new Uint8Array(Gt);for(re=0;re<Gt;re++,W++)Zt[re]=wt[W];_t+=17+Gt,(xt>>4===0?Lt:St)[xt&15]=Et(Kt,Zt)}break;case 65501:ot(),te=ot();break;case 65500:ot(),ot();break;case 65498:ot();var he=wt[W++],me=[],be;for(_t=0;_t<he;_t++){be=Dt.components[wt[W++]];var Qt=wt[W++];be.huffmanTableDC=Lt[Qt>>4],be.huffmanTableAC=St[Qt&15],me.push(be)}var Xt=wt[W++],ne=wt[W++],Jt=wt[W++],ce=Rt(wt,W,Dt,me,te,Xt,ne,Jt>>4,Jt&15,this.opts);W+=ce;break;case 65535:wt[W]!==255&&W--;break;default:if(wt[W-3]==255&&wt[W-2]>=192&&wt[W-2]<=254){W-=3;break}else if(Bt===224||Bt==225){if(se!==-1)throw new Error(`first unknown JPEG marker at offset ${se.toString(16)}, second unknown JPEG marker ${Bt.toString(16)} at offset ${(W-1).toString(16)}`);se=W-1;const le=ot();if(wt[W+le-2]===255){W+=le-2;break}}throw new Error("unknown JPEG marker "+Bt.toString(16))}Bt=ot()}if(Pt.length!=1)throw new Error("only single frame JPEGs supported");for(var _t=0;_t<Pt.length;_t++){var Me=Pt[_t].components;for(var re in Me)Me[re].quantizationTable=$t[Me[re].quantizationIdx],delete Me[re].quantizationIdx}this.width=Dt.samplesPerLine,this.height=Dt.scanLines,this.jfif=pt,this.adobe=At,this.components=[];for(var _t=0;_t<Dt.componentsOrder.length;_t++){var be=Dt.components[Dt.componentsOrder[_t]];this.components.push({lines:Ct(Dt,be),scaleX:be.h/Dt.maxH,scaleY:be.v/Dt.maxV})}},getData:function(wt,bt){var W=this.width/wt,ot=this.height/bt,ut,ht,pt,At,Dt,te,$t,Pt,St,Lt,Bt=0,se,_t,re,Ot,ct,Wt,xe,fe,ge,ye,pe,Ee=wt*bt*this.components.length;et(Ee);var we=new Uint8Array(Ee);switch(this.components.length){case 1:for(ut=this.components[0],Lt=0;Lt<bt;Lt++)for(Dt=ut.lines[0|Lt*ut.scaleY*ot],St=0;St<wt;St++)se=Dt[0|St*ut.scaleX*W],we[Bt++]=se;break;case 2:for(ut=this.components[0],ht=this.components[1],Lt=0;Lt<bt;Lt++)for(Dt=ut.lines[0|Lt*ut.scaleY*ot],te=ht.lines[0|Lt*ht.scaleY*ot],St=0;St<wt;St++)se=Dt[0|St*ut.scaleX*W],we[Bt++]=se,se=te[0|St*ht.scaleX*W],we[Bt++]=se;break;case 3:for(pe=!0,this.adobe&&this.adobe.transformCode?pe=!0:typeof this.opts.colorTransform<"u"&&(pe=!!this.opts.colorTransform),ut=this.components[0],ht=this.components[1],pt=this.components[2],Lt=0;Lt<bt;Lt++)for(Dt=ut.lines[0|Lt*ut.scaleY*ot],te=ht.lines[0|Lt*ht.scaleY*ot],$t=pt.lines[0|Lt*pt.scaleY*ot],St=0;St<wt;St++)pe?(se=Dt[0|St*ut.scaleX*W],_t=te[0|St*ht.scaleX*W],re=$t[0|St*pt.scaleX*W],fe=It(se+1.402*(re-128)),ge=It(se-.3441363*(_t-128)-.71413636*(re-128)),ye=It(se+1.772*(_t-128))):(fe=Dt[0|St*ut.scaleX*W],ge=te[0|St*ht.scaleX*W],ye=$t[0|St*pt.scaleX*W]),we[Bt++]=fe,we[Bt++]=ge,we[Bt++]=ye;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(pe=!1,this.adobe&&this.adobe.transformCode?pe=!0:typeof this.opts.colorTransform<"u"&&(pe=!!this.opts.colorTransform),ut=this.components[0],ht=this.components[1],pt=this.components[2],At=this.components[3],Lt=0;Lt<bt;Lt++)for(Dt=ut.lines[0|Lt*ut.scaleY*ot],te=ht.lines[0|Lt*ht.scaleY*ot],$t=pt.lines[0|Lt*pt.scaleY*ot],Pt=At.lines[0|Lt*At.scaleY*ot],St=0;St<wt;St++)pe?(se=Dt[0|St*ut.scaleX*W],_t=te[0|St*ht.scaleX*W],re=$t[0|St*pt.scaleX*W],Ot=Pt[0|St*At.scaleX*W],ct=255-It(se+1.402*(re-128)),Wt=255-It(se-.3441363*(_t-128)-.71413636*(re-128)),xe=255-It(se+1.772*(_t-128))):(ct=Dt[0|St*ut.scaleX*W],Wt=te[0|St*ht.scaleX*W],xe=$t[0|St*pt.scaleX*W],Ot=Pt[0|St*At.scaleX*W]),we[Bt++]=255-ct,we[Bt++]=255-Wt,we[Bt++]=255-xe,we[Bt++]=255-Ot;break;default:throw new Error("Unsupported color mode")}return we},copyToImageData:function(wt,bt){var W=wt.width,ot=wt.height,ut=wt.data,ht=this.getData(W,ot),pt=0,At=0,Dt,te,$t,Pt,St,Lt,Bt,se,_t;switch(this.components.length){case 1:for(te=0;te<ot;te++)for(Dt=0;Dt<W;Dt++)$t=ht[pt++],ut[At++]=$t,ut[At++]=$t,ut[At++]=$t,bt&&(ut[At++]=255);break;case 3:for(te=0;te<ot;te++)for(Dt=0;Dt<W;Dt++)Bt=ht[pt++],se=ht[pt++],_t=ht[pt++],ut[At++]=Bt,ut[At++]=se,ut[At++]=_t,bt&&(ut[At++]=255);break;case 4:for(te=0;te<ot;te++)for(Dt=0;Dt<W;Dt++)St=ht[pt++],Lt=ht[pt++],$t=ht[pt++],Pt=ht[pt++],Bt=255-It(St*(1-Pt/255)+Pt),se=255-It(Lt*(1-Pt/255)+Pt),_t=255-It($t*(1-Pt/255)+Pt),ut[At++]=Bt,ut[At++]=se,ut[At++]=_t,bt&&(ut[At++]=255);break;default:throw new Error("Unsupported color mode")}}};var Nt=0,Z=0;function et(ft=0){var wt=Nt+ft;if(wt>Z){var bt=Math.ceil((wt-Z)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${bt}MB`)}Nt=wt}return kt.resetMaxMemoryUsage=function(ft){Nt=0,Z=ft},kt.getBytesAllocated=function(){return Nt},kt.requestMemoryAllocation=et,kt})();A.exports=P;function P(z,Y={}){var Q={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},J={...Q,...Y},K=new Uint8Array(z),nt=new B;nt.opts=J,B.resetMaxMemoryUsage(J.maxMemoryUsageInMB*1024*1024),nt.parse(K);var st=J.formatAsRGBA?4:3,lt=nt.width*nt.height*st;try{B.requestMemoryAllocation(lt);var vt={width:nt.width,height:nt.height,exifBuffer:nt.exifBuffer,data:J.useTArray?new Uint8Array(lt):Buffer.alloc(lt)};nt.comments.length>0&&(vt.comments=nt.comments)}catch(dt){throw dt instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+lt):dt instanceof ReferenceError&&dt.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):dt}return nt.copyToImageData(vt,J.formatAsRGBA),vt}})(decoder)),decoder.exports}var jpegJs,hasRequiredJpegJs;function requireJpegJs(){if(hasRequiredJpegJs)return jpegJs;hasRequiredJpegJs=1;var A=requireEncoder(),B=requireDecoder();return jpegJs={encode:A,decode:B},jpegJs}requireJpegJs();function zero$1(A){let B=A.length;for(;--B>=0;)A[B]=0}const MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const _utf8len=new Uint8Array(256);for(let A=0;A<256;A++)_utf8len[A]=A>=252?6:A>=248?5:A>=240?4:A>=224?3:A>=192?2:1;_utf8len[254]=_utf8len[254]=1;const uint16$1=new Uint16Array([255]),uint8$1=new Uint8Array(uint16$1.buffer);uint8$1[0];const uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer);uint8[0];new TextDecoder("latin1");Uint8Array.from([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]);const base64codes=Uint8Array.from([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),base64codes1=new Uint32Array(4096);for(let A=0;A<64;A++)for(let B=0;B<64;B++){const P=A<<2|(B&48)>>4|(B&15)<<8;base64codes1[P]=base64codes[A]|base64codes[B]<<8}const base64codes2=new Uint32Array(4096);for(let A=0;A<64;A++)for(let B=0;B<64;B++){const P=A<<6|B;base64codes2[P]=base64codes[A]<<16|base64codes[B]<<24}var imageType={exports:{}},fileType={exports:{}},hasRequiredFileType;function requireFileType(){return hasRequiredFileType||(hasRequiredFileType=1,(function(module){const toBytes=A=>[...A].map(B=>B.charCodeAt(0)),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(A,B=0){let P=A[B],z=1,Y=0;for(;++Y<8;)z*=256,P+=A[B+Y]*z;return P}const fileType=A=>{if(!(A instanceof Uint8Array||A instanceof ArrayBuffer||Buffer.isBuffer(A)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof A}\``);const B=A instanceof Uint8Array?A:new Uint8Array(A);if(!(B&&B.length>1))return null;const P=(Y,Q)=>{Q=Object.assign({offset:0},Q);for(let J=0;J<Y.length;J++)if(Q.mask){if(Y[J]!==(Q.mask[J]&B[J+Q.offset]))return!1}else if(Y[J]!==B[J+Q.offset])return!1;return!0},z=(Y,Q)=>P(toBytes(Y),Q);if(P([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(P([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(P([71,73,70]))return{ext:"gif",mime:"image/gif"};if(P([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(P([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((P([73,73,42,0])||P([77,77,0,42]))&&P([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(P([73,73,42,0])||P([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(P([66,77]))return{ext:"bmp",mime:"image/bmp"};if(P([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(P([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(P([80,75,3,4])){if(P([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(P(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(z("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(z("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(z("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const Y=(nt,st=0)=>nt.findIndex((lt,vt,dt)=>vt>=st&&dt[vt]===80&&dt[vt+1]===75&&dt[vt+2]===3&&dt[vt+3]===4);let Q=0,J=!1,K=null;do{const nt=Q+30;if(J||(J=P(oxmlContentTypes,{offset:nt})||P(oxmlRels,{offset:nt})),K||(z("word/",{offset:nt})?K={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:z("ppt/",{offset:nt})?K={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:z("xl/",{offset:nt})&&(K={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),J&&K)return K;Q=Y(B,nt)}while(Q>=0);if(K)return K}if(P([80,75])&&(B[2]===3||B[2]===5||B[2]===7)&&(B[3]===4||B[3]===6||B[3]===8))return{ext:"zip",mime:"application/zip"};if(P([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(P([82,97,114,33,26,7])&&(B[6]===0||B[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(P([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(P([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(P([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(P([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(P([51,103,112,53])||P([0,0,0])&&P([102,116,121,112],{offset:4})&&(P([109,112,52,49],{offset:8})||P([109,112,52,50],{offset:8})||P([105,115,111,109],{offset:8})||P([105,115,111,50],{offset:8})||P([109,109,112,52],{offset:8})||P([77,52,86],{offset:8})||P([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(P([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(P([26,69,223,163])){const Y=B.subarray(4,4100),Q=Y.findIndex((J,K,nt)=>nt[K]===66&&nt[K+1]===130);if(Q!==-1){const J=Q+3,K=nt=>[...nt].every((st,lt)=>Y[J+lt]===st.charCodeAt(0));if(K("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(K("webm"))return{ext:"webm",mime:"video/webm"}}}if(P([0,0,0,20,102,116,121,112,113,116,32,32])||P([102,114,101,101],{offset:4})||P([102,116,121,112,113,116,32,32],{offset:4})||P([109,100,97,116],{offset:4})||P([109,111,111,118],{offset:4})||P([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(P([82,73,70,70])){if(P([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(P([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(P([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(P([48,38,178,117,142,102,207,17,166,217])){let Y=30;do{const Q=readUInt64LE(B,Y+16);if(P([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:Y})){if(P([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:Y+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(P([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:Y+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}Y+=Q}while(Y+24<=B.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(P([0,0,1,186])||P([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(P([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let Y=0;Y<2&&Y<B.length-16;Y++){if(P([73,68,51],{offset:Y})||P([255,226],{offset:Y,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(P([255,228],{offset:Y,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(P([255,248],{offset:Y,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(P([255,240],{offset:Y,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(P([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(P([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(P([79,103,103,83]))return P([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:P([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:P([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:P([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:P([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(P([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(P([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(P([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(P([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(P([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(P([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((B[0]===67||B[0]===70)&&P([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(P([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(P([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(P([119,79,70,70])&&(P([0,1,0,0],{offset:4})||P([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(P([119,79,70,50])&&(P([0,1,0,0],{offset:4})||P([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(P([76,80],{offset:34})&&(P([0,0,1],{offset:8})||P([1,0,2],{offset:8})||P([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(P([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(P([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(P([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(P([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(P([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(P([37,33]))return{ext:"ps",mime:"application/postscript"};if(P([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(P([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(P([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(P([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(P([77,83,67,70])||P([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(P([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(P([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(P([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(P([31,160])||P([31,157]))return{ext:"Z",mime:"application/x-compress"};if(P([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(P([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(P([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(P([71],{offset:4})&&(P([71],{offset:192})||P([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(P([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(P([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(P([0,0,0,12,106,80,32,32,13,10,135,10])){if(P([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(P([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(P([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(P([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(P([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(z("<?xml "))return{ext:"xml",mime:"application/xml"};if(P([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(P([102,116,121,112],{offset:4})){if(P([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(P([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(P([104,101,105,99],{offset:8})||P([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(P([104,101,118,99],{offset:8})||P([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return P([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:P([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:P([77,80,43])?{ext:"mpc",mime:"audio/x-musepack"}:P([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:P([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:P([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:P([212,195,178,161])||P([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",()=>{const A=new stream.PassThrough,B=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{A.fileType=fileType(B)}catch(P){reject(P)}readableStream.unshift(B),stream.pipeline?resolve(stream.pipeline(readableStream,A,()=>{})):resolve(readableStream.pipe(A))})})})(fileType)),fileType.exports}var hasRequiredImageType;function requireImageType(){if(hasRequiredImageType)return imageType.exports;hasRequiredImageType=1;const A=requireFileType(),B=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),P=z=>{const Y=A(z);return B.has(Y&&Y.ext)?Y:null};return imageType.exports=P,imageType.exports.default=P,Object.defineProperty(P,"minimumBytes",{value:A.minimumBytes}),imageType.exports}requireImageType();function commonjsRequire(A){throw new Error('Could not dynamically require "'+A+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var priorityQueue={exports:{}},hasRequiredPriorityQueue;function requirePriorityQueue(){return hasRequiredPriorityQueue||(hasRequiredPriorityQueue=1,(function(A,B){(function(P){A.exports=P()})(function(){return(function P(z,Y,Q){function J(st,lt){if(!Y[st]){if(!z[st]){var vt=typeof commonjsRequire=="function"&&commonjsRequire;if(!lt&&vt)return vt(st,!0);if(K)return K(st,!0);var dt=new Error("Cannot find module '"+st+"'");throw dt.code="MODULE_NOT_FOUND",dt}var kt=Y[st]={exports:{}};z[st][0].call(kt.exports,function(Et){var Rt=z[st][1][Et];return J(Rt||Et)},kt,kt.exports,P,z,Y,Q)}return Y[st].exports}for(var K=typeof commonjsRequire=="function"&&commonjsRequire,nt=0;nt<Q.length;nt++)J(Q[nt]);return J})({1:[function(P,z,Y){var Q,J,K,nt,st,lt=function(dt,kt){for(var Et in kt)vt.call(kt,Et)&&(dt[Et]=kt[Et]);function Rt(){this.constructor=dt}return Rt.prototype=kt.prototype,dt.prototype=new Rt,dt.__super__=kt.prototype,dt},vt={}.hasOwnProperty;Q=P("./PriorityQueue/AbstractPriorityQueue"),J=P("./PriorityQueue/ArrayStrategy"),nt=P("./PriorityQueue/BinaryHeapStrategy"),K=P("./PriorityQueue/BHeapStrategy"),st=(function(dt){lt(kt,dt);function kt(Et){Et||(Et={}),Et.strategy||(Et.strategy=nt),Et.comparator||(Et.comparator=function(Rt,Ct){return(Rt||0)-(Ct||0)}),kt.__super__.constructor.call(this,Et)}return kt})(Q),st.ArrayStrategy=J,st.BinaryHeapStrategy=nt,st.BHeapStrategy=K,z.exports=st},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(P,z,Y){z.exports=(function(){function Q(J){var K;if(J?.strategy==null)throw"Must pass options.strategy, a strategy";if(J?.comparator==null)throw"Must pass options.comparator, a comparator";this.priv=new J.strategy(J),this.length=(J!=null&&(K=J.initialValues)!=null?K.length:void 0)||0}return Q.prototype.queue=function(J){this.length++,this.priv.queue(J)},Q.prototype.dequeue=function(J){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},Q.prototype.peek=function(J){if(!this.length)throw"Empty queue";return this.priv.peek()},Q.prototype.clear=function(){return this.length=0,this.priv.clear()},Q})()},{}],3:[function(P,z,Y){var Q;Q=function(J,K,nt){var st,lt,vt;for(lt=0,st=J.length;lt<st;)vt=lt+st>>>1,nt(J[vt],K)>=0?lt=vt+1:st=vt;return lt},z.exports=(function(){function J(K){var nt;this.options=K,this.comparator=this.options.comparator,this.data=((nt=this.options.initialValues)!=null?nt.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return J.prototype.queue=function(K){var nt;nt=Q(this.data,K,this.comparator),this.data.splice(nt,0,K)},J.prototype.dequeue=function(){return this.data.pop()},J.prototype.peek=function(){return this.data[this.data.length-1]},J.prototype.clear=function(){this.data.length=0},J})()},{}],4:[function(P,z,Y){z.exports=(function(){function Q(J){var K,nt,st,lt,vt,dt,kt,Et;for(this.comparator=J?.comparator||function(Rt,Ct){return Rt-Ct},this.pageSize=J?.pageSize||512,this.length=0,kt=0;1<<kt<this.pageSize;)kt+=1;if(1<<kt!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=kt,this._emptyMemoryPageTemplate=K=[],nt=0,vt=this.pageSize;0<=vt?nt<vt:nt>vt;0<=vt?++nt:--nt)K.push(null);if(this._memory=[],this._mask=this.pageSize-1,J.initialValues)for(dt=J.initialValues,st=0,lt=dt.length;st<lt;st++)Et=dt[st],this.queue(Et)}return Q.prototype.queue=function(J){this.length+=1,this._write(this.length,J),this._bubbleUp(this.length,J)},Q.prototype.dequeue=function(){var J,K;return J=this._read(1),K=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,K),this._bubbleDown(1,K)),J},Q.prototype.peek=function(){return this._read(1)},Q.prototype.clear=function(){this.length=0,this._memory.length=0},Q.prototype._write=function(J,K){var nt;for(nt=J>>this._shift;nt>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[nt][J&this._mask]=K},Q.prototype._read=function(J){return this._memory[J>>this._shift][J&this._mask]},Q.prototype._bubbleUp=function(J,K){var nt,st,lt,vt;for(nt=this.comparator;J>1&&(st=J&this._mask,J<this.pageSize||st>3?lt=J&~this._mask|st>>1:st<2?(lt=J-this.pageSize>>this._shift,lt+=lt&~(this._mask>>1),lt|=this.pageSize>>1):lt=J-2,vt=this._read(lt),!(nt(vt,K)<0));)this._write(lt,K),this._write(J,vt),J=lt},Q.prototype._bubbleDown=function(J,K){var nt,st,lt,vt,dt;for(dt=this.comparator;J<this.length;)if(J>this._mask&&!(J&this._mask-1)?nt=st=J+2:J&this.pageSize>>1?(nt=(J&~this._mask)>>1,nt|=J&this._mask>>1,nt=nt+1<<this._shift,st=nt+1):(nt=J+(J&this._mask),st=nt+1),nt!==st&&st<=this.length)if(lt=this._read(nt),vt=this._read(st),dt(lt,K)<0&&dt(lt,vt)<=0)this._write(nt,K),this._write(J,lt),J=nt;else if(dt(vt,K)<0)this._write(st,K),this._write(J,vt),J=st;else break;else if(nt<=this.length)if(lt=this._read(nt),dt(lt,K)<0)this._write(nt,K),this._write(J,lt),J=nt;else break;else break},Q})()},{}],5:[function(P,z,Y){z.exports=(function(){function Q(J){var K;this.comparator=J?.comparator||function(nt,st){return nt-st},this.length=0,this.data=((K=J.initialValues)!=null?K.slice(0):void 0)||[],this._heapify()}return Q.prototype._heapify=function(){var J,K,nt;if(this.data.length>0)for(J=K=1,nt=this.data.length;1<=nt?K<nt:K>nt;J=1<=nt?++K:--K)this._bubbleUp(J)},Q.prototype.queue=function(J){this.data.push(J),this._bubbleUp(this.data.length-1)},Q.prototype.dequeue=function(){var J,K;return K=this.data[0],J=this.data.pop(),this.data.length>0&&(this.data[0]=J,this._bubbleDown(0)),K},Q.prototype.peek=function(){return this.data[0]},Q.prototype.clear=function(){this.length=0,this.data.length=0},Q.prototype._bubbleUp=function(J){for(var K,nt;J>0&&(K=J-1>>>1,this.comparator(this.data[J],this.data[K])<0);)nt=this.data[K],this.data[K]=this.data[J],this.data[J]=nt,J=K},Q.prototype._bubbleDown=function(J){var K,nt,st,lt,vt;for(K=this.data.length-1;nt=(J<<1)+1,lt=nt+1,st=J,nt<=K&&this.comparator(this.data[nt],this.data[st])<0&&(st=nt),lt<=K&&this.comparator(this.data[lt],this.data[st])<0&&(st=lt),st!==J;)vt=this.data[st],this.data[st]=this.data[J],this.data[J]=vt,J=st},Q})()},{}]},{},[1])(1)})})(priorityQueue)),priorityQueue.exports}requirePriorityQueue();export{BorderType as B,DirectConvolution as D,M$2 as M,T,Matrix as a,xMedian as b,MultivariateLinearRegression as c,requireScheduler as d,inverse as i,k,labPlugin as l,quickMedian as q,robustPointInPolygon as r,x$1 as x};
